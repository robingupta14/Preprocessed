







char *fn_0(const char *path, const char *filename)
{
 if (!path)
  path = "";
 const char *end = path + strlen(path);
 while (*filename == '/')
  filename++;
 return xasprintf("%s%s%s", path, (end != path && end[-1] != '/' ? "/" : ""), filename);
}

char *fn_1(const char *path, const char *filename)
{
    char *abspath = realpath(filename, NULL);
    char *base = strrchr((abspath ? abspath : filename), '/');




    char buf[sizeof("tmp-"LIBREPORT_ISO_DATE_STRING_SAMPLE"-%lu")];
    if (base && base[1] != '\0' && base[1] != '.')
    {

        base++;
    }
    else
    {
        sprintf(buf, "tmp-%s-%lu", iso_date_string(NULL), (long)getpid());
        base = buf;
    }
    char *name = concat_path_file(path, base);
    free(abspath);
    return name;
}
