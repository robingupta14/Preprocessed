<?php



if (!defined('SEO_FULLWEBPATH')) {
	define('SEO_FULLWEBPATH', var_0);
	define('SEO_WEBPATH', var_1);
}









function fn_0() {
	return var_2;
}


function fn_1() {
	
}


function fn_2() {
	global $var_3;
	?>
	<script type="text/javascript" src="<?php  ?>/js/jquery.js"></script>
	<?php
	if(zp_loggedin()) {
		?>
		<script type="text/javascript" src="<?php  ?>/js/zenphoto.js"></script>
		<link rel="stylesheet" href="<?php  ?>/admintoolbox.css" type="text/css" />
		<?php
	}
}


function fn_3() {
	global $var_3, $var_4, $var_5, $var_6, $var_7, $var_8, $var_9, $var_10;
	if (zp_loggedin()) {
		$var_11 = var_0 . "/" . var_12;
		$var_13 = fn_28();
		ob_start();
		?>
		<script type="text/javascript">
			
			var deleteAlbum1 = "<?php  ?>";
			var deleteAlbum2 = "<?php  ?>";
			function newAlbum(folder, albumtab) {
				var album = prompt('<?php  ?>', '<?php  ?>');
				if (album) {
					launchScript('<?php  ?>/admin-edit.php', ['action=newalbum', 'folder=' + encodeURIComponent(folder), 'name=' + encodeURIComponent(album), 'albumtab=' + albumtab, 'XSRFToken=<?php  ?>']);
				}
			}
			
		</script>
		<div id="zp__admin_module">
			<div id="zp__admin_info">
				<span class="zp_logo">ZP</span>
				<span class="zp_user"> <?php  ?>
					<?php
					if(array_key_exists('site_upgrade_state', $var_10)) {
						if($var_10['site_upgrade_state'] == 'closed_for_test') {
							
						}
					}
					?>
				</span>
			</div>
			<button type="button" id="zp__admin_link" onclick="javascript:toggle('zp__admin_data');">
				<?php  ?>
			</button>
			<div id="zp__admin_data" style="display: none;">
				<ul>
				<?php
				$var_14 = ob_get_contents();
				ob_end_clean();
				ob_start();

				if (zp_loggedin(var_15)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin.php', gettext("Overview"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				if (zp_loggedin(var_16 | var_17 | var_18)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-upload.php', gettext("Upload"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				if (zp_loggedin(var_19)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-edit.php', gettext("Albums"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				zp_apply_filter('admin_toolbox_global', $var_11);

				if (zp_loggedin(var_20)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-tags.php', gettext("Tags"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				if (zp_loggedin(var_21)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-users.php', gettext("Users"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				if (zp_loggedin(var_22)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-options.php?tab=general', gettext("Options"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				if (zp_loggedin(var_18)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-themes.php', gettext("Themes"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}
				if (zp_loggedin(var_23)) {
					?>
					<li>
						<?php printLinkHTML($var_11 . '/admin-plugins.php', gettext("Plugins"), NULL, NULL, NULL); ?>
					</li>
					<li>
						<?php printLinkHTML($var_11 . '/admin-logs.php', gettext("Logs"), NULL, NULL, NULL); ?>
					</li>
					<?php
				}

				$var_24 = getOption('custom_index_page');
				if (empty($var_24) || !file_exists(var_25 . '/' . var_26 . '/' . $var_7->fn_4() . '/' . internalToFilesystem($var_24) . '.php')) {
					$var_24 = 'index.php';
				} else {
					$var_24 .= '.php';
				}
				$var_28 = false;
				switch ($var_6) {
					case 'index.php':
					case $var_24:
						
						if (zp_loggedin(var_23)) {
							?>
							<li>
								<?php printLinkHTML($var_11 . '/admin-edit.php?page=edit', gettext("Sort Gallery"), NULL, NULL, NULL); ?>
							</li>
							<?php
						}
						if (zp_loggedin(var_16)) {
							
							?>
							<li>
								<a href="javascript:newAlbum('',true);"><?php  ?></a>
							</li>
							<?php
						}
						if ($var_6 == 'index.php') {
							$var_29 = '';
						} else {
							$var_29 = "&amp;p=" . urlencode(stripSuffix($var_6));
						}
						if ($var_13 > 1) {
							$var_29 .= "&amp;page=$var_13";
						}
						zp_apply_filter('admin_toolbox_gallery', $var_11);
						break;
					case 'image.php':
						$var_28 = true; 
					case 'album.php':
						
						$var_30 = $var_3->var_31;
						if ($var_3->isMyItem(var_19)) {
							
							?>
							<li>
								<?php printLinkHTML($var_11 . '/admin-edit.php?page=edit&album=' . pathurlencode($var_3->var_31), gettext('Edit album'), NULL, NULL, NULL); ?>
							</li>
							<?php
							if (!$var_3->isDynamic()) {
								if ($var_3->fn_5()) {
									?>
									<li>
										<?php printLinkHTML($var_11 . '/admin-edit.php?page=edit&album=' . pathurlencode($var_30) . '&tab=subalbuminfo', gettext("Sort subalbums"), NULL, NULL, NULL); ?>
									</li>
									<?php
								}
								if ($var_3->fn_6() > 0) {
									?>
									<li>
										<?php printLinkHTML($var_11 . '/admin-albumsort.php?page=edit&album=' . pathurlencode($var_30) . '&tab=sort', gettext("Sort images"), NULL, NULL, NULL); ?>
									</li>
									<?php
								}
							}
							
							?>
							<li>
								<a href="javascript:confirmDeleteAlbum('<?php  ?>/admin-edit.php?page=edit&amp;action=deletealbum&amp;album=<?php var_36=<?php  ?>');"
									 title="<?var_37  ?>"><?php  ?></a>
							</li>
							<?php
						}
						if ($var_3->isMyItem(var_16) && !$var_3->isDynamic()) {
							
							?>
							<li>
								<?php printLinkHTML($var_11 . '/admin-upload.php?album=' . pathurlencode($var_30), gettext("Upload Here"), NULL, NULL, NULL); ?>
							</li>
							<li>
								<a href="javascript:newAlbum('<?php  ?>',true);"><?php  ?></a>
							</li>
							<?php
						}
						zp_apply_filter('admin_toolbox_album', $var_30, $var_11);
						if ($var_28) {
							
							$var_38 = $var_4->var_39;
							if (!$var_3->isDynamic()) { 
								if ($var_3->isMyItem(var_19)) {
									$var_40 = gettext("Are you sure you want to delete this image? THIS CANNOT BE UNDONE!");
									
									?>
									<li>
										<a href="javascript:confirmDelete('<?php  ?>/admin-edit.php?page=edit&amp;action=deleteimage&amp;album=<?php  ?>&amp;image=<?php  ?>&amp;XSRFToken=<?php  ?>','<?php  ?>');"
											 title="<?php  ?>"><?php  ?></a>
									</li>
									<li>
										<a href="<?php  ?>/admin-edit.php?page=edit&amp;album=<?php  ?>&amp;singleimage=<?php  ?>&amp;tab=imageinfo&amp;nopagination"
											 title="<?php  ?>"><?php  ?></a>
									</li>
									<?php
								}
								
								zp_apply_filter('admin_toolbox_image', $var_30, $var_38, $var_11);
							}
							$var_29 = "&amp;album=" . html_encode(pathurlencode($var_30)) . "&amp;image=" . urlencode($var_38);
						} else {
							
							$var_29 = "&amp;album=" . html_encode(pathurlencode($var_30));
							if ($var_13 > 1) {
								$var_29 .= "&amp;page=$var_13";
							}
						}
						break;
					case 'search.php':
						$var_41 = $var_5->getSearchWords();
						if (!empty($var_41)) {
							
							if (zp_loggedin(var_16)) {
								$var_43 = $var_11 . '/admin-dynamic-album.php?' . substr($var_5->getSearchParams(), 1);
								
								?>
								<li>
									<a href="<?php  ?>" title="<?php  ?>" ><?php  ?></a>
								</li>
								<?php
							}
							zp_apply_filter('admin_toolbox_search', $var_11);
						}
						$var_29 = "&amp;p=search" . $var_5->getSearchParams() . "&amp;page=$var_13";
						break;
					default:
						
						$var_24 = stripSuffix($var_6);
						$var_29 = "&amp;p=" . urlencode($var_24);
						if ($var_13 > 1) {
							$var_29 .= "&amp;page=$var_13";
						}
						$var_29 = zp_apply_filter('admin_toolbox_' . $var_24, $var_29, $var_11);
						break;
				}
				$var_29 = zp_apply_filter('admin_toolbox_close', $var_29, $var_11);
				if ($var_8->var_45) {
					
					$var_46 = (int) ((var_47 == 'https') & true);
					$var_43 = var_48 . '/index.php?logout=' . $var_46 . $var_29;
					?>
					<li>
						<a href="<?php  ?>"><?php  ?> </a>
					</li>
					<?php
				}
				$var_49 = ob_get_contents();
				ob_end_clean();
				if ($var_49) {
					
					?>
				</ul>
			</div>
		</div>
		<?php
		}
	}
}





function fn_7() {
	global $var_7;
	return $var_7->getTitle();
}


function fn_8() {
	return getBare(fn_7());
}


function fn_9() {
	
}

function fn_10() {
	
}


function fn_11($var_51 = ' | ', $var_52 = true, $var_53 = true) {
	global $var_7, $var_3, $var_4, $var_54, $var_55, $var_6, $var_56, $var_57, $var_58;
	$var_59 = html_encode(getBare(fn_17()));
	$var_51 = html_encode($var_51);
	if ($var_59) {
		$var_59 = $var_51 . $var_59;
	}
	$var_60 = html_encode(fn_8());
	if ($var_57 > 1) {
		$var_61 = ' (' . $var_57 . ')';
	} else {
		$var_61 = '';
	}
	switch ($var_6) {
		case 'index.php':
			return $var_60 . $var_59 . $var_61;
			break;
		case 'album.php':
		case 'image.php':
			if ($var_52) {
				$var_62 = fn_51();
				$var_63 = '';
				if (count($var_62) != 0) {
					$var_62 = array_reverse($var_62);
					foreach ($var_62 as $var_64) {
						$var_63 .= html_encode(getBare($var_64->getTitle())) . $var_51;
					}
				}
			} else {
				$var_63 = '';
			}
			$var_65 = html_encode(fn_45()) . $var_61 . $var_51 . $var_63 . $var_60 . $var_59;
			switch ($var_6) {
				case 'album.php':
					return $var_65;
					break;
				case 'image.php':
					return html_encode(fn_91()) . $var_51 . $var_65;
					break;
			}
			break;
		case 'news.php':
			if (function_exists("is_NewsArticle")) {
				if (is_NewsArticle()) {
					return html_encode(getBareNewsTitle()) . $var_61 . $var_51 . gettext('News') . $var_51 . $var_60 . $var_59;
				} else if (is_NewsCategory()) {
					return html_encode(getBare($var_56->getTitle())) . $var_61 . $var_51 . gettext('News') . $var_51 . $var_60 . $var_59;
				} else {
					return gettext('News') . $var_61 . $var_51 . $var_60 . $var_59;
				}
			}
			break;
		case 'pages.php':
			if ($var_53) {
				$var_62 = $var_55->getParents();
				$var_67 = '';
				if (count($var_62) != 0) {
					$var_62 = array_reverse($var_62);
					foreach ($var_62 as $var_64) {
						$var_68 = new class_0($var_64);
						$var_67 .= html_encode(getBare($var_68->getTitle())) . $var_51;
					}
				}
			} else {
				$var_67 = '';
			}
			return html_encode(getBarePageTitle()) . $var_61 . $var_51 . $var_67 . $var_60 . $var_59;
			break;
		case '404.php':
			return gettext('Object not found') . $var_51 . $var_60 . $var_59;
			break;
		default: 
			$var_69 = stripSuffix($var_6);
			$var_70 = array(
					'gallery' => gettext('Gallery'), 
					'contact' => gettext('Contact'), 
					'register' => gettext('Register'), 
					'search' => gettext('Search'), 
					'archive' => gettext('Archive view'), 
					'password' => gettext('Password required'));
			if (is_object($var_58)) {
				$var_70['favorites'] = gettext('My favorites');
			}
			if (array_key_exists($var_69, $var_70)) {
				return $var_70[$var_69] . $var_61 . $var_51 . $var_60 . $var_59;
			} else {
				return $var_69 . $var_61 . $var_51 . $var_60 . $var_59;
			}
			break;
	}
}


function fn_12($var_51 = ' | ', $var_52 = true, $var_53 = true) {
	
}


function fn_13() {
	global $var_7;
	return $var_7->getDesc();
}


function fn_14() {
	return getBare(fn_13());
}


function fn_15() {
	
}

function fn_16() {
	
}


function fn_17() {
	global $var_7;
	return $var_7->getWebsiteTitle();
}


function fn_18() {
	global $var_7;
	return $var_7->getWebsiteURL();
}


function fn_19() {
	global $var_3, $var_6;
	$var_13 = 1;
	if (in_context(var_74) && $var_6 != 'index.php') {
		$var_75 = getUrAlbum($var_3);
		$var_13 = $var_75->getGalleryPage();
	}
	if (!$var_43 = fn_21($var_13)) {
		$var_43 = fn_20($var_13);
	}
	return zp_apply_filter('getLink', $var_43, 'index.php', NULL);
}


function fn_20($var_13 = 1, $var_77 = null) {
	if ($var_13 > 1) {
		return rewrite_path('/' . var_78 . '/' . $var_13 . '/', "/index.php?" . "page=" . $var_13, $var_77);
	} else {
		if (is_null($var_77)) {
			if (class_exists('seo_locale')) {
				$var_77 = seo_locale::localePath();
			} else {
				$var_77 = var_1;
			}
		}
		return $var_77 . "/";
	}
}


function fn_21($var_13 = 1, $var_77 = null) {
	$var_79 = getOption('custom_index_page');
	if ($var_79) {
		$var_43 = fn_154($var_79, '', $var_77);
		if ($var_13 > 1) {
			if (var_80) {
				$var_43 .= $var_13 . '/';
			} else {
				$var_43 .= "&amp;page=" . $var_13;
			}
		}
		return $var_43;
	}
	return false;
}


function fn_22() {
	$var_79 = getOption('custom_index_page');
	if ($var_79) {
		return $var_79 . '.php';
	}
	return 'gallery.php';
}


function fn_23($var_81 = NULL, $var_82 = NULL, $var_83 = true) {
	global $var_6;
	if (is_null($var_82)) {
		$var_82 = gettext('Gallery');
	}
	$var_84 = getOption('custom_index_page');
	if ($var_84 && $var_83) {
		fn_25($var_81);
	}
	if ($var_6 == fn_22()) {
		$var_81 = NULL;
	}
	if (!$var_84 || ($var_84 && in_array($var_6, array('image.php', 'album.php', fn_22())))) {
		printLinkHTML(fn_19(), $var_82, $var_82, 'galleryindexurl');
		
	}
}



function fn_24() {
	return var_1 . '/';
}


function fn_25($var_81 = NULL, $var_82 = NULL) {
	global $var_6;
	if ($var_6 == 'index.php') {
		$var_81 = '';
	}
	if (is_null($var_82)) {
		$var_82 = gettext('Home');
	}
	printLinkHTML(fn_24(), $var_82, $var_82, 'homeurl');
	
}


function fn_26($var_85 = null, $var_81 = null) {
	$var_86 = getDataUsageNotice();
	if (!empty($var_86['url'])) {
		
		printLinkHTML($var_86['url'], $var_86['linktext'], $var_86['linktext'], null, null);
		
	}
}


function fn_5() {
	global $var_7, $var_3, $var_5;
	if (in_context(var_87) && is_null($var_3)) {
		return $var_5->fn_5();
	} else if (in_context(var_74)) {
		return $var_3->fn_5();
	} else {
		return $var_7->fn_5();
	}
}


function fn_4() {
	global $var_7;
	return $var_7->fn_4();
}





function fn_27($var_88 = false, $var_89 = NULL) {
	global $var_90, $var_7, $var_3, $var_57, $var_91, $var_5;
	if (is_null($var_90)) {
		if (in_context(var_87)) {
			$var_90 = $var_5->getAlbums($var_88 ? 0 : $var_57, NULL, NULL, true, $var_89);
		} else if (in_context(var_74)) {
			$var_90 = $var_3->getAlbums($var_88 ? 0 : $var_57, NULL, NULL, true, $var_89);
		} else {
			$var_90 = $var_7->getAlbums($var_88 ? 0 : $var_57, NULL, NULL, true, $var_89);
		}
		if (empty($var_90)) {
			return NULL;
		}
		$var_91 = $var_3;
		$var_3 = newAlbum(array_shift($var_90), true, true);
		save_context();
		add_context(var_74);
		return true;
	} else if (empty($var_90)) {
		$var_90 = NULL;
		$var_3 = $var_91;
		restore_context();
		return false;
	} else {
		$var_3 = newAlbum(array_shift($var_90), true, true);
		return true;
	}
}


function fn_28() {
	global $var_57;
	return $var_57;
}


function fn_29($var_75 = NULL) {
	global $var_3, $var_7;
	if (is_null($var_75))
		$var_75 = $var_3;
	if (!is_object($var_75))
		return;
	$var_93 = array();
	$var_94 = $var_75->getAlbums(0);
	if (is_array($var_94)) {
		foreach ($var_94 as $var_95) {
			$var_93[] = $var_95;
			$var_96 = newAlbum($var_95);
			$var_93 = array_merge($var_93, fn_29($var_96));
		}
	}
	return $var_93;
}


function fn_30($var_68, &$var_97, $var_98) {
	global $var_7;
	$var_99 = $var_68->getAlbums();
 foreach ($var_99 as $var_100) {
		$var_75 = newAlbum($var_100);
		If (!$var_75->isDynamic() && $var_75->checkAccess()) {
			if ($var_98)
				$var_75->getImages();
			$var_97[] = $var_75->getID();
			fn_30($var_75, $var_97, $var_98);
		}
	}
}


function fn_31($var_104 = false) {
	global $var_7, $var_3, $var_105, $var_106, $var_56;
	if (in_context(var_74 | var_87)) {
		$var_107 = max(1, getOption('albums_per_page'));
		$var_108 = (int) ceil(fn_5() / $var_107);
		$var_109 = fn_6();
		if ($var_104) {
			if ($var_104 === true) {
				$var_109 = min(1, $var_109);
			} else {
				$var_109 = 0;
			}
		}
		$var_110 = max(1, getOption('images_per_page'));
		$var_108 = ($var_108 + ceil(($var_109 - $var_105) / $var_110));
		return $var_108;
	} else if (get_context() == var_111) {
		if (galleryAlbumsPerPage() != 0) {
			return (int) ceil($var_7->fn_5() / galleryAlbumsPerPage());
		} else {
			return NULL;
		}
		return NULL;
	} else if (isset($var_106)) {
		if (in_context(var_112)) {
			$var_113 = $var_56;
		} else {
			$var_113 = NULL;
		}
		return (int) ceil(count($var_106->getArticles(0, NULL, true, NULL, NULL, NULL, $var_113)) / var_115);
	}
}


function fn_32($var_13, $var_116 = null) {
	global $var_3, $var_7, $var_5, $var_6, $var_10;
	if (is_null($var_116)) {
		$var_116 = fn_31();
	}
	if ($var_13 <= 0 || $var_13 > $var_116) {
		return NULL;
	}
	if (in_context(var_87)) {
		$var_117 = $var_5->codifySearchString();
		$var_119 = $var_5->getSearchDate();
		$var_121 = $var_5->getSearchFields(true);
		$var_123 = getSearchURL($var_117, $var_119, $var_121, $var_13, array('albums' => $var_5->getAlbumList()));
		return $var_123;
	} else if (in_context(var_74)) {
		return $var_3->getLink($var_13);
	} else if (in_array($var_6, array('index.php', 'album.php', 'image.php'))) {
		if (in_context(var_111)) {
			$var_126 = '/';
			$var_127 = 'index.php';
			if ($var_13 > 1) {
				$var_126 .= var_78 . '/' . $var_13 . '/';
				$var_127 .= '?page=' . $var_13;
			}
		} else {
			return NULL;
		}
	} else {
		
		$var_128 = stripSuffix($var_6);
		if (array_key_exists($var_128, $var_10['special_pages'])) {
			$var_126 = preg_replace('~^_PAGE_/~', var_78 . '/', $var_10['special_pages'][$var_128]['rewrite']) . '/';
		} else {
			$var_126 = '/' . var_78 . '/' . $var_128 . '/';
		}
		$var_127 = 'index.php?p=' . $var_128;
		if ($var_13 > 1) {
			$var_126 .= $var_13 . '/';
			$var_127 .= '&page=' . $var_13;
		}
	}
	return zp_apply_filter('getLink', rewrite_path($var_126, $var_127), $var_6, $var_13);
}


function fn_33() {
	return (fn_28() < fn_31());
}


function fn_34() {
	return fn_32(fn_28() + 1);
}


function fn_35($var_82, $var_129 = NULL, $var_130 = NULL, $var_131 = NULL) {
	if (fn_33()) {
		printLinkHTML(fn_34(), $var_82, $var_129, $var_130, $var_131);
	} else {
		
	}
}


function fn_36() {
	return (fn_28() > 1);
}


function fn_37() {
	return fn_32(fn_28() - 1);
}


function fn_38($var_82, $var_129 = NULL, $var_130 = NULL, $var_131 = NULL) {
	if (fn_36()) {
		printLinkHTML(fn_37(), $var_82, $var_129, $var_130, $var_131);
	} else {
		
	}
}


function fn_39($var_132, $var_51, $var_133, $var_130 = 'pagenav', $var_131 = NULL) {
	
	fn_38($var_132, gettext("Previous Page"));
	
	fn_35($var_133, gettext("Next Page"));
	
}


function fn_40($var_130 = 'pagelist', $var_131 = NULL, $var_134 = 9) {
	fn_42(null, null, false, false, $var_130, $var_131, false, $var_134);
}


function fn_41($var_104, $var_134, $var_135, $var_136, $var_116) {
	$var_137 = array();
	if (fn_36()) {
		$var_137['prev'] = fn_37();
	} else {
		$var_137['prev'] = NULL;
	}
	if ($var_135) {
		$var_137[1] = fn_32(1, $var_116);
	}

	if ($var_134 == 0) {
		$var_134 = $var_116;
	}
	$var_138 = 2;
	if ($var_135)
		$var_138 = $var_138 + 2;
	$var_139 = floor(($var_134 - $var_138) / 2);
	$var_140 = max(round($var_138 / 2), min($var_136 - $var_139 - (2 - round($var_138 / 2)), $var_116 - $var_134 + $var_138 - 1));
	$var_141 = min($var_116, max($var_134 - round($var_138 / 2), $var_136 + floor($var_139)));
	$var_142 = round(($var_140 - 2) / 2) + 1;
	$var_143 = $var_116 - round(($var_116 - $var_141) / 2);

	for ($var_144 = $var_140; $var_144 <= $var_141; $var_144++) {
		$var_137[$var_144] = fn_32($var_144, $var_116);
	}
	if ($var_135) {
		$var_137[$var_116] = fn_32($var_116, $var_116);
	}
	if (fn_33()) {
		$var_137['next'] = fn_34();
	} else {
		$var_137['next'] = NULL;
	}
	return $var_137;
}


function fn_42($var_132, $var_133, $var_104 = false, $var_145 = true, $var_130 = 'pagelist', $var_131 = NULL, $var_135 = true, $var_134 = 9) {
	$var_136 = fn_28();
	$var_116 = max(1, fn_31($var_104));
	$var_146 = fn_41($var_104, $var_134, $var_135, $var_136, $var_116);
	if ($var_116 > 1) {
		?>
		<div <?php if ($var_131)  ?> class="<?php  ?>">
			<ul class="<?php  ?>">
				<?php
				$var_147 = $var_146['prev'];
				unset($var_146['prev']);
				$var_148 = $var_146['next'];
				unset($var_146['next']);
				if ($var_145) {
					?>
					<li class="prev">
						<?php
						if ($var_147) {
							printLinkHTML($var_147, html_encode($var_132), gettext('Previous Page'));
						} else {
							?>
							<span class="disabledlink"><?php  ?></span>
							<?php
						}
						?>
					</li>
					<?php
				}
				$var_149 = NULL;
				if ($var_135) {
					?>
					<li class="<?php
					if ($var_136 == 1)
						
					var_150
						
					?>">
								<?php
								if ($var_136 == 1) {
									
								} else {
									printLinkHTML($var_146[1], 1, gettext("Page 1"));
								}
								?>
					</li>
					<?php
					$var_149 = 1;
					unset($var_146[1]);
				}
				foreach ($var_146 as $var_144 => $var_43) {
					$var_151 = $var_144 - $var_149;
					if ($var_151 > 2) {
						?>
						<li>
							<?php
							$var_142 = $var_144 - (int) (($var_144 - $var_149) / 2);
							printLinkHTML(fn_32($var_142, $var_116), '...', sprintf(ngettext('Page %u', 'Page %u', $var_142), $var_142));
							?>
						</li>
						<?php
					} else if ($var_151 == 2) {
						?>
						<li>
							<?php
							$var_142 = $var_149 + 1;
							printLinkHTML(fn_32($var_142, $var_116), $var_142, sprintf(ngettext('Page %u', 'Page %u', $var_142), $var_142));
							?>
						</li>
						<?php
					}
					?>
					<li<?php if ($var_136 == $var_144)  ?>>
						<?php
						if ($var_144 == $var_136) {
							
						} else {
							$var_129 = sprintf(ngettext('Page %1$u', 'Page %1$u', $var_144), $var_144);
							printLinkHTML($var_43, $var_144, $var_129);
						}
						?>
					</li>
					<?php
					$var_149 = $var_144;
					unset($var_146[$var_144]);
					if ($var_135 && count($var_146) == 1) {
						break;
					}
				}
				if ($var_135) {
					foreach ($var_146 as $var_144 => $var_43) {
						$var_151 = $var_144 - $var_149;
						if ($var_151 > 2) {
							$var_142 = $var_144 - (int) (($var_144 - $var_149) / 2);
							?>
							<li>
								<?php printLinkHTML(fn_32($var_142, $var_116), '...', sprintf(ngettext('Page %u', 'Page %u', $var_142), $var_142)); ?>
							</li>
							<?php
						} else if ($var_151 == 2) {
							$var_142 = $var_149 + 1;
							?>
							<li>
								<?php printLinkHTML(fn_32($var_142, $var_116), $var_142, sprintf(ngettext('Page %u', 'Page %u', $var_142), $var_142)); ?>
							</li>
							<?php
						}
						?>
						<li class="last<?php if ($var_136 == $var_144)  ?>">
							<?php
							if ($var_136 == $var_144) {
								
							} else {
								printLinkHTML($var_43, $var_144, sprintf(ngettext('Page %u', 'Page %u', $var_144), $var_144));
							}
							?>
						</li>
						<?php
					}
				}
				if ($var_145) {
					?>
					<li class="next">
						<?php
						if ($var_148) {
							printLinkHTML($var_148, html_encode($var_133), gettext('Next Page'));
						} else {
							?>
							<span class="disabledlink"><?php  ?></span>
							<?php
						}
						?>
					</li>
					<?php
				}
				?>
			</ul>
		</div>
		<?php
	}
}





function fn_43($var_75) {
	global $var_3;
	$var_3 = $var_75;
	set_context(var_111 | var_74);
}


function fn_44() {
	if (!in_context(var_74))
		return false;
	global $var_3;
	return $var_3->getTitle();
}


function fn_45() {
	return getBare(fn_44());
}


function fn_46() {
	global $var_3;
	$var_129 = fn_45();
	$var_152 = $var_3->getPassword();
	if (zp_loggedin() && !empty($var_152)) {
		$var_129 .= "\n" . gettext('The album is password protected.');
	}
	if (!$var_3->getShow()) {
		$var_129 .= "\n" . gettext('The album is un-published.');
	}
	return $var_129;
}

function fn_47() {
	
}


function fn_48() {
	
}

function fn_49() {
	
}


function fn_50() {
	global $var_3, $var_4, $var_5, $var_7;
	$var_31 = $var_3->getFileName();
	if (in_context(var_87)) {
		$var_156 = $var_5->getAlbums();
	} else if (in_context(var_74)) {
		$var_64 = $var_3->getParent();
		if (is_null($var_64)) {
			$var_156 = $var_7->getAlbums();
		} else {
			$var_156 = $var_64->getAlbums();
		}
	}
	$var_158 = 0;
	foreach ($var_156 as $var_159) {
		$var_158++;
		if ($var_31 == $var_159) {
			return $var_158;
		}
	}
	return false;
}


function fn_51($var_75 = null) {
	$var_62 = array();
	if (in_context(var_74)) {
		global $var_3, $var_5, $var_7;
		if (is_null($var_75)) {
			if (in_context(var_160) && !in_context(var_161)) {
				$var_75 = $var_5->getDynamicAlbum();
				if (empty($var_75))
					return $var_62;
			} else {
				$var_75 = $var_3;
			}
		}
		while (!is_null($var_75 = $var_75->getParent())) {
			array_unshift($var_62, $var_75);
		}
	}
	return $var_62;
}


function fn_52($var_129 = NULL) {
	global $var_5, $var_7, $var_3, $var_163;
	$var_164 = array();
	if (in_context(var_160)) {
		$var_75 = NULL;
		$var_165 = $var_5->getDynamicAlbum();
		if (empty($var_165)) {
			if (!is_null($var_3)) {
				if (in_context(var_161) && $var_163 == $var_3->var_31) {
					$var_75 = $var_3;
				}
			}
		} else {
			if (in_context(var_166) && in_context(var_161)) {
				$var_75 = $var_3;
			} else {
				$var_75 = $var_165;
			}
		}
	} else {
		$var_75 = $var_3;
	}
	if ($var_75) {
		if (is_null($var_129)) {
			$var_129 = $var_75->getTitle();
			if (empty($var_129)) {
				$var_129 = gettext('Album Thumbnails');
			}
		}
		return array('link' => $var_75->getLink(), 'text' => $var_129, 'title' => getBare($var_129));
	}
	return false;
}


function fn_53($var_85 = '', $var_81 = '', $var_129 = NULL) {
	if ($var_167 = fn_52($var_129)) {
		if ($var_85) {
			$var_164 = '<span class="beforetext">' . html_encode($var_85) . '</span>';
		} else {
			$var_164 = '';
		}
		$var_164 .= '<a href="' . html_encode($var_167['link']) . '" title="' . html_encode($var_167['title']) . '">';
		$var_164 .= html_encode($var_167['text']);
		$var_164 .= '</a>';
		if ($var_81) {
			$var_164 .= '<span class="aftertext">' . html_encode($var_81) . '</span>';
		}
		
	}
}


function fn_54($var_168 = NULL, $var_130 = NULL, $var_169 = NULL, $var_170 = NULL, $var_171 = '%B %Y') {
	global $var_5;
	if (is_null($var_168)) {
		$var_168 = ' | ';
	}
	if ($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if ($var_151 = $var_5->getSearchDate()) {
		if (is_null($var_170)) {
			$var_82 = gettext('Archive');
			$var_172 = true;
		} else {
			$var_82 = getBare(html_encode($var_170));
			$var_172 = false;
		}
		
		printf('%s' . $var_82 . '%s', $var_172 ? '<em>' : '', $var_172 ? '</em>' : '');
		
		
		if ($var_171) {
			$var_151 = strtotime($var_151);
			$var_151 = strftime($var_171, $var_151);
		}
		
	} else {
		if (is_null($var_169)) {
			$var_82 = gettext('Search');
			$var_172 = true;
		} else {
			$var_82 = getBare(html_encode($var_169));
			$var_172 = false;
		}
		printf('%s' . $var_82 . '%s', $var_172 ? '<em>' : '', $var_172 ? '</em>' : '');
	}
}


function fn_55() {
	global $var_7, $var_5, $var_3, $var_163;
	$var_164 = array();
	if (in_context(var_160)) {
		$var_13 = $var_5->var_13;
		$var_117 = $var_5->getSearchWords();
		$var_119 = $var_5->getSearchDate();
		$var_121 = $var_5->getSearchFields(true);
		$var_173 = $var_5->getAlbumList();
		if (!is_array($var_173)) {
			$var_173 = array();
		}
		$var_123 = getSearchURL($var_117, $var_119, $var_121, $var_13, array('albums' => $var_173));
		$var_165 = $var_5->getDynamicAlbum();
		if (empty($var_165)) {
			if (empty($var_119)) {
				$var_164[] = array('link' => $var_123, 'title' => gettext("Return to search"), 'text' => gettext("Search"));
				if (is_null($var_3)) {
					return $var_164;
				} else {
					$var_62 = fn_51();
				}
			} else {
				return array(array('link' => $var_123, 'title' => gettext("Return to archive"), 'text' => gettext("Archive")));
			}
		} else {
			$var_75 = $var_165;
			$var_62 = fn_51($var_75);
			if (in_context(var_161)) {
				array_push($var_62, $var_75);
			}
		}

		foreach ($var_62 as $var_174 => $var_175) {
			$var_176 = $var_175->var_31;
			if ($var_176 !== $var_165 && !in_array($var_176, $var_173)) {
				unset($var_62[$var_174]);
			}
		}
	} else {
		$var_62 = fn_51();
	}
	$var_177 = count($var_62);
	if ($var_177 > 0) {
		array_push($var_62, $var_3);
		$var_178 = -1;
		foreach ($var_62 as $var_64) {
			$var_178++;
			if($var_178 != 0) {
				$var_179 = $var_62[$var_178-1];
				$var_13 = $var_64->getGalleryPage();
				$var_180 = $var_179->getLink($var_13);
				$var_164[] = array('link' => html_encode($var_180), 'title' => $var_179->getTitle(), 'text' => $var_179->getTitle());
			}
		}
	}
	return $var_164;
}


function fn_56($var_85 = NULL, $var_168 = NULL, $var_81 = NULL, $var_181 = NULL, $var_182 = NULL) {
	$var_183 = fn_55();
	if (!empty($var_183)) {
		if (is_null($var_168)) {
			$var_168 = ' | ';
		}
		if (is_null($var_81)) {
			$var_81 = ' | ';
		}
		if (is_null($var_182)) {
			$var_182 = '...';
		}
		if ($var_85) {
			$var_164 = '<span class="beforetext">' . html_encode($var_85) . '</span>';
		} else {
			$var_164 = '';
		}
		if ($var_168) {
			$var_168 = '<span class="betweentext">' . html_encode($var_168) . '</span>';
		}
		$var_144 = 0;
		foreach ($var_183 as $var_184) {
			if ($var_144 > 0) {
				$var_164 .= $var_168;
			}

			$var_185 = $var_184['title'];
			if (!empty($var_185) && $var_181) {
				$var_185 = truncate_string($var_185, $var_181, $var_182);
			}
			$var_164 .= '<a href="' . html_encode($var_184['link']) . '"' . ' title="' . html_encode(getBare($var_185)) . '">' . html_encode($var_184['text']) . '</a>';
			$var_144++;
		}
		if ($var_81) {
			$var_164 .= '<span class="aftertext">' . html_encode($var_81) . '</span>';
		}
		
	}
}


function fn_57($var_85 = '', $var_81 = '', $var_129 = NULL, $var_130 = NULL, $var_131 = NULL) {
	global $var_7;
	$var_186 = rtrim($var_7->getWebsiteURL(), '/');
	if (!empty($var_186)) {
		$var_31 = $var_7->getWebsiteTitle();
		if (empty($var_31)) {
			$var_31 = gettext('Home');
		}
		if ($var_186 != var_48) {
			if ($var_85) {
				
			}
			printLinkHTML($var_186, $var_31, $var_129, $var_130, $var_131);
			if ($var_81) {
				
			}
		}
	}
}


function fn_58($var_171 = null) {
	global $var_3;
	$var_151 = $var_3->getDateTime();
	if (empty($var_151) || ($var_151 == '0000-00-00 00:00:00')) {
		return false;
	}
	if (is_null($var_171)) {
		return $var_151;
	}
	return zpFormattedDate($var_171, strtotime($var_151));
}


function fn_59($var_85 = '', $var_171 = NULL) {
	global $var_3;
	if (is_null($var_171)) {
		$var_171 = var_188;
	}
	$var_189 = fn_58($var_171);
	if ($var_189) {
		if ($var_85) {
			$var_189 = '<span class="beforetext">' . $var_85 . '</span>' . $var_189;
		}
	}
	
}


function fn_60() {
	global $var_3;
	return $var_3->getLocation();
}


function fn_61() {
	
}


function fn_62() {
	if (!in_context(var_74))
		return false;
	global $var_3;
	return $var_3->getDesc();
}


function fn_63() {
	return getBare(fn_62());
}


function fn_64() {
	global $var_3;
	
}

function fn_65() {
	
}


function fn_66() {
	global $var_3;
	return $var_3->getCustomData();
}


function fn_67() {
	
}


function fn_68($var_192) {
	if (!in_context(var_166))
		return false;
	global $var_193;
	return get_language_string($var_193->get($var_192));
}


function fn_69($var_192, $var_195 = '') {
	global $var_3;
	
}


function fn_70($var_75 = NULL) {
	global $var_3, $var_4, $var_5, $var_105;
	if (is_null($var_75))
		$var_75 = $var_3;
	$var_13 = 0;
	if (in_context(var_166) && !in_context(var_87)) {
		if ($var_3->isDynamic()) {
			$var_169 = $var_3->getSearchEngine();
			$var_197 = $var_169->getImageIndex($var_3->var_31, $var_4->var_39);
			$var_199 = $var_169->fn_5();
		} else {
			$var_197 = $var_4->getIndex();
			$var_199 = $var_75->fn_5();
		}
		$var_201 = floor(($var_197 - $var_105) / max(1, getOption('images_per_page'))) + 1;
		$var_202 = ceil($var_199 / max(1, getOption('albums_per_page')));
		if ($var_202 == 0 && $var_105 > 0)
			$var_201++;
		$var_13 = $var_202 + $var_201;
	}
	return $var_13;
}


function fn_71($var_75 = NULL) {
	global $var_3;
	if (is_null($var_75))
		$var_75 = $var_3;
	if (in_context(var_166)) {
		$var_13 = fn_70($var_75);
		if ($var_13 <= 1)
			$var_13 = 0;
	} else {
		$var_13 = 0;
	}
	return $var_75->getLink($var_13);
}


function fn_72($var_82, $var_129, $var_130 = NULL, $var_131 = NULL) {
	printLinkHTML(fn_71(), $var_82, $var_129, $var_130, $var_131);
}


function fn_73() {
	global $var_3;
	return $var_3->getThumb();
}


function fn_74($var_204) {
	global $var_205;
	$var_206 = '';
	$var_207 = var_25 . '/themes/' . basename($var_205);
	if (file_exists(internalToFilesystem($var_207 . '/images/err-passwordprotected.png'))) {
		$var_206 = $var_205 . '/images/err-passwordprotected.png';
	} else if (file_exists(internalToFilesystem($var_207 . '/images/err-passwordprotected.gif'))) {
		$var_206 = $var_205 . '/images/err-passwordprotected.gif';
	} else {
		$var_206 = var_1 . '/' . var_12 . '/images/err-passwordprotected.png';
	}
	return '<img src="' . $var_206 . '" ' . $var_204 . ' alt="protected" />';
}


function fn_75($var_208, $var_130 = NULL, $var_131 = NULL , $var_129 = null) {
	global $var_3, $var_205;
	if (!$var_3->getShow()) {
		$var_130 .= " not_visible";
	}
	$var_152 = $var_3->getPassword();
	if (!empty($var_152)) {
		$var_130 .= " password_protected";
	}

	$var_130 = trim($var_130);
	if ($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if ($var_131) {
		$var_131 = ' id="' . $var_131 . '"';
	}
	if ($var_129) {
		$var_129 = ' title="' . $var_129 . '"';
	}
	$var_209 = $var_3->getAlbumThumbImage();
	$var_211 = fn_133($var_209);
	$var_212 = ' width="' . $var_211[0] . '" height="' . $var_211[1] . '"';
	if (!getOption('use_lock_image') || $var_3->isMyItem(var_213) || empty($var_152)) {
		$var_214 = '<img src="' . html_encode(pathurlencode($var_209->getThumb('album'))) . '"' . $var_212 . ' alt="' . html_encode($var_208) . '"' . $var_130 . $var_131 . $var_129 . ' />';
		$var_214 = zp_apply_filter('standard_album_thumb_html', $var_214);
		
	} else {
		
	}
}


function fn_76($var_212, $var_215 = NULL, $var_216 = NULL, $var_217 = NULL, $var_218 = NULL, $var_219 = NULL, $var_220 = null, $var_221 = NULL) {
	global $var_3;
	$var_222 = $var_3->getAlbumThumbImage();
	return $var_222->getCustomImage($var_212, $var_215, $var_216, $var_217, $var_218, $var_219, $var_220, true, $var_221);
}


function fn_77($var_208, $var_212, $var_215 = NULL, $var_216 = NULL, $var_217 = NULL, $var_218 = NULL, $var_219 = NULL, $var_220 = null, $var_130 = NULL, $var_131 = NULL, $var_129 = null) {
	global $var_3;
	if (!$var_3->getShow()) {
		$var_130 .= " not_visible";
	}
	$var_152 = $var_3->getPassword();
	if (!empty($var_152)) {
		$var_130 .= " password_protected";
	}
	$var_130 = trim($var_130);
	
	$var_211 = fn_121($var_212, $var_215, $var_216, $var_217, $var_218, $var_219, $var_220);
	$var_224 = ' width="' . $var_211[0] . '" height="' . $var_211[1] . '"';
	if($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if($var_131) {
		$var_131 = ' id="' . $var_131 . '"';
	}
	if($var_129) {
		$var_129 = ' title="' . html_encode($var_129) . '"';
	}
	if (!getOption('use_lock_image') || $var_3->isMyItem(var_213) || empty($var_152)) {
		$var_214 = '<img src="' . html_encode(pathurlencode(fn_76($var_212, $var_215, $var_216, $var_217, $var_218, $var_219, $var_220))) . '"' . $var_224 . ' alt="' . html_encode($var_208) . '"' 
						. $var_131 . $var_130 . $var_129 . ' />';
		$var_214 = zp_apply_filter('custom_album_thumb_html', $var_214);
		
	} else {
		
	}
}


function fn_78(&$var_215, &$var_216, $var_206, $var_222 = false) {
	global $var_7;
	$var_225 = getOption('image_allow_upscale');
	$var_38 = $var_206->var_39;
	if (!isImagePhoto($var_206) & $var_222) {
		$var_226 = $var_206->getThumbImageFile();
		$var_206 = zp_imageGet($var_226);
		$var_228 = zp_imageWidth($var_206);
		$var_229 = zp_imageHeight($var_206);
	} else {
		$var_228 = $var_206->get('width');
		if ($var_228 == 0)
			$var_228 = max($var_215, $var_216);
		$var_229 = $var_206->get('height');
		if ($var_229 == 0)
			$var_229 = max($var_215, $var_216);
	}

	$var_230 = round($var_216 / $var_229 * $var_228);
	$var_231 = round($var_215 / $var_228 * $var_229);
	if (var_232)
		debugLog("getMaxSpaceContainer($var_215, $var_216, $var_38, $var_222): \$s_width=$var_228; \$s_height=$var_229; \$newW=$var_230; \$newH=$var_231; \$upscale=$var_225;");
	if ($var_230 > $var_215) {
		if ($var_225 || $var_229 > $var_231) {
			$var_216 = $var_231;
		} else {
			$var_216 = $var_229;
			$var_215 = $var_228;
		}
	} else {
		if ($var_225 || $var_228 > $var_230) {
			$var_215 = $var_230;
		} else {
			$var_216 = $var_229;
			$var_215 = $var_228;
		}
	}
}


function fn_79($var_215, $var_216) {
	global $var_3;
	$var_233 = $var_3->getAlbumThumbImage();
	fn_78($var_215, $var_216, $var_233, true);
	return fn_76(NULL, $var_215, $var_216, NULL, NULL, NULL, NULL);
}


function fn_80($var_208, $var_215, $var_216, $var_130 = NULL, $var_131 = NULL, $var_129 = null) {
	global $var_3;
	$var_233 = $var_3->getAlbumThumbImage();
	fn_78($var_215, $var_216, $var_233, true);
	fn_77($var_208, NULL, $var_215, $var_216, NULL, NULL, NULL, NULL, $var_130, $var_131, $var_129);
}


function fn_81() {
	global $var_3, $var_5, $var_7;
	if (in_context(var_87) || in_context(var_160)) {
		$var_235 = $var_5->fn_81($var_3->var_31);
	} else if (in_context(var_74)) {
		$var_235 = $var_3->fn_81();
	} else {
		return null;
	}
	return $var_235;
}


function fn_82() {
	$var_235 = fn_81();
	if ($var_235) {
		return $var_235->getLink();
	}
	return false;
}


function fn_83() {
	global $var_3, $var_5;
	if (in_context(var_87) || in_context(var_160)) {
		$var_237 = $var_5->fn_83($var_3->var_31);
	} else if (in_context(var_74)) {
		$var_237 = $var_3->fn_83();
	} else {
		return null;
	}
	return $var_237;
}


function fn_84() {
	$var_237 = fn_83();
	if ($var_237) {
		return $var_237->getLink();
	}
	return false;
}


function fn_85() {
	if (fn_6()) {
		global $var_57, $var_105;
		$var_238 = fn_31(2); 
		if (!$var_105)
			$var_238++; 
		return $var_57 >= $var_238;
	}
	return false;
}


function fn_86() {
	global $var_57;
	$var_108 = Ceil(fn_5() / max(1, getOption('albums_per_page')));
	return ($var_57 <= $var_108);
}


function fn_6() {
	global $var_3, $var_5;
	if ((in_context(var_160) && !in_context(var_161)) || in_context(var_87) && is_null($var_3)) {
		return $var_5->fn_6();
	} else {
		return $var_3->fn_6();
	}
}


function fn_87($var_75) {
	global $var_7;
	$var_239 = $var_75->fn_6();
	$var_94 = $var_75->getAlbums(0);
	while (count($var_94) > 0) {
		$var_30 = array_pop($var_94);
		$var_75 = newAlbum($var_30);
		$var_239 = $var_239 + fn_87($var_75);
	}
	return $var_239;
}


function fn_88($var_88 = false, $var_240 = NULL, $var_89 = NULL) {
	global $var_241, $var_4, $var_3, $var_57, $var_242, $var_5, $var_7, $var_105;
	if (is_null($var_240)) {
		$var_240 = $var_105;
	}
	$var_243 = fn_31(2); 
	if ($var_88) {
		$var_244 = 1;
		$var_240 = 0;
	} else {
		$var_105 = $var_240; 
		$var_244 = $var_57 - $var_243;
	}
	if ($var_240 > 0 && $var_243 > 0) {
		$var_244 = $var_244 + 1; 
	}
	if ($var_244 <= 0) {
		return false; 
	}
	if (is_null($var_241)) {
		if (in_context(var_87)) {
			$var_241 = $var_5->getImages($var_88 ? 0 : ($var_244), $var_240, NULL, NULL, true, $var_89);
		} else {
			$var_241 = $var_3->getImages($var_88 ? 0 : ($var_244), $var_240, NULL, NULL, true, $var_89);
		}
		if (empty($var_241)) {
			return NULL;
		}
		$var_242 = $var_4;
		$var_245 = array_shift($var_241);
		$var_4 = newImage($var_3, $var_245, true, true);
		save_context();
		add_context(var_166);
		return true;
	} else if (empty($var_241)) {
		$var_241 = NULL;
		$var_4 = $var_242;
		restore_context();
		return false;
	} else {
		$var_245 = array_shift($var_241);
		$var_4 = newImage($var_3, $var_245, true, true);
		return true;
	}
}





function fn_89($var_206) {
	if (!is_object($var_206))
		return;
	global $var_3, $var_4;
	$var_4 = $var_206;
	$var_3 = $var_4->getAlbum();
	set_context(var_111 | var_74 | var_166);
}


function fn_90() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return $var_4->getTitle();
}


function fn_91() {
	return getBare(fn_90());
}


function fn_92() {
	global $var_4;
	$var_129 = fn_91();
	if (!$var_4->getShow()) {
		$var_129 .= "\n" . gettext('The image is marked un-published.');
	}
	return $var_129;
}

function fn_93() {
	
}


function fn_94() {
	
}

function fn_95() {
	
}


function fn_96() {
	global $var_4, $var_5, $var_3;
	$var_31 = $var_4->getFileName();
	if (in_context(var_87) || (in_context(var_160) && !in_context(var_161))) {
		$var_100 = $var_4->var_247;
		$var_248 = $var_5->getImages();
		$var_158 = 0;
		foreach ($var_248 as $var_206) {
			$var_158++;
			if ($var_31 == $var_206['filename'] && $var_100 == $var_206['folder']) {
				return $var_158;
			}
		}
	} else {
		return $var_4->getIndex() + 1;
	}
	return false;
}


function fn_97($var_171 = null) {
	if (!in_context(var_166))
		return false;
	global $var_4;
	$var_151 = $var_4->getDateTime();
	if (empty($var_151) || ($var_151 == '0000-00-00 00:00:00')) {
		return false;
	}
	if (is_null($var_171)) {
		return $var_151;
	}
	return zpFormattedDate($var_171, strtotime($var_151));
}


function fn_98($var_85 = '', $var_171 = null) {
	global $var_4;
	if (is_null($var_171)) {
		$var_171 = var_188;
	}
	$var_189 = fn_97($var_171);
	if ($var_189) {
		if ($var_85) {
			$var_189 = '<span class="beforetext">' . $var_85 . '</span>' . $var_189;
		}
	}
	
}



function fn_99() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return $var_4->getLocation();
}


function fn_100() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return $var_4->getcity();
}


function fn_101() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return $var_4->getState();
}


function fn_102() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return $var_4->getCountry();
}


function fn_103() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return $var_4->getDesc();
}


function fn_104() {
	return getBare(fn_103());
}


function fn_105() {
	
}

function fn_106() {
	
}


function fn_107($var_192) {
	if (!in_context(var_166))
		return false;
	global $var_4;
	return get_language_string($var_4->get($var_192));
}


function fn_108() {
	Global $var_4;
	return $var_4->getCustomData();
}


function fn_109() {
	$var_86 = fn_108();
	$var_86 = str_replace("\r\n", "\n", $var_86);
	$var_86 = str_replace("\n", "<br />", $var_86);
	
}


function fn_110($var_192, $var_195 = '') {
  global $var_4;
  $var_82 = fn_107($var_192);
  if (!empty($var_82)) {
    
  }
}


function fn_111() {
  global $var_4;
  if (is_null($var_4))
    return false;
  return $var_4->getNextImage();
}


function fn_112() {
  global $var_4;
  if (is_null($var_4))
    return false;
  return $var_4->getPrevImage();
}


function fn_113() {
	if (!in_context(var_166))
		return false;
	global $var_3, $var_4;
	if (is_null($var_4))
		return false;
	$var_254 = $var_4->getNextImage();
	return $var_254->getLink();
}


function fn_114() {
	if (!in_context(var_166))
		return false;
	global $var_3, $var_4;
	if (is_null($var_4))
		return false;
	$var_255 = $var_4->getPrevImage();
	return $var_255->getLink();
}


function fn_115() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	if (is_null($var_4))
		return false;
	$var_245 = $var_4->getPrevImage();
	return $var_245->getThumb();
}


function fn_116() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	if (is_null($var_4))
		return false;
	$var_245 = $var_4->getNextImage();
	return $var_245->getThumb();
}


function fn_117() {
	if (!in_context(var_166))
		return false;
	global $var_4;
	if (is_null($var_4))
		return false;
	return $var_4->getLink();
}


function fn_118($var_82, $var_129, $var_130 = NULL, $var_131 = NULL) {
	printLinkHTML(fn_117(), $var_82, $var_129, $var_130, $var_131);
}


function fn_119($var_206 = NULL, $var_256 = true) {
	global $var_4, $var_257;
	if (is_null($var_206))
		$var_206 = $var_4;
	if (is_null($var_206) || !$var_206->get('hasMetadata')) {
		return false;
	}
	$var_86 = $var_206->getMetaData();
	if ($var_256) {
		foreach ($var_86 as $var_192 => $var_259) { 
			if (!$var_259 || !$var_257[$var_192][3]) {
				unset($var_86[$var_192]);
			}
		}
	}
	if (count($var_86) > 0) {
		return $var_86;
	}
	return false;
}


function fn_120($var_129 = NULL, $var_260 = true, $var_131 = 'imagemetadata', $var_130 = null, $var_261 = NULL) {
	global $var_257, $var_4;
	if (false === ($var_262 = fn_119($var_4, true))) {
		return;
	}
	if (is_null($var_129)) {
		$var_129 = gettext('Image Info');
	}
	if ($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if (!$var_261) {
		$var_261 = 'exif_link';
	}
	$var_263 = $var_131 . '_data';
	if ($var_131) {
		$var_131 = ' id="' . $var_131 . '"';
	}
	$var_264 = $var_265 = $var_266 = '';
	if ($var_260 == 'colorbox' && zp_has_filter('theme_head', 'colorbox::css')) {
		$var_264 = '<a href="
		$refa = '</var_267>';
		$style = ' var_266="display:none"';
	} else if ($var_260) {
		$var_264 = '<a class="metadata_toggle" href="
		$refa = '</var_267>';
		$style = ' var_266="display:none"';
	}
	?>
	<span id="<?php  ?>" class="metadata_title">
		<?php  ?><?php  ?><?php  ?>
	</span>
	<?php if($var_260) { ?>
		<script>
			$(".metadata_toggle").click(function(event) {
				event.preventDefault();
				$("
			});
		</script>
	<?php } ?>
	<div id="<?php  ?>"<?php  ?>>
		<div<?php  ?>>
			<table>
				<?php
				foreach ($var_262 as $var_192 => $var_259) {
					$var_195 = $var_257[$var_192][2];
					
					switch ($var_257[$var_192][6]) {
						case 'time':
							
							break;
						default:
							
							break;
					}
					
				}
				?>
			</table>
		</div>
	</div>
	<?php
}


function fn_121($var_212, $var_215 = NULL, $var_216 = NULL, $var_268 = NULL, $var_269 = NULL, $var_270 = NULL, $var_271 = NULL, $var_206 = NULL) {
  global $var_4;
  if (is_null($var_206))
    $var_206 = $var_4;
  if (is_null($var_206))
    return false;

  $var_272 = $var_206->getHeight();
  $var_274 = $var_206->getWidth();

  
  if (!is_null($var_212) && !is_null($var_215) && !is_null($var_216)) {
    return array($var_215, $var_216);
  }
	if (isImageVideo($var_206)) { 
    return array($var_274, $var_272);
  }
  $var_276 = getOption('image_use_side');
  $var_277 = getOption('image_allow_upscale');
  $var_278 = getImageParameters(array($var_212, $var_215, $var_216, $var_268, $var_269, $var_270, $var_271, NULL, NULL, NULL, NULL, NULL, NULL, NULL), $var_206->var_75->var_31);
  @list($var_212, $var_215, $var_216, $var_268, $var_269, $var_270, $var_271, $var_279, $var_222, $var_280, $var_281, $var_282, $var_283, $var_221) = $var_278;
  if (!empty($var_212)) {
    $var_284 = $var_212;
    $var_215 = $var_216 = false;
  } else if (!empty($var_215)) {
    $var_284 = $var_215;
    $var_212 = $var_216 = false;
  } else if (!empty($var_216)) {
    $var_284 = $var_216;
    $var_212 = $var_215 = false;
  } else {
    $var_284 = 1;
  }

  if ($var_274 == 0) {
    $var_285 = 1;
  } else {
    $var_285 = round(($var_272 / $var_274) * $var_284);
  }
  if ($var_272 == 0) {
    $var_286 = 1;
  } else {
    $var_286 = round(($var_274 / $var_272) * $var_284);
  }

  if (($var_212 && ($var_276 == 'longest' && $var_272 > $var_274) || ($var_276 == 'height') || ($var_276 == 'shortest' && $var_272 < $var_274)) || $var_216) {

    $var_287 = $var_284;
    $var_288 = $var_286;
  } else {

    $var_288 = $var_284;
    $var_287 = $var_285;
  }
  if (!$var_277 && $var_287 >= $var_272 && $var_288 >= $var_274) {
    return array($var_274, $var_272);
  } else {
    if ($var_268 && $var_268 < $var_288)
      $var_288 = $var_268;
    if ($var_269 && $var_269 < $var_287)
      $var_287 = $var_269;
    if ($var_212 && $var_269 && $var_268) {
      $var_288 = $var_268;
      $var_287 = $var_269;
    }
    return array($var_288, $var_287);
  }
}


function fn_122($var_212 = NULL, $var_206 = NULL) {
  if (is_null($var_212))
    $var_212 = getOption('image_size');
  return fn_121($var_212, NULL, NULL, NULL, NULL, NULL, NULL, $var_206);
}


function fn_123($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206))
		$var_206 = $var_4;
	if (is_null($var_206))
		return false;
	return array($var_206->getWidth(), $var_206->getHeight());
}


function fn_124($var_212 = NULL, $var_206 = NULL) {
	$var_289 = fn_122($var_212, $var_206);
	return $var_289[0];
}


function fn_125($var_212 = NULL, $var_206 = NULL) {
	$var_289 = fn_122($var_212, $var_206);
	return $var_289[1];
}


function fn_126($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206))
		$var_206 = $var_4;
	if (is_null($var_206))
		return false;
	return $var_206->getWidth();
}


function fn_127($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206))
		$var_206 = $var_4;
	if (is_null($var_206))
		return false;
	return $var_206->getHeight();
}


function fn_128($var_206 = NULL) {
	if (fn_126($var_206) >= fn_127($var_206))
		return true;
	return false;
}


function fn_129($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206))
		$var_206 = $var_4;
	if (is_null($var_206))
		return false;
	return $var_206->getSizedImage(getOption('image_size'));
}


function fn_130($var_208, $var_130 = NULL, $var_131 = NULL, $var_129 = null) {
	global $var_4;
	if (is_null($var_4))
		return;
	if (!$var_4->getShow()) {
		$var_130 .= " not_visible";
	}
	$var_75 = $var_4->getAlbum();
	$var_152 = $var_75->getPassword();
	if (!empty($var_152)) {
		$var_130 .= " password_protected";
	}
	if ($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if ($var_131) {
		$var_131 = ' id="' . $var_131 . '"';
	}
	if ($var_129) {
		$var_129 = ' title="' . html_encode($var_129) . '"';
	} 
	if (isImagePhoto()) { 
		$var_214 = '<img src="' . html_encode(pathurlencode(fn_129())) . '" alt="' . html_encode($var_208) . '"' .
						' width="' . fn_124() . '" height="' . fn_125() . '"' . $var_130 . $var_131 . $var_129 . ' />';
		$var_214 = zp_apply_filter('standard_image_html', $var_214);
		
	} else { 
		
	}
}


function fn_131() {
	global $var_4;
	if (is_null($var_4))
		return false;
	return $var_4->getThumb();
}


function fn_132($var_208, $var_130 = NULL, $var_131 = NULL, $var_129 = null) {
	global $var_4;
	if (is_null($var_4))
		return;
	if (!$var_4->getShow()) {
		$var_130 .= " not_visible";
	}
	$var_75 = $var_4->getAlbum();
	$var_152 = $var_75->getPassword();
	if (!empty($var_152)) {
		$var_130 .= " password_protected";
	}
	$var_180 = fn_131();
	$var_211 = fn_133();
	$var_212 = ' width="' . $var_211[0] . '" height="' . $var_211[1] . '"';
	$var_130 = trim($var_130);
	if ($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if ($var_131) {
		$var_131 = ' id="' . $var_131 . '"';
	}
	if($var_129) {
		$var_129 = ' title="' . html_encode($var_129) . '"';
	}
	$var_214 = '<img src="' . html_encode(pathurlencode($var_180)) . '"' . $var_212 . ' alt="' . html_encode($var_208) . '"' . $var_130 . $var_131 . $var_129 . " />";
	$var_214 = zp_apply_filter('standard_image_thumb_html', $var_214);
	
}


function fn_133($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206)) {
		$var_206 = $var_4;
	}
	$var_291 = getOption('thumb_size');
	if (getOption('thumb_crop')) {
		$var_274 = getOption('thumb_crop_width');
		$var_272 = getOption('thumb_crop_height');
		$var_211 = fn_121($var_291, $var_274, $var_272, $var_274, $var_272, null, null, $var_206);
	} else {
		$var_274 = $var_272 = $var_291;
		fn_78($var_274, $var_272, $var_206, true);
		$var_211 = array($var_274, $var_272);
	}
	return $var_211;
}


function fn_134($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206)) {
		$var_206 = $var_4;
	}
	if (is_null($var_206)) {
		return false;
	}
	$var_293 = getOption('protect_full_image');
	if ($var_293 == 'No access') {
		return NULL;
	}
	if ($var_293 == 'Unprotected') {
		return $var_206->fn_134();
	} else {
		return fn_136($var_206, $var_293);
	}
}


function fn_135($var_206 = NULL) {
	global $var_4;
	if (is_null($var_206)) {
		$var_206 = $var_4;
	}
	if (!is_null($var_206)) {
		return $var_206->fn_134();
	}
}


function fn_136($var_206 = NULL, $var_294 = NULL) {
	global $var_4;
	if (is_null($var_294)) {
		$var_294 = getOption('protect_full_image');
	}
	if ($var_294 == 'No access')
		return NULL;
	if (is_null($var_206)) {
		if (!in_context(var_166))
			return false;
		if (is_null($var_4))
			return false;
		$var_206 = $var_4;
	}
	$var_75 = $var_206->getAlbum();
	$var_295 = getWatermarkParam($var_206, var_296);
	if (!empty($var_295)) {
		$var_297 = $var_295;
	} else {
		$var_297 = false;
	}
	$var_278 = array('FULL', NULL, NULL, NULL, NULL, NULL, NULL, (int) getOption('full_image_quality'), NULL, NULL, NULL, $var_297, false, NULL, NULL);
	$var_298 = getImageCacheFilename($var_75->var_31, $var_206->var_39, $var_278);
	$var_299 = var_300 . $var_298;
	if ($var_294 != 'Download' && var_301 && file_exists($var_299)) {
		return var_1 . '/' . var_302 . pathurlencode(imgSrcURI($var_298));
	} else if ($var_294 == 'Unprotected') {
		return getImageURI($var_278, $var_75->var_31, $var_206->var_39, $var_206->var_303);
	} else {
		$var_304 = '&q=' . getOption('full_image_quality');
		if (!empty($var_295)) {
			$var_304 .= '&wmk=' . $var_295;
		}
		if ($var_294) {
			$var_304 .= '&dsp=' . $var_294;
		}
		$var_304 .= '&check=' . sha1(var_305 . serialize($var_278));
		if (is_array($var_206->var_39)) {
			$var_75 = dirname($var_206->var_39['source']);
			$var_206 = basename($var_206->var_39['source']);
		} else {
			$var_75 = $var_75->var_31;
			$var_206 = $var_206->var_39;
		}
		return var_1 . '/' . var_12 . '/full-image.php?a=' . $var_75 . '&i=' . $var_206 . $var_304;
	}
}


function fn_137($var_212) {
	return fn_138($var_212);
}


function fn_138($var_212, $var_215 = NULL, $var_216 = NULL, $var_217 = NULL, $var_218 = NULL, $var_219 = NULL, $var_220 = NULL, $var_306 = false, $var_221 = NULL) {
	global $var_4;
	if (is_null($var_4))
		return false;
	return $var_4->getCustomImage($var_212, $var_215, $var_216, $var_217, $var_218, $var_219, $var_220, $var_306, $var_221);
}


function fn_139($var_208, $var_212, $var_215 = NULL, $var_216 = NULL, $var_217 = NULL, $var_218 = NULL, $var_219 = NULL, $var_220 = NULL, $var_130 = NULL, $var_131 = NULL, $var_306 = false, $var_221 = NULL, $var_129 = null) {
	global $var_4;
	if (is_null($var_4))
		return;
	if (!$var_4->getShow()) {
		$var_130 .= " not_visible";
	}
	$var_75 = $var_4->getAlbum();
	$var_152 = $var_75->getPassword();
	if (!empty($var_152)) {
		$var_130 .= " password_protected";
	}
	if ($var_212) {
		$var_307 = fn_121($var_212);
		$var_224 = ' width="' . $var_307[0] . '" height="' . $var_307[1] . '"';
	} else {
		$var_224 = '';
		if ($var_215)
			$var_224 .= ' width="' . $var_215 . '"';
		if ($var_216)
			$var_224 .= ' height="' . $var_216 . '"';
	}
	if ($var_131) {
		$var_131 = ' id="' . $var_131 . '"';
	}
	if ($var_130) {
		$var_130 = ' class="' . $var_130 . '"';
	}
	if($var_129) {
		$var_129 = ' title="' . html_encode($var_129) . '"';
	}
	if (isImagePhoto() || $var_306) {
		$var_214 = '<img src="' . html_encode(pathurlencode(fn_138($var_212, $var_215, $var_216, $var_217, $var_218, $var_219, $var_220, $var_306, $var_221))) . '"' .
						' alt="' . html_encode($var_208) . '"' .
						$var_131 . $var_130 . $var_224 . $var_129 . ' />';
		$var_214 = zp_apply_filter('custom_image_html', $var_214, $var_306);
		
	} else { 
		
	}
}


function fn_140($var_215, $var_216) {
	global $var_4;
	if (is_null($var_4))
		return false;
	fn_78($var_215, $var_216, $var_4);
	return fn_138(NULL, $var_215, $var_216);
}


function fn_141($var_215, $var_216) {
	global $var_4;
	if (is_null($var_4))
		return false;
	fn_78($var_215, $var_216, $var_4, true);
	return fn_138(NULL, $var_215, $var_216, NULL, NULL, NULL, NULL, true);
}


function fn_142($var_208, $var_215, $var_216, $var_130 = NULL, $var_131 = NULL, $var_129 = null) {
	global $var_4;
	if (is_null($var_4))
		return;
	fn_78($var_215, $var_216, $var_4, true);
	fn_139($var_208, NULL, $var_215, $var_216, NULL, NULL, NULL, NULL, $var_130, $var_131, true, null, $var_129);
}


function fn_143($var_208, $var_215, $var_216, $var_130 = NULL, $var_131 = NULL, $var_222 = false, $var_129 = null) {
	global $var_4;
	if (is_null($var_4))
		return;
	fn_78($var_215, $var_216, $var_4, $var_222);
	fn_139($var_208, NULL, $var_215, $var_216, NULL, NULL, NULL, NULL, $var_130, $var_131, $var_222, null, $var_129);
}


function fn_144($var_212, $var_82, $var_129, $var_130 = NULL, $var_131 = NULL) {
	printLinkHTML(fn_137($var_212), $var_82, $var_129, $var_130, $var_131);
}


function fn_145($var_137, $var_308) {
	if ($var_137) {
		while ($var_309 = db_fetch_assoc($var_137)) {
			$var_206 = newImage(null, $var_309);
   $var_75 = $var_206->var_75;
   if ($var_75->var_31 == $var_308 || $var_75->checkAccess()) {
				if (isImagePhoto($var_206)) {
					if ($var_206->checkAccess()) {
						return $var_206;
					}
				}
			}
		}
		db_free_result($var_137);
	}
	return NULL;
}


function fn_146($var_310 = false) {
	global $var_7;
	if ($var_310) {
		$var_311 = getSerializedArray(getOption('picture_of_the_day'));
		if (date('Y-m-d', $var_311['day']) == date('Y-m-d')) {
			$var_75 = newAlbum($var_311['folder'], true, true);
			if ($var_75->var_312) {
				$var_206 = newImage($var_75, $var_311['filename'], true);
				if ($var_206->var_312) {
					return $var_206;
				}
			}
		}
	}
	if (zp_loggedin()) {
		$var_313 = '';
	} else {
		$var_313 = " AND " . prefix('images') . ".show=1";
	}
	$var_137 = query('SELECT `folder`, `filename` ' .
					' FROM ' . prefix('images') .
					' INNER JOIN ' . prefix('albums') . ' ON ' . prefix('images') . '.albumid = ' . prefix('albums') . '.id ' .
					' INNER JOIN (SELECT CEIL(RAND() * (SELECT MAX(id) FROM ' . prefix('images') . ')) AS id) AS r2 ON ' . prefix('images') . '.id >= r2.id ' . 
					' WHERE ' . prefix('albums') . '.folder!="" ' . $var_313 . ' ORDER BY ' . prefix('images') . '.id LIMIT 1');

	$var_206 = fn_145($var_137, NULL);
	if ($var_206) {
		if ($var_310) {
			$var_311 = array('day' => time(), 'folder' => $var_206->getAlbumName(), 'filename' => $var_206->getFileName());
			setThemeOption('picture_of_the_day', serialize($var_311), NULL, $var_7->fn_4());
		}
		return $var_206;
	}
	return NULL;
}


function fn_147($var_315 = NULL, $var_310 = false) {
	global $var_3, $var_7;
	if (empty($var_315) && !in_context(var_74)) {
		return null;
	}
	if (empty($var_315)) {
		$var_75 = $var_3;
	} else {
		if (is_object($var_315)) {
			$var_75 = $var_315;
		} else {
			$var_75 = newAlbum($var_315);
		}
	}
	if ($var_310 && ($var_311 = getOption('picture_of_the_day:' . $var_75->var_31))) {
		$var_311 = getSerializedArray($var_311);
		if (date('Y-m-d', $var_311['day']) == date('Y-m-d')) {
			$var_316 = newAlbum($var_311['folder']);
			$var_206 = newImage($var_316, $var_311['filename']);
			if ($var_206->var_312)
				return $var_206;
		}
	}
	$var_206 = NULL;
	if ($var_75->isDynamic()) {
		$var_248 = $var_75->getImages(0);
		shuffle($var_248);
		while (count($var_248) > 0) {
			$var_137 = array_pop($var_248);
			if (Gallery::validImage($var_137['filename'])) {
				$var_206 = newImage(newAlbum($var_137['folder']), $var_137['filename']);
			}
		}
	} else {
		$var_159 = $var_75->getFileName();
		if ($var_75->isMyItem(var_213)) {
			$var_313 = '';
			$var_317 = '';
		} else {
			$var_313 = " AND " . prefix('images') . ".show=1";
			$var_317 = prefix('albums') . ".show=1";
		}
		$var_318 = "SELECT id FROM " . prefix('albums') . " WHERE ";
		if ($var_317) {
			$var_318 .= $var_317 . ' AND ';
		}
		$var_318 .= "folder LIKE " . db_quote(db_LIKE_escape($var_159) . '%');
		$var_137 = query($var_318);
		if ($var_137) {
			$var_319 = array();
			while ($var_309 = db_fetch_assoc($var_137)) {
				$var_319[] = $var_309['id'];
			}
			if (empty($var_319)) {
				$var_317 = ' AND ' . $var_317;
			} else {
				$var_317 = ' AND ' . prefix('albums') . ".id IN (" . implode(',', $var_319) . ')';
			}
			db_free_result($var_137);
			$var_320 = 'SELECT `folder`, `filename` ' .
							' FROM ' . prefix('images') . ', ' . prefix('albums') .
							' WHERE ' . prefix('albums') . '.folder!="" AND ' . prefix('images') . '.albumid = ' .
							prefix('albums') . '.id ' . $var_317 . $var_313 . ' ORDER BY RAND()';
			$var_137 = query($var_320);
			$var_206 = fn_145($var_137, $var_75->var_31);
		}
	}
	if ($var_206) {
		if ($var_310) {
			$var_311 = array('day' => time(), 'folder' => $var_206->getAlbumName(), 'filename' => $var_206->getFileName());
			setThemeOption('picture_of_the_day:' . $var_75->var_31, serialize($var_311), NULL, $var_7->fn_4());
		}
	}
	return $var_206;
}


function fn_148($var_321 = 5, $var_130 = null, $var_322 = 'all', $var_315 = '', $var_215 = NULL, $var_216 = NULL, $var_280 = NULL, $var_323 = false) {
	if (is_null($var_280) && is_null($var_215) && is_null($var_216)) {
		$var_280 = 2;
	} else {
		if (is_null($var_215))
			$var_215 = 85;
		if (is_null($var_216))
			$var_216 = 85;
		if (is_null($var_280)) {
			$var_280 = 1;
		} else {
			$var_280 = (int) $var_280 && true;
		}
	}
	if (!empty($var_130))
		$var_130 = ' class="' . $var_130 . '"';
	
	for ($var_144 = 1; $var_144 <= $var_321; $var_144++) {
		switch ($var_322) {
			case "all":
				$var_324 = fn_146();
				break;
			case "album":
				$var_324 = fn_147($var_315);
				break;
		}
		if (is_object($var_324) && $var_324->var_312) {
			
			if ($var_323) {
				$var_325 = $var_324->getFullimageURL();
			} else {
				$var_325 = $var_324->getLink();
			}
			
			switch ($var_280) {
				case 0:
					$var_211 = fn_121($var_215, NULL, NULL, NULL, NULL, NULL, NULL, $var_324);
					$var_214 = '<img src="' . html_encode(pathurlencode($var_324->getCustomImage($var_215, NULL, NULL, NULL, NULL, NULL, NULL, TRUE))) . '" width="' . $var_211[0] . '" height="' . $var_211[1] . '" alt="' . html_encode($var_324->getTitle()) . '" />' . "\n";
					break;
				case 1:
					$var_211 = fn_121(NULL, $var_215, $var_216, $var_215, $var_216, NULL, NULL, $var_324);
					$var_214 = '<img src="' . html_encode(pathurlencode($var_324->getCustomImage(NULL, $var_215, $var_216, $var_215, $var_216, NULL, NULL, TRUE))) . '" width="' . $var_211[0] . '" height="' . $var_211[1] . '" alt="' . html_encode($var_324->getTitle()) . '" />' . "\n";
					break;
				case 2:
					$var_211 = fn_133($var_324);
					$var_214 = '<img src="' . html_encode(pathurlencode($var_324->getThumb())) . '" width="' . $var_211[0] . '" height="' . $var_211[1] . '" alt="' . html_encode($var_324->getTitle()) . '" />' . "\n";
					break;
			}
			
			
			
		} else {
			break;
		}
	}
	
}


function fn_149() {
	if (in_context(var_166)) {
		global $var_4;
		return $var_4->fn_149();
	} else if (in_context(var_74)) {
		global $var_3;
		return $var_3->fn_149();
	} else if (in_context(var_328)) {
		global $var_55;
		return $var_55->fn_149();
	} else if (in_context(var_329)) {
		global $var_54;
		return $var_54->fn_149();
	}
	return array();
}


function fn_150($var_322 = 'links', $var_330 = NULL, $var_130 = NULL, $var_51 = ', ') {
	global $var_5;
	if (is_null($var_130)) {
		$var_130 = 'taglist';
	}
	$var_331 = fn_149();
	$var_332 = implode(', ', $var_331);
	if ($var_332 === '' or $var_332 === NULL) {
		$var_330 = '';
	}
	if (in_context(var_166)) {
		$var_333 = "image";
	} else if (in_context(var_74)) {
		$var_333 = "album";
	} else if (in_context(var_328)) {
		$var_333 = "pages";
	} else if (in_context(var_329)) {
		$var_333 = "news";
	}
	if (count($var_331) > 0) {
		if (!empty($var_330)) {
			
		}
		
		if (is_object($var_5)) {
			$var_97 = $var_5->getAlbumList();
		} else {
			$var_97 = NULL;
		}
		$var_334 = count($var_331);
		$var_335 = 0;
		foreach ($var_331 as $var_336) {
			if (++$var_335 == $var_334) {
				$var_51 = "";
			}
			if ($var_322 === "links") {
				$var_337 = "<a href=\"" . html_encode(getSearchURL(search_quote($var_336), '', 'tags', 0, array('albums' => $var_97))) . "\" title=\"" . html_encode($var_336) . "\">";
				$var_338 = "</a>";
			} else {
				$var_337 = $var_338 = '';
			}
			
		}
		
	} else {
		
	}
}


function fn_151($var_322, $var_130 = '', $var_339 = NULL, $var_340 = FALSE, $var_341 = TRUE, $var_342 = 2, $var_343 = 50, $var_344 = 1, $var_345 = NULL, $var_346 = 0.8, $var_347 = true, $var_348 = false) {
	global $var_5;
	$var_322 = strtolower($var_322);
	if ($var_130 != "") {
		$var_130 = ' class="' . $var_130 . '"';
	}
	$var_349 = getAllTagsCount($var_347, $var_348);
	if (!is_array($var_349)) {
		return false;
	}
	switch ($var_339) {
		case 'results':
			arsort($var_349);
			if (!is_null($var_345)) {
				$var_349 = array_slice($var_349, 0, $var_345);
			}
			break;
		case 'random':
			if (!is_null($var_345)) {
				$var_349 = array_slice($var_349, 0, $var_345);
			}
			shuffle_assoc($var_349);
			break;
		default:
			break;
	}
	?>
	<ul<?php  ?>>
		<?php
		if (count($var_349) > 0) {
			foreach ($var_349 as $var_174 => $var_350) {
				if (!$var_340) {
					$var_340 = "";
				} else {
					$var_340 = " (" . $var_350 . ") ";
				}
				if ($var_322 == "cloud") { 
					if ($var_350 <= $var_344) {
						$var_212 = $var_346;
					} else {
						$var_212 = min(max(round(($var_342 * ($var_350 - $var_344)) / ($var_343 - $var_344), 2), $var_346), $var_342);
					}
					$var_212 = str_replace(',', '.', $var_212);
					$var_212 = ' style="font-size:' . $var_212 . 'em;"';
				} else {
					$var_212 = '';
				}
				if ($var_350 >= $var_344) {
					if ($var_341) {
						if (is_object($var_5)) {
							$var_97 = $var_5->getAlbumList();
						} else {
							$var_97 = NULL;
						}
						$var_43 = getSearchURL(search_quote($var_174), '', 'tags', 0, array('albums' => $var_97));
						?>
						<li>
							<a href="<?php  ?>"<?php  ?>><?php  ?></a>
						</li>
						<?php
					} else {
						?>
						<li<?php  ?>><?php  ?></li>
						<?php
					}
				}
			} 
		} else {
			?>
			<li><?php  ?></li>
			<?php
		}
		?>
	</ul>
	<?php
}


function fn_152($var_351 = 'asc') {
	$var_352 = array();
	$var_353 = array();
	$var_320 = "SELECT `date` FROM " . prefix('images');
	if (!zp_loggedin()) {
		$var_320 .= " WHERE `show` = 1";
	}
	$var_354 = getNotViewableAlbums();
	if (!is_null($var_354)) {
		if (zp_loggedin()) {
			$var_320 .= ' WHERE ';
		} else {
			$var_320 .= ' AND ';
		}
		foreach ($var_354 as $var_131) {
			$var_320 .= '`albumid`!=' . $var_131 . ' AND ';
		}
		$var_320 = substr($var_320, 0, -5);
	}
	$var_137 = query($var_320);
	if ($var_137) {
		while ($var_309 = db_fetch_assoc($var_137)) {
			$var_352[] = $var_309['date'];
		}
		db_free_result($var_137);
	}
	foreach ($var_352 as $var_355) {
		if (!empty($var_355)) {
			$var_353[] = substr($var_355, 0, 7) . "-01";
		}
	}
	$var_356 = array_count_values($var_353);
	if ($var_351 == 'desc') {
		krsort($var_356);
	} else {
		ksort($var_356);
	}
	return $var_356;
}


function fn_153($var_130 = 'archive', $var_357 = 'year', $var_358 = 'month', $var_351 = 'asc') {
	global $var_5, $var_6;
	if (empty($var_130)) {
		$var_359 = 'archive_active';
	} else {
		$var_359 = $var_130 . '_active';
		$var_130 = 'class="' . $var_130 . '"';
	}
	if ($var_6 == 'search.php') {
		$var_360 = getSearchDate('%Y-%m');
	} else {
		$var_360 = '';
	}
	if (!empty($var_357)) {
		$var_357 = 'class="' . $var_357 . '"';
	}
	if (!empty($var_358)) {
		$var_358 = 'class="' . $var_358 . '"';
	}
	$var_356 = fn_152($var_351);
	$var_361 = "";
	
	$var_362 = 0;
	foreach($var_356 as $var_174 => $var_350) {
		$var_362++;
		if ($var_174 == '0000-00-01') {
			$var_363 = "no date";
			$var_364 = "";
		} else {
			$var_365 = strftime('%Y-%B', strtotime($var_174));
			$var_363 = substr($var_365, 0, 4);
			$var_364 = substr($var_365, 5);
		}

		if ($var_361 != $var_363) {
			$var_361 = $var_363;
			if ($var_362 != 1) {
				
			}
			
		}
		if (is_object($var_5)) {
			$var_97 = $var_5->getAlbumList();
		} else {
			$var_97 = NULL;
		}
		$var_366 = substr($var_174, 0, 7);
		if ($var_360 = $var_366) {
			$var_367 = ' class="' . $var_359 . '"';
		} else {
			$var_367 = '';
		}
		
	}
	
}


function fn_154($var_13, $var_368 = '', $var_77 = null) {
	global $var_10;
	if (array_key_exists($var_13, $var_10['special_pages'])) {
		$var_369 = preg_replace('~^_PAGE_/~', var_78 . '/', $var_10['special_pages'][$var_13]['rewrite']) . '/';
	} else {
		$var_369 = '/' . var_78 . '/' . $var_13 . '/';
	}
	$var_370 = "index.php?p=$var_13";
	if (!empty($var_368)) {
		$var_369 .= "?$var_368";
		$var_370 .= "&$var_368";
	}
	return zp_apply_filter('getLink', rewrite_path($var_369, $var_370, $var_77), $var_13 . '.php', null);
}


function fn_155($var_371, $var_13, $var_368 = '', $var_147 = '', $var_148 = '', $var_130 = NULL) {
	if (!is_null($var_130)) {
		$var_130 = 'class="' . $var_130 . '"';
	}
	
}





function fn_156() {
	return isset($_REQUEST['date']);
}


function var_372($var_41, $var_373, $var_374, $var_13, $var_375 = NULL) {
	$var_376 = '';
	$var_369 = false;
	if (var_80) {
		$var_369 = true;
		if (is_array($var_375)) {
			foreach ($var_375 as $var_68) {
				if ($var_68) {
					$var_369 = false;
					break;
				}
			}
		}
	}

	if ($var_369) {
		if (empty($var_373)) {
			$var_180 = var_377 . '/' . var_378 . '/';
		} else {
			$var_180 = var_377 . '/' . var_379 . '/';
		}
	} else {
		$var_180 = var_377 . "/index.php?p=search";
	}
	if (!empty($var_374) && empty($var_373)) {
		if (!is_array($var_374)) {
			$var_374 = explode(',', $var_374);
		}
		$var_380 = $var_374;
		if ($var_369 && count($var_374) == 1 && array_shift($var_380) == 'tags') {
			$var_180 = var_377 . '/' . var_381 . '/';
		} else {
			$var_169 = new class_1();
			$var_376 = $var_169->getSearchFieldsText($var_374, 'searchfields=');
		}
	}

	if (!empty($var_41)) {
		if (is_array($var_41)) {
			foreach ($var_41 as $var_174 => $var_383) {
				$var_41[$var_174] = search_quote($var_383);
			}
			$var_41 = implode(',', $var_41);
		}
		$var_41 = var_384($var_41, array('%' => '__25__', '&' => '__26__', '
		if ($rewrite) {
			$url .= urlencode($words) . '/';
		} else {
			$url .= "&words=" . urlencode($words);
		}
	}
	if (!empty($dates)) {
		if (is_array($dates)) {
			$dates = implode(',', $dates);
		}
		if ($rewrite) {
			$url .= $dates . '/';
		} else {
			$url .= "&date=$dates";
		}
	}
	if ($page > 1) {
		if ($rewrite) {
			$url .= "$page/";
		} else {
			if ($urls) {
				$urls .= '&';
			}
			$urls .= "page=$page";
		}
	}
	if (!empty($urls)) {
		if ($rewrite) {
			$url .= '?' . $urls;
		} else {
			$url .= '&' . $urls;
		}
	}
	if (is_array($object_list)) {
		foreach ($object_list as $key => $list) {
			if (!empty($list)) {
				$url .= '&var_385' . $var_174 . '=' . html_encode(implode(',', $var_93));
			}
		}
	}
	return $var_180;
}


function printSearchForm($var_132 = NULL, $var_131 = 'search', $var_386 = NULL, $var_387 = '', $var_388 = NULL, $var_389 = NULL, $var_375 = NULL, $var_390 = NULL) {
	var_467 $var_391, $var_5;
	$var_392 = new class_1();
	if (!is_null($var_5) && !$var_5->getSearchWords()) {
		$var_392->clearSearchWords();
	}
	if (!is_null($var_375)) {
		if (array_key_exists(0, $var_375)) { 
			trigger_error(gettext('printSearchForm $album_list parameter is deprecated. Pass array("albums"=>array(album, album, ...)) instead.'), var_393);
			$var_375 = array('albums' => $var_375);
		}
	}
	if (empty($var_387)) {
		$var_387 = gettext("Search");
	}
	$var_11 = var_1 . "/" . var_12;
	$var_117 = $var_392->codifySearchString();
	if (substr($var_117, -1, 1) == ',') {
		$var_117 = substr($var_117, 0, -1);
	}
	if (empty($var_117)) {
		$var_390 = false;
		$var_394 = '%s';
	} var_150 {
		$var_394 = gettext('%s within previous results');
	}
	if (preg_match('!\/(.*)[\.png|\.jpg|\.jpeg|\.gif]$!', $var_386)) {
		$var_386 = 'src="' . $var_386 . '" alt="' . $var_387 . '"';
		$var_395 = 'title="' . sprintf($var_394, $var_387) . '"';
		$var_396 = 'image';
	} var_150 {
		$var_396 = 'submit';
		if ($var_386) {
			$var_395 = 'value="' . $var_387 . '" title="' . sprintf($var_394, $var_386) . '"';
			$var_386 = '';
		} var_150 {
			$var_395 = 'value="' . $var_387 . '" title="' . sprintf($var_394, $var_387) . '"';
		}
	}
	var_397 (empty($var_388)) {
		$var_388 = var_1 . '/' . var_12 . '/images/searchfields_icon.png';
	}
	var_397 (is_null($var_390)) {
		$var_390 = getOption('search_within');
	}
	var_397 (var_80) {
		$var_398 = var_377 . '/' . var_378 . '/';
	} var_150 {
		$var_398 = var_1 . "/index.php?p=search";
	}
	var_397 (!$var_390) {
		$var_392->clearSearchWords();
	}

	$var_374 = $var_392->allowedSearchFields();
	if (!$var_391) {
		$var_391 = true;
		?>
		<var_400 var_396="var_82/var_401" var_402="<?php  ?>/var_403/var_404.var_403"></var_400>
		<?php
	}
	?>
	<div id="<?php  ?>">
		<!-- search form -->
		<form method="post" action="<?php  ?>" id="search_form">
			<script type="text/javascript">
			
			var within = <?php  ?>;
			function search_(way) {
				within = way;
				if (way) {
					$('
				} else {
					lastsearch = '';
					$('
				}
				$('
			}
			$('
				if (within) {
					var newsearch = $.trim($('
					if (newsearch.substring(newsearch.length - 1) == ',') {
						newsearch = newsearch.substr(0, newsearch.length - 1);
					}
					if (newsearch.length > 0) {
						$('
					} else {
						$('
					}
				}
				return true;
			});
    $(document).ready(function() {
      $( $("
        $("
      });
    });
			
			</script>
			<?php  ?>
			<div>
				<span class="tagSuggestContainer">
					<input type="text" name="words" value="" id="search_input" size="10" />
				</span>
				<?php if (count($var_374) > 1 || $var_117) { ?>
					<a class="toggle_searchextrashow" href="
					<script>
						$(".toggle_searchextrashow").click(function(event) {
							event.preventDefault();
							$("
						});
					</script>
				<?phpvar_405 } ?>
				<input type="<?php  ?>" <?php  ?> class="button buttons" id="search_submit" <?php  ?> data-role="none" />
				<?php
				var_397 (is_array($var_375)) {
					foreach ($var_375 as $var_174 => $var_93) {
						?>
						<input type="hidden" name="in<?php 
						var_150
							
						?>" />
									 <?php
								 }
							 }
							 ?>
				<br />
				<?php
				var_397 (count($var_374) > 1 || $var_117) {
					$var_374 = array_flip($var_374);
					natcasesort($var_374);
					$var_374 = array_flip($var_374);
					if (is_null($var_389)) {
						$var_389 = $var_392->parseQueryFields();
					} var_150 {
						if (!is_array($var_389)) {
							$var_389 = $var_392->numericFields($var_389);
						}
					}
					if (count($var_389) == 0) {
						$var_389 = $var_392->allowedSearchFields();
					}
					?>
					<div style="display:none;" id="searchextrashow">
						<?php
						if ($var_117) {
							?>
							<label>
								<input type="radio" name="search_within" id="search_within-1" value="1"<?php if ($var_390)  ?> onclick="search_(1);" />
								<?php  ?>
							</label>
							<label>
								<input type="radio" name="search_within" id="search_within-0" value="1"<?php var_397 (!$var_390)  ?> onclick="search_(0);" />
								<?php  ?>
							</label>
							<?php
						}
						var_397 (count($var_374) > 1) {
							?>
							<ul>
        <li><label><input type="checkbox" name="checkall_searchfields" id="checkall_searchfields" checked="checked">* <?php  ?> *</label></li>
								<?php
								foreach ($var_374 as $var_408 => $var_174) {
									
									if (in_array($var_174, $var_389)) {var_405
										
									}
									
								}
								?>
							</ul>
							<?php
						}
						?>
					</div>
					<?php
				}
				?>
			</div>
		</form>
	</div><!-- end of search form -->
	<?php
}


var_409 var_42() {
	var_467 $var_5;
	if (!in_context(var_87))
		var_428 '';
	return stripcslashes($var_5->codifySearchString());
}


var_409 var_120($var_171 = '%B %Y') {
	if (in_context(var_87)) {
		var_467 $var_5;
		$var_189 = $var_5->getSearchDate();
		if (empty($var_189)) {
			var_428 "";
		}
		if ($var_189 == '0000-00') {
			var_428 gettext("no date");
		};
		$var_365 = strtotime($var_189 . "-01");
		return zpFormattedDate($var_171, $var_365);
	}
	var_428 false;
}


var_409 var_410() {
	var_467 $var_3, $var_105, $var_104;
	$var_105 = false;
	if (($var_411 = getOption('albums_per_row')) <= 1)
		$var_411 = false;
	if (($var_412 = getOption('images_per_row')) <= 1)
		$var_412 = false;
	$var_413 = max(1, getOption('albums_per_page'));
	if (($var_411) && (($var_413 % $var_411) != 0)) {
		setOption('albums_per_page', $var_413 = ((floor($var_413 / $var_411) + 1) * $var_411), false);
	}
	$var_414 = max(1, getOption('images_per_page'));
	if (($var_412) && (($var_414 % $var_412) != 0)) {
		setOption('images_per_page', $var_414 = ((floor($var_414 / $var_412) + 1) * $var_412), false);
	}
	if ((getOption('thumb_transition') && !$var_104) && in_context(var_74 | var_87) && $var_411 && $var_412) {
		$var_415 = fn_5();
		if ($var_415 == 0) {
			$var_105 = 0;
		}
		$var_416 = ceil(($var_415 % $var_413) / $var_411); 
		$var_417 = floor(max(1, getOption('images_per_page')) / $var_412) - $var_416;
		$var_105 = max(0, $var_417 * $var_412); 
		if ($var_105 == $var_414) {
			$var_105 = 0;
		}
	}
}






var_409 var_418(&$var_394 = NULL, &$var_419 = NULL) {
	var_467 $var_7, $var_6, $var_55, $var_56, $var_54;
	$var_420 = zp_apply_filter('checkForGuest', NULL);
	if (!is_null($var_420))
		var_428 $var_420;
	if (in_context(var_87)) { 
		$var_421 = getOption('search_password');
		if (getOption('search_user') != '')
			$var_419 = true;
		$var_394 = get_language_string(getOption('search_hint'));
		$var_420 = 'zp_search_auth';
		if (empty($var_421)) {
			$var_421 = $var_7->getPassword();
			if ($var_7->getUser() != '')
				$var_419 = true;
			$var_394 = $var_7->getPasswordHint();
			$var_420 = 'zp_gallery_auth';
		}
		if (!empty($var_421) && zp_getCookie($var_420) == $var_421) {
			var_428 $var_420;
		}
	} var_150 if (!is_null($var_54)) {
		$var_420 = $var_54->checkAccess($var_394, $var_419);
		return $var_420;
	} var_150 if (isset($_GET['album'])) { 
		list($var_75, $var_206) = rewrite_get_album_image('album', 'image');
		if ($var_420 = checkAlbumPassword($var_75, $var_394)) {
			var_428 $var_420;
		} var_150 {
			$var_424 = newAlbum($var_75);
			if ($var_424->getUser() != '')
				$var_419 = true;
			return false;
		}
	} var_150 { 
		$var_421 = $var_7->getPassword();
		if ($var_7->getUser() != '')
			$var_419 = true;
		$var_394 = $var_7->getPasswordHint();
		if (!empty($var_421) && zp_getCookie('zp_gallery_auth') == $var_421) {
			var_428 'zp_gallery_auth';
		}
	}
	var_397 (empty($var_421))
		var_428 'zp_public_access';
	return false;
}


var_409 var_101(&$var_394 = NULL, &$var_419 = NULL) {
	var_467 $var_3, $var_5, $var_7, $var_6,
	$var_55, $var_54;
	if (var_425 != 'public') 
		$var_419 = true; 

	if ($var_7->isUnprotectedPage(stripSuffix($var_6)))
		var_428 true;
	if (zp_loggedin()) {
		$var_427 = zp_apply_filter('isMyItemToView', NULL);
		if (!is_null($var_427)) { 
			var_428 $var_427;
		}
		switch ($var_6) {
			case 'album.php':
			case 'image.php':
				if ($var_3->isMyItem(var_213)) {
					var_428 true;
				}
				var_430;
			case 'search.php':
				if (zp_loggedin(var_429)) {
					var_428 true;
				}
				var_430;
			default:
				if (zp_loggedin(var_431)) {
					var_428 true;
				}
				var_430;
		}
	}
	var_397 (var_425 == 'public' && ($var_432 = checkForGuest($var_394, $var_419))) {
		var_428 $var_432; 
	}
	var_428 false;
}


var_409 var_433() {
  var_467 $var_434, $var_435, $var_5, $var_6,
  $var_3, $var_4, $var_54;
	if($var_434 !== 2) {
		var_428 false;
	}
  switch ($var_6) {
    case 'index.php':
      $var_436 = '/index.php';
      break;
    case 'album.php':
      $var_436 = '/index.php?userlog=1&album=' . pathurlencode($var_3->var_31);
      break;
    case 'image.php':
      $var_436 = '/index.php?userlog=1&album=' . pathurlencode($var_3->var_31) . '&image=' . urlencode($var_4->var_39);
      break;
    case 'pages.php':
      $var_436 = '/index.php?userlog=1&p=pages&title=' . urlencode(getPageTitlelink());
      break;
    case 'news.php':
      $var_436 = '/index.php?userlog=1&p=news';
      if (!is_null($var_54)) {
        $var_436 .= '&title=' . urlencode($var_54->getTitlelink());
      }
      var_430;
    case 'password.php':
      $var_436 = str_replace(var_377, '', getRequestURI());
      if ($var_436 == '/' . var_78 . '/password' || $var_436 == '/index.php?p=password') {
        $var_436 = '/index.php';
      }
      var_430;
    default:
      if (in_context(var_87)) {
        $var_436 = '/index.php?userlog=1&p=search' . $var_5->getSearchParams();
      } var_150 {
        $var_436 = '/index.php?userlog=1&p=' . substr($var_6, 0, -4);
      }
  }
  var_428 var_377 . $var_436;
}


var_409 var_438($var_439, $var_440 = NULL, $var_441 = true, $var_442 = NULL) {
	var_467 $var_434, $var_435, $var_5, $var_7, $var_6,
	$var_3, $var_4, $var_443, $var_55, $var_444;
	if ($var_435)
		var_428;
	$var_435 = true;

	if (is_null($var_442))
		$var_442 = getPageRedirect();

	if (is_null($var_440))
		$var_440 = $var_7->getUserLogonField();
	?>
	<var_446 var_131="var_447">
		<?php
		if ($var_441 && !$var_434) {
			?>
			<p>
				<?php  ?>
			</p>
			<?php
		}
		if ($var_448 = zp_apply_filter('login_link', NULL)) {
			$var_449 = gettext('login');
			?>
			<var_267 var_450="<?php  ?>" var_129="<?php  ?>"><?php  ?></var_267>
			<?php
		} else {
			$var_444->printLoginForm($var_442, false, $var_440, false, $var_439);
		}
		?>
	</div>
	<?php
}


var_409 var_452() {
	
	$var_267 = basename($var_68);
	if ($var_267 != 'full-image.php') {
		
		if (var_453) {
			
			$var_454 = zp_graphicsLibInfo();
			$var_454 = sanitize(str_replace('<br />', ', ', $var_454['Library_desc']), 3);
			
			
			if (count($var_455) > 0) {
				sort($var_455);
				foreach ($var_455 as $var_456) {var_405
					
				}
			} var_150 {var_405
				
			}
		}
		
	}
}


var_409 var_457($var_321 = 1, $var_333 = NULL) {
	var_467 $var_3, $var_4, $var_54, $var_55, $var_7, $var_6;
	if (!$var_321) {
		setOptionDefault('codeblock_first_tab', 0);
	}
	if (!is_object($var_333)) {
		if ($var_6 == 'index.php') {
			$var_333 = $var_7;
		}
		var_397 (in_context(var_74)) {
			$var_333 = $var_3;
		}
		var_397 (in_context(var_166)) {
			$var_333 = $var_4;
		}
		var_397 (in_context(var_328)) {
			if ($var_55->checkAccess()) {
				$var_333 = $var_55;
			}
		}
		var_397 (in_context(var_329)) {
			if ($var_54->checkAccess()) {
				$var_333 = $var_54;
			}
		}
	}
	var_397 (!is_object($var_333)) {
		var_428 NULL;
	}
	$var_458 = getSerializedArray($var_333->getcodeblock());
	$var_458 = zp_apply_filter('codeblock', @$var_458[$var_321], $var_333, $var_321);
	if ($var_458) {
		$var_458 = applyMacros($var_458);
	}
	var_428 $var_458;
}


var_409 var_460($var_321 = 1, $var_461 = NULL) {
	$var_458 = getCodeblock($var_321, $var_461);
	if ($var_458) {
		$var_462 = get_context();
		eval('?>' . $var_458);
		set_context($var_462);
	}
}


var_409 var_463($var_464, $var_465, $var_13) {
	var_467 $var_7, $var_105, $var_104, $var_106, $var_56;
	$var_415 = NULL;
	switch ($var_465) {
		case 'album.php':
		case 'search.php':
			$var_107 = max(1, getOption('albums_per_page'));
			$var_108 = (int) ceil(fn_5() / $var_107);
			$var_109 = fn_6();
			if ($var_104) {
				if ($var_104 === true) {
					$var_109 = min(1, $var_109);
				} var_150 {
					$var_109 = 0;
				}
			}
			$var_110 = max(1, getOption('images_per_page'));
			$var_415 = ($var_108 + (int) ceil(($var_109 - $var_105) / $var_110));
			break;
		case 'index.php':
			if (galleryAlbumsPerPage() != 0) {
				$var_415 = (int) ceil($var_7->fn_5() / galleryAlbumsPerPage());
			}
			var_430;
		case 'news.php':
			if (in_context(var_112)) {
				$var_415 = count($var_56->getArticles());
			} var_150 {
				$var_415 = count($var_106->getArticles());
			}
			$var_415 = (int) ceil($var_415 / var_115);
			break;
		default:
			$var_415 = zp_apply_filter('checkPageValidity', NULL, $var_465, $var_13);
			break;
	}
	var_397 ($var_13 > $var_415) {
		$var_464 = false; 
	}

	var_428 $var_464;
}

var_409 var_466($var_75, $var_206, $var_68) {
	var_467 $var_57;
	
	if (isset($var_75)) {
		

		if (isset($var_206)) {var_405
			
		}
	} var_150 {
		
	}
	if (isset($var_57) && $var_57 > 1) {var_405
		
	}
}

?>
