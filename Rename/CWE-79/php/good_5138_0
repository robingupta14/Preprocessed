<?php




class class_0
{
    
    private $var_0;
    
    private $var_1;
    
    private $var_2;
    
    private $var_3;
    
    private $var_4;
    
    private $var_5;
    
    private $var_6;
    
    private $var_7;
    
    private $var_8;
    
    private $var_9;
    
    private $var_10;
    
    private $var_11;
    
    private $var_12;
    
    private $var_13;
    
    private $var_14;
    
    private $var_15;
    
    private $var_16;
    
    private $var_17;
    
    private $var_18;
    
    private $var_19;
    
    private $var_20;
    
    private $var_21;
    
    private $var_22;
    
    private $var_23;
    
    private $var_24;
    
    private $var_25 = null;
    
    private $var_26 = null;

    
    private function fn_0()
    {
        if (null === $var_28->var_26
            || null === $var_28->var_26->getCriterias()
        ) {
            return $var_28;
        }

        $var_30 = $var_28->var_26->getCriterias();
        $var_31 = $var_30 + $var_31;

        return $var_28;
    }

    
    private function fn_1()
    {
        return $var_28->var_26;
    }

    
    public function fn_2(
        $var_33, $var_34 = array(), $var_35 = null
    ) {
        $var_28->var_0 = $var_33;
        $var_28->var_25 = $var_34;
        $var_28->var_26 = $var_35;
        $var_28->fn_0();
        
        $var_28->fn_3();
        $var_28->fn_4();
    }

    
    private function fn_3()
    {
        $var_38 = $var_28->fn_5();

        $var_28->var_5 = PMA_ifSetOr(
            $var_31['criteriaColumnInsert'],
            null,
            'array'
        );
        $var_28->var_6 = PMA_ifSetOr(
            $var_31['criteriaColumnDelete'],
            null,
            'array'
        );

        $var_28->var_10 = isset($var_31['prev_criteria'])
            ? $var_31['prev_criteria']
            : array();
        $var_28->var_9 = isset($var_31['criteria'])
            ? $var_31['criteria']
            : array_fill(0, $var_38, '');

        $var_28->var_7 = isset($var_31['criteriaRowInsert'])
            ? $var_31['criteriaRowInsert']
            : array_fill(0, $var_38, '');
        $var_28->var_8 = isset($var_31['criteriaRowDelete'])
            ? $var_31['criteriaRowDelete']
            : array_fill(0, $var_38, '');
        $var_28->var_12 = isset($var_31['criteriaAndOrRow'])
            ? $var_31['criteriaAndOrRow']
            : array_fill(0, $var_38, '');
        $var_28->var_11 = isset($var_31['criteriaAndOrColumn'])
            ? $var_31['criteriaAndOrColumn']
            : array_fill(0, $var_38, '');
        
        $var_28->var_14 = 12;
        $var_28->var_15 = array();
        $var_28->var_17 = array();
        $var_28->var_19 = array();
        $var_28->var_20 = array();
        $var_28->var_22 = array();
        $var_28->var_21 = array();
    }

    
    private function fn_4()
    {
        
        if (PMA_isValid($var_31['TableList'], 'array')) {
            foreach ($var_31['TableList'] as $var_40) {
                $var_28->var_1[$var_40] = ' selected="selected"';
            }
        } 
        $var_41 = $GLOBALS['dbi']->query(
            'SHOW TABLES FROM ' . Util::backquote($var_28->var_0) . ';',
            null,
            var_43::var_44
        );
        $var_45 = $GLOBALS['dbi']->numRows($var_41);
        if (0 == $var_45) {
            Message::error(__('No tables found in database.'))->display();
            var_48;
        }
        
        while (list($var_49) = $GLOBALS['dbi']->fetchRow($var_41)) {
            $var_51 = $GLOBALS['dbi']->getColumns($var_28->var_0, $var_49);

            if (empty($var_28->var_1[$var_49])
                && ! empty($var_31['TableList'])
            ) {
                $var_28->var_1[$var_49] = '';
            } else {
                $var_28->var_1[$var_49] = ' selected="selected"';
            } 

            
            if ($var_28->var_1[$var_49] == ' selected="selected"') {
                $var_40 = Util::backquote($var_49);
                $var_28->var_2[]  = $var_40 . '.*';
                foreach ($var_51 as $var_53) {
                    $var_53 = $var_40 . '.'
                        . Util::backquote($var_53['Field']);
                    $var_28->var_2[] = $var_53;
                    
                    $var_28->var_14 = max(
                        mb_strlen($var_53),
                        $var_28->var_14
                    );
                } 
            } 
        } 
        $GLOBALS['dbi']->freeResult($var_41);

        
        $var_28->var_13 = $var_28->var_14 . 'ex';
    }
    
    private function fn_6($var_56, $var_57 = '')
    {
        $var_58 = '';
        $var_58 .= '<td class="center">';
        $var_58 .= '<select name="criteriaColumn[' . $var_56
            . ']" size="1">';
        $var_58 .= '<option value="">&nbsp;</option>';
        foreach ($var_28->var_2 as $var_59) {
            $var_58 .= '<option value="' . htmlspecialchars($var_59) . '"'
                . (($var_59 === $var_57) ? ' selected="selected"' : '') . '>'
                . str_replace(' ', '&nbsp;', htmlspecialchars($var_59))
                . '</option>';
        }
        $var_58 .= '</select>';
        $var_58 .= '</td>';
        return $var_58;
    }

    
    private function fn_7($var_56, $var_61 = '',
        $var_62 = ''
    ) {
        $var_58 = '<td class="center">';
        $var_58 .= '<select style="width: ' . $var_28->var_13
            . '" name="criteriaSort[' . $var_56 . ']" size="1">';
        $var_58 .= '<option value="">&nbsp;</option>';
        $var_58 .= '<option value="ASC"' . $var_61 . '>'
            . __('Ascending')
            . '</option>';
        $var_58 .= '<option value="DESC"' . $var_62 . '>'
            . __('Descending')
            . '</option>';
        $var_58 .= '</select>';
        $var_58 .= '</td>';
        return $var_58;
    }

    
    private function fn_8($var_64, $var_65)
    {
        $var_66 = $var_28->fn_9();
        $var_58  = '<td class="center">';
        $var_58 .= '<select name="criteriaSortOrder[' . $var_64 . ']">';
        $var_58 .= '<option value="1000">'
            . '&nbsp;</option>';
        for ($var_68 = 1; $var_68 <= $var_66; $var_68++) {
            $var_58 .= '<option value="' . $var_68 . '"';
            if ($var_68 == $var_65) {
                $var_58 .= ' selected="selected"';
            }
            $var_58 .= '>' . $var_68 . '</option>';
        }
        $var_58 .= '</select>';
        $var_58 .= '</td>';
        return $var_58;
    }

    
    private function fn_9()
    {
        $var_66 = $var_28->var_3;
        if (! empty($var_28->var_5)) {
            $var_66 += count($var_28->var_5);
        }
        if (! empty($var_28->var_6)) {
            $var_66 -= count($var_28->var_6);
        }
        return $var_66;
    }

    
    private function fn_10()
    {
        $var_58 = '<tr class="odd noclick">';
        $var_58 .= '<th>' . __('Column:') . '</th>';
        $var_70 = 0;
        for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
        ) {
            if (isset($var_28->var_5[$var_71])
                && $var_28->var_5[$var_71] == 'on'
            ) {
                $var_58 .= $var_28->fn_6(
                    $var_70
                );
                $var_70++;
            }
            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_71])
                && $var_28->var_6[$var_71] == 'on'
            ) {
                continue;
            }
            $var_57 = '';
            if (isset($var_31['criteriaColumn'][$var_71])) {
                $var_57 = $var_31['criteriaColumn'][$var_71];
                $var_28->var_15[$var_70]
                    = $var_31['criteriaColumn'][$var_71];
            }
            $var_58 .= $var_28->fn_6(
                $var_70,
                $var_57
            );
            $var_70++;
        } 
        $var_28->var_23 = $var_70;
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_11()
    {
        $var_58 = '<tr class="even noclick">';
        $var_58 .= '<th>' . __('Alias:') . '</th>';
        $var_70 = 0;

        for (
        $var_73 = 0;
        $var_73 < $var_28->var_3;
        $var_73++
        ) {
            if (! empty($var_28->var_5)
                && isset($var_28->var_5[$var_73])
                && $var_28->var_5[$var_73] == 'on'
            ) {
                $var_58 .= '<td class="center">';
                $var_58 .= '<input type="text"'
                    . ' name="criteriaAlias[' . $var_70 . ']"'
                    . ' value="" />';
                $var_58 .= '</td>';
                $var_70++;
            } 

            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_73])
                && $var_28->var_6[$var_73] == 'on'
            ) {
                continue;
            }

            $var_74 = '';
            if (! empty($var_31['criteriaAlias'][$var_73])) {
                $var_74
                    = $var_28->var_16[$var_70]
                        = $var_31['criteriaAlias'][$var_73];
            }

            $var_58 .= '<td class="center">';
            $var_58 .= '<input type="text"'
                . ' name="criteriaAlias[' . $var_70 . ']"'
                . ' value="' . htmlspecialchars($var_74) . '" />';
            $var_58 .= '</td>';
            $var_70++;
        } 
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_12()
    {
        $var_58 = '<tr class="even noclick">';
        $var_58 .= '<th>' . __('Sort:') . '</th>';
        $var_70 = 0;

        for (
            $var_73 = 0;
            $var_73 < $var_28->var_3;
            $var_73++
        ) {
            if (! empty($var_28->var_5)
                && isset($var_28->var_5[$var_73])
                && $var_28->var_5[$var_73] == 'on'
            ) {
                $var_58 .= $var_28->fn_7($var_70);
                $var_70++;
            } 

            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_73])
                && $var_28->var_6[$var_73] == 'on'
            ) {
                continue;
            }
            
            
            if (isset($var_31['criteriaSort'][$var_73])
                && isset($var_31['criteriaColumn'][$var_73])
                && mb_substr($var_31['criteriaColumn'][$var_73], -2) == '.*'
            ) {
                $var_31['criteriaSort'][$var_73] = '';
            } 

            $var_61 = ''; $var_62 = '';
            if (isset($var_31['criteriaSort'][$var_73])) {
                $var_28->var_17[$var_70]
                    = $var_31['criteriaSort'][$var_73];
                
                if ($var_31['criteriaSort'][$var_73] == 'ASC') {
                    $var_61 = ' selected="selected"';
                } 
                
                if ($var_31['criteriaSort'][$var_73] == 'DESC') {
                    $var_62 = ' selected="selected"';
                } 
            } else {
                $var_28->var_17[$var_70] = '';
            }

            $var_58 .= $var_28->fn_7(
                $var_70, $var_61, $var_62
            );
            $var_70++;
        } 
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_13()
    {
        $var_58 = '<tr class="even noclick">';
        $var_58 .= '<th>' . __('Sort order:') . '</th>';
        $var_70 = 0;

        for (
        $var_73 = 0;
        $var_73 < $var_28->var_3;
        $var_73++
        ) {
            if (! empty($var_28->var_5)
                && isset($var_28->var_5[$var_73])
                && $var_28->var_5[$var_73] == 'on'
            ) {
                $var_58 .= $var_28->fn_8(
                    $var_70, null
                );
                $var_70++;
            } 

            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_73])
                && $var_28->var_6[$var_73] == 'on'
            ) {
                continue;
            }

            $var_65 = null;
            if (! empty($var_31['criteriaSortOrder'][$var_73])) {
                $var_65
                    = $var_28->var_18[$var_70]
                        = $var_31['criteriaSortOrder'][$var_73];
            }

            $var_58 .= $var_28->fn_8(
                $var_70, $var_65
            );
            $var_70++;
        } 
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_14()
    {
        $var_58 = '<tr class="odd noclick">';
        $var_58 .= '<th>' . __('Show:') . '</th>';
        $var_70 = 0;
        for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
        ) {
            if (! empty($var_28->var_5)
                && isset($var_28->var_5[$var_71])
                && $var_28->var_5[$var_71] == 'on'
            ) {
                $var_58 .= '<td class="center">';
                $var_58 .= '<input type="checkbox"'
                    . ' name="criteriaShow[' . $var_70 . ']" />';
                $var_58 .= '</td>';
                $var_70++;
            } 
            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_71])
                && $var_28->var_6[$var_71] == 'on'
            ) {
                continue;
            }
            if (isset($var_31['criteriaShow'][$var_71])) {
                $var_78 = ' checked="checked"';
                $var_28->var_19[$var_70]
                    = $var_31['criteriaShow'][$var_71];
            } else {
                $var_78 = '';
            }
            $var_58 .= '<td class="center">';
            $var_58 .= '<input type="checkbox"'
                . ' name="criteriaShow[' . $var_70 . ']"'
                . $var_78 . ' />';
            $var_58 .= '</td>';
            $var_70++;
        } 
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_15()
    {
        $var_58 = '<tr class="even noclick">';
        $var_58 .= '<th>' . __('Criteria:') . '</th>';
        $var_70 = 0;
        for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
        ) {
            if (! empty($var_28->var_5)
                && isset($var_28->var_5[$var_71])
                && $var_28->var_5[$var_71] == 'on'
            ) {
                $var_58 .= '<td class="center">';
                $var_58 .= '<input type="text"'
                    . ' name="criteria[' . $var_70 . ']"'
                    . ' value=""'
                    . ' class="textfield"'
                    . ' style="width: ' . $var_28->var_13 . '"'
                    . ' size="20" />';
                $var_58 .= '</td>';
                $var_70++;
            } 
            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_71])
                && $var_28->var_6[$var_71] == 'on'
            ) {
                continue;
            }
            if (isset($var_28->var_9[$var_71])) {
                $var_80 = $var_28->var_9[$var_71];
            }
            if ((empty($var_28->var_10)
                || ! isset($var_28->var_10[$var_71]))
                || $var_28->var_10[$var_71] != htmlspecialchars($var_80)
            ) {
                $var_28->var_20[$var_70] = $var_80;
            } else {
                $var_28->var_20[$var_70]
                    = $var_28->var_10[$var_71];
            }
            $var_58 .= '<td class="center">';
            $var_58 .= '<input type="hidden"'
                . ' name="prev_criteria[' . $var_70 . ']"'
                . ' value="'
                . htmlspecialchars($var_28->var_20[$var_70])
                . '" />';
            $var_58 .= '<input type="text"'
                . ' name="criteria[' . $var_70 . ']"'
                . ' value="' . htmlspecialchars($var_80) . '"'
                . ' class="textfield"'
                . ' style="width: ' . $var_28->var_13 . '"'
                . ' size="20" />';
            $var_58 .= '</td>';
            $var_70++;
        } 
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_16($var_82)
    {
        $var_58 = '<div class="floatleft">';
        $var_58 .= (($var_82 == 'row')
            ? __('Add/Delete criteria rows') : __('Add/Delete columns'));
        $var_58 .= ':<select size="1" name="'
            . (($var_82 == 'row') ? 'criteriaRowAdd' : 'criteriaColumnAdd') . '">';
        $var_58 .= '<option value="-3">-3</option>';
        $var_58 .= '<option value="-2">-2</option>';
        $var_58 .= '<option value="-1">-1</option>';
        $var_58 .= '<option value="0" selected="selected">0</option>';
        $var_58 .= '<option value="1">1</option>';
        $var_58 .= '<option value="2">2</option>';
        $var_58 .= '<option value="3">3</option>';
        $var_58 .= '</select>';
        $var_58 .= '</div>';
        return $var_58;
    }

    
    private function fn_17()
    {
        $var_58 = '<fieldset class="tblFooters">';
        $var_58 .= $var_28->fn_16("row");
        $var_58 .= $var_28->fn_16("column");
        $var_58 .= '<div class="floatleft">';
        $var_58 .= '<input type="submit" name="modify"'
            . 'value="' . __('Update Query') . '" />';
        $var_58 .= '</div>';
        $var_58 .= '</fieldset>';
        return $var_58;
    }

    
    private function fn_18()
    {
        $var_58 = '<div class="floatleft">';
        $var_58 .= '<fieldset>';
        $var_58 .= '<legend>' . __('Use Tables') . '</legend>';
        
        $var_85 = '';
        $var_86 = 0;
        foreach ($var_28->var_1 as $var_87 => $var_88) {
            $var_85 .= '<option value="' . htmlspecialchars($var_87) . '"' . $var_88 . '>'
                . (str_replace(' ', '&nbsp;', htmlspecialchars($var_87))) . '</option>';
            $var_86++;
        }
        $var_58 .= '<select name="TableList[]"'
            . ' multiple="multiple" id="listTable"'
            . ' size="' . (($var_86 > 30) ? '15' : '7') . '">';
        $var_58 .= $var_85;
        $var_58 .= '</select>';
        $var_58 .= '</fieldset>';
        $var_58 .= '<fieldset class="tblFooters">';
        $var_58 .= '<input type="submit" name="modify" value="'
            . __('Update Query') . '" />';
        $var_58 .= '</fieldset>';
        $var_58 .= '</div>';
        return $var_58;
    }

    
    private function fn_19(
        $var_56, $var_57 = null, $var_90 = false
    ) {
        $var_58 = '<td class="center">';
        if (! $var_90) {
            $var_58 .= '<strong>' . __('Or:') . '</strong>';
            $var_58 .= '<input type="radio"'
                . ' name="criteriaAndOrColumn[' . $var_56 . ']"'
                . ' value="or"' . $var_57['or'] . ' />';
            $var_58 .= '&nbsp;&nbsp;<strong>' . __('And:') . '</strong>';
            $var_58 .= '<input type="radio"'
                . ' name="criteriaAndOrColumn[' . $var_56 . ']"'
                . ' value="and"' . $var_57['and'] . ' />';
        }
        $var_58 .= '<br />' . __('Ins');
        $var_58 .= '<input type="checkbox"'
            . ' name="criteriaColumnInsert[' . $var_56 . ']" />';
        $var_58 .= '&nbsp;&nbsp;' . __('Del');
        $var_58 .= '<input type="checkbox"'
            . ' name="criteriaColumnDelete[' . $var_56 . ']" />';
        $var_58 .= '</td>';
        return $var_58;
    }

    
    private function fn_20()
    {
        $var_58 = '<tr class="even noclick">';
        $var_58 .= '<th>' . __('Modify:') . '</th>';
        $var_70 = 0;
        for (
        $var_71 = 0;
        $var_71 < $var_28->var_3;
        $var_71++
        ) {
            if (! empty($var_28->var_5)
                && isset($var_28->var_5[$var_71])
                && $var_28->var_5[$var_71] == 'on'
            ) {
                $var_58 .= $var_28->fn_19($var_70);
                $var_70++;
            } 

            if (! empty($var_28->var_6)
                && isset($var_28->var_6[$var_71])
                && $var_28->var_6[$var_71] == 'on'
            ) {
                continue;
            }

            if (isset($var_28->var_11[$var_71])) {
                $var_28->var_21[$var_70]
                    = $var_28->var_11[$var_71];
            }
            $var_78 = array();
            if (isset($var_28->var_11[$var_71])
                && $var_28->var_11[$var_71] == 'or'
            ) {
                $var_78['or']  = ' checked="checked"';
                $var_78['and'] = '';
            } else {
                $var_78['and'] = ' checked="checked"';
                $var_78['or']  = '';
            }
            $var_58 .= $var_28->fn_19(
                $var_70,
                $var_78,
                ($var_71 + 1 == $var_28->var_3)
            );
            $var_70++;
        } 
        $var_58 .= '</tr>';
        return $var_58;
    }

    
    private function fn_21($var_93, $var_78)
    {
        $var_58 = '<td class="' . $GLOBALS['cell_align_right'] . ' nowrap">';
        $var_58 .= '<!-- Row controls -->';
        $var_58 .= '<table class="nospacing nopadding">';
        $var_58 .= '<tr>';
        $var_58 .= '<td class="' . $GLOBALS['cell_align_right'] . ' nowrap">';
        $var_58 .= '<small>' . __('Ins:') . '</small>';
        $var_58 .= '<input type="checkbox"'
            . ' name="criteriaRowInsert[' . $var_93 . ']" />';
        $var_58 .= '</td>';
        $var_58 .= '<td class="' . $GLOBALS['cell_align_right'] . '">';
        $var_58 .= '<strong>' . __('And:') . '</strong>';
        $var_58 .= '</td>';
        $var_58 .= '<td>';
        $var_58 .= '<input type="radio"'
            . ' name="criteriaAndOrRow[' . $var_93 . ']" value="and"'
            . $var_78['and'] . ' />';
        $var_58 .= '</td>';
        $var_58 .= '</tr>';
        $var_58 .= '<tr>';
        $var_58 .= '<td class="' . $GLOBALS['cell_align_right'] . ' nowrap">';
        $var_58 .= '<small>' . __('Del:') . '</small>';
        $var_58 .= '<input type="checkbox"'
            . ' name="criteriaRowDelete[' . $var_93 . ']" />';
        $var_58 .= '</td>';
        $var_58 .= '<td class="' . $GLOBALS['cell_align_right'] . '">';
        $var_58 .= '<strong>' . __('Or:') . '</strong>';
        $var_58 .= '</td>';
        $var_58 .= '<td>';
        $var_58 .= '<input type="radio"'
            . ' name="criteriaAndOrRow[' . $var_93 . ']"'
            . ' value="or"' . $var_78['or'] . ' />';
        $var_58 .= '</td>';
        $var_58 .= '</tr>';
        $var_58 .= '</table>';
        $var_58 .= '</td>';
        return $var_58;
    }

    
    private function fn_22($var_95)
    {
        $var_58 = '';
        $var_70 = 0;
        for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
        ) {
            if (!empty($var_28->var_5)
                && isset($var_28->var_5[$var_71])
                && $var_28->var_5[$var_71] == 'on'
            ) {
                $var_96 = 'Or' . $var_95 . '[' . $var_70 . ']';
                $var_58 .= '<td class="center">';
                $var_58 .= '<input type="text"'
                    . ' name="Or' . $var_96 . '" class="textfield"'
                    . ' style="width: ' . $var_28->var_13 . '" size="20" />';
                $var_58 .= '</td>';
                $var_70++;
            } 
            if (!empty($var_28->var_6)
                && isset($var_28->var_6[$var_71])
                && $var_28->var_6[$var_71] == 'on'
            ) {
                continue;
            }
            $var_97 = 'Or' . $var_95;
            if (! empty($var_31[$var_97]) && isset($var_31[$var_97][$var_71])) {
                $var_98 = $var_31[$var_97][$var_71];
            } else {
                $var_98     = '';
            }
            $var_58 .= '<td class="center">';
            $var_58 .= '<input type="text"'
                . ' name="Or' . $var_95 . '[' . $var_70 . ']' . '"'
                . ' value="' . htmlspecialchars($var_98) . '" class="textfield"'
                . ' style="width: ' . $var_28->var_13 . '" size="20" />';
            $var_58 .= '</td>';
            if (!empty(${$var_97}) && isset(${$var_97}[$var_71])) {
                $GLOBALS[${'cur' . $var_97}][$var_70]
                    = ${$var_97}[$var_71];
            }
            $var_70++;
        } 
        return $var_58;
    }

    
    private function fn_23()
    {
        $var_58 = '';
        $var_100 = 0;
        $var_101 = true;
        $var_78 = array();
        for (
        $var_93 = 0;
        $var_93 <= $var_28->var_4;
        $var_93++
        ) {
            if (isset($var_28->var_7[$var_93])
                && $var_28->var_7[$var_93] == 'on'
            ) {
                $var_78['or']  = ' checked="checked"';
                $var_78['and'] = '';
                $var_58 .= '<tr class="' . ($var_101 ? 'odd' : 'even')
                    . ' noclick">';
                $var_58 .= $var_28->fn_21(
                    $var_100, $var_78
                );
                $var_58 .= $var_28->fn_22(
                    $var_100
                );
                $var_100++;
                $var_58 .= '</tr>';
                $var_101 =! $var_101;
            } 
            if (isset($var_28->var_8[$var_93])
                && $var_28->var_8[$var_93] == 'on'
            ) {
                continue;
            }
            if (isset($var_28->var_12[$var_93])) {
                $var_28->var_22[$var_100]
                    = $var_28->var_12[$var_93];
            }
            if (isset($var_28->var_12[$var_93])
                && $var_28->var_12[$var_93] == 'and'
            ) {
                $var_78['and'] =  ' checked="checked"';
                $var_78['or']  =  '';
            } else {
                $var_78['or']  =  ' checked="checked"';
                $var_78['and'] =  '';
            }
            $var_58 .= '<tr class="' . ($var_101 ? 'odd' : 'even')
                . ' noclick">';
            $var_58 .= $var_28->fn_21(
                $var_100, $var_78
            );
            $var_58 .= $var_28->fn_22(
                $var_100
            );
            $var_100++;
            $var_58 .= '</tr>';
            $var_101 =! $var_101;
        } 
        $var_28->var_24 = $var_100;
        return $var_58;
    }

    
    private function fn_24()
    {
        $var_103 = '';
        $var_104 = array();
        for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
        ) {
            if (! empty($var_28->var_15[$var_71])
                && isset($var_28->var_19[$var_71])
                && $var_28->var_19[$var_71] == 'on'
            ) {
                $var_105 = $var_28->var_15[$var_71];
                if (! empty($var_28->var_16[$var_71])) {
                    $var_105 .= " AS "
                        . Util::backquote($var_28->var_16[$var_71]);
                }
                $var_104[] = $var_105;
            }
        } 
        if (!empty($var_104)) {
            $var_103 = 'SELECT '
                . htmlspecialchars(implode(", ", $var_104)) . "\n";
        }
        return $var_103;
    }

    
    private function fn_25()
    {
        $var_107 = '';
        $var_108 = 0;
        for (
        $var_71 = 0;
        $var_71 < $var_28->var_3;
        $var_71++
        ) {
            if (! empty($var_28->var_15[$var_71])
                && ! empty($var_28->var_20[$var_71])
                && $var_71
                && isset($var_109)
                && isset($var_28->var_21)
            ) {
                $var_107 .= ' '
                    . mb_strtoupper($var_28->var_21[$var_109])
                    . ' ';
            }
            if (! empty($var_28->var_15[$var_71])
                && ! empty($var_28->var_20[$var_71])
            ) {
                $var_107 .= '(' . $var_28->var_15[$var_71] . ' '
                    . $var_28->var_20[$var_71] . ')';
                $var_109 = $var_71;
                $var_108++;
            }
        } 
        if ($var_108 > 1) {
            $var_107 = '(' . $var_107 . ')';
        }
        
        if (! isset($var_28->var_22)) {
            $var_28->var_22 = array();
        }
        for (
        $var_93 = 0;
        $var_93 <= $var_28->var_4;
        $var_93++
        ) {
            $var_108 = 0;
            $var_110 = '';
            $var_111 = '';
            for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
            ) {
                if (! empty($var_28->var_15[$var_71])
                    && ! empty($var_31['Or' . $var_93][$var_71])
                    && $var_71
                ) {
                    $var_110 .= ' '
                        . mb_strtoupper(
                            $var_28->var_21[$var_111]
                        )
                        . ' ';
                }
                if (! empty($var_28->var_15[$var_71])
                    && ! empty($var_31['Or' . $var_93][$var_71])
                ) {
                    $var_110 .= '(' . $var_28->var_15[$var_71]
                        .  ' '
                        .  $var_31['Or' . $var_93][$var_71]
                        .  ')';
                    $var_111 = $var_71;
                    $var_108++;
                }
            } 
            if ($var_108 > 1) {
                $var_110      = '(' . $var_110 . ')';
            }
            if (! empty($var_110)) {
                $var_107 .= "\n"
                    .  mb_strtoupper(
                        isset($var_28->var_22[$var_93])
                        ? $var_28->var_22[$var_93] . ' '
                        : ''
                    )
                    .  $var_110;
            } 
        } 

        if (! empty($var_107) && $var_107 != '()') {
            $var_107 = 'WHERE ' . htmlspecialchars($var_107) . "\n";
        } 
        return $var_107;
    }

    
    private function fn_26()
    {
        $var_113 = '';
        $var_114 = array();

        
        $var_51 = $var_28->var_15;
        $var_115 = $var_28->var_17;
        $var_65 = $var_28->var_18;
        if (!empty($var_65)
            && count($var_65) == count($var_115)
            && count($var_65) == count($var_51)
        ) {
            
            array_multisort($var_65, $var_115, $var_51);
        }

        for (
            $var_71 = 0;
            $var_71 < $var_28->var_3;
            $var_71++
        ) {
            
            
            
            if (empty($var_51[$var_71])
                && empty($var_115[$var_71])
            ) {
                continue;
            }

            if (mb_substr($var_51[$var_71], -2) == '.*') {
                continue;
            }

            if (! empty($var_115[$var_71])) {
                $var_114[] = $var_51[$var_71] . ' '
                    . $var_115[$var_71];
            }
        } 
        if (!empty($var_114)) {
            $var_113 = 'ORDER BY '
                . htmlspecialchars(implode(", ", $var_114)) . "\n";
        }
        return $var_113;
    }

    
    private function fn_27($var_117, $var_118,
        $var_119
    ) {
        $var_120 = array();
        $var_121 = array();

        foreach ($var_117 as $var_49) {
            $var_122 = $GLOBALS['dbi']->getTableIndexes($var_28->var_0, $var_49);
            foreach ($var_122 as $var_124) {
                $var_59 = $var_49 . '.' . $var_124['Column_name'];
                if (isset($var_118[$var_59])) {
                    if ($var_124['Non_unique'] == 0) {
                        if (isset($var_119[$var_59])) {
                            $var_120[$var_59] = 'Y';
                        } else {
                            $var_120[$var_59] = 'N';
                        }
                    } else {
                        if (isset($var_119[$var_59])) {
                            $var_121[$var_59] = 'Y';
                        } else {
                            $var_121[$var_59] = 'N';
                        }
                    }
                }
            } 
        } 

        return array(
            'unique' => $var_120,
            'index' => $var_121
        );
    }

    
    private function fn_28($var_117, $var_118,
        $var_119
    ) {
        $GLOBALS['dbi']->selectDb($var_28->var_0);

        
        $var_122 = $var_28->fn_27(
            $var_117, $var_118, $var_119
        );
        $var_120 = $var_122['unique'];
        $var_121 = $var_122['index'];

        list($var_127, $var_128)
            = $var_28->fn_29(
                $var_117,
                $var_119,
                $var_120,
                $var_121
            );

        
        
        
        
        if ($var_128 != 1) {
            return $var_127;
        }

        $var_130 = array();
        $var_131 = array();
        foreach ($var_127 as $var_59 => $var_132) {
            $var_49 = explode('.', $var_59);
            $var_49 = $var_49[0];
            if ($var_132 == 'Y') {
                $var_130[$var_59] = $var_49;
            } else {
                $var_131[$var_59] = $var_49;
            }
        }
        if (count($var_130) > 0) {
            $var_127 = $var_130;
            
        } else {
            $var_127 = $var_131;
            
        }

        return $var_127;
    }

    
    private function fn_30($var_117, $var_118,
        $var_119, $var_134
    ) {
        if (count($var_134) == 1) {
            
            
            $var_135 = key($var_134);
            return $var_135;
        }

        
        
        
        
        $var_127 = $var_28->fn_28(
            $var_117, $var_118, $var_119
        );

        
        
        
        $var_136 = array();
        foreach ($var_127 as $var_137) {
            $var_138 = PMA_getForeigners($var_28->var_0, $var_137);
            foreach ($var_138 as $var_87 => $var_139) {
                if ($var_87 != 'foreign_keys_data') {
                    if (in_array($var_139['foreign_table'], $var_127)) {
                        $var_136[$var_139['foreign_table']]
                            = $var_139['foreign_table'];
                    }
                    continue;
                }
                foreach ($var_139 as $var_140) {
                    if (in_array($var_140['ref_table_name'], $var_127)) {
                        $var_136[$var_140['ref_table_name']]
                            = $var_140['ref_table_name'];
                    }
                }
            }
        }
        if (count($var_136)) {
            $var_127 = $var_136;
        }

        
        
        
        
        
        if (!(count($var_127) > 1)) {
            
            return reset($var_127);
        }

        
        $var_141 = $var_127;
        $var_142 = array();
        $var_143 = array();
        foreach ($var_127 as $var_49) {
            if ($var_141[$var_49] != 1) {
                $var_144 = new class_1($var_49, $var_28->var_0);
                $var_142[$var_49] = $var_144->countRecords();
                $var_141[$var_49] = 1;
            }
            $var_143[$var_49] = $var_142[$var_49];
        }
        
        return array_search(max($var_143), $var_143);
    }

    
    private function fn_31()
    {
        $var_119 = array();
        $var_134 = array();

        
        for (
            $var_71 = 0, $var_147 = count($var_28->var_9);
            $var_71 < $var_147;
            $var_71++
        ) {
            $var_148 = explode('.', $_POST['criteriaColumn'][$var_71]);
            if (empty($var_148[0]) || empty($var_148[1])) {
                continue;
            } 
            $var_49 = str_replace('`', '', $var_148[0]);
            $var_59 = str_replace('`', '', $var_148[1]);
            $var_59 = $var_49 . '.' . $var_59;
            
            
            if (! empty($var_28->var_9[$var_71])) {
                if (mb_substr($var_28->var_9[$var_71], 0, 1) == '='
                    || stristr($var_28->var_9[$var_71], 'is')
                ) {
                    $var_119[$var_59] = $var_59;
                    $var_134[$var_49]  = $var_49;
                }
            } 
        } 
        return array(
            'where_clause_tables' => $var_134,
            'where_clause_columns' => $var_119
        );
    }

    
    private function fn_32($var_150)
    {
        $var_151 = '';
        if (empty($var_150)) {
            return $var_151;
        }

        
        $var_117 = $var_118 = array();

        
        foreach ($var_150 as $var_152) {
            $var_153 = explode('.', $var_152);
            if (! empty($var_153[0]) && ! empty($var_153[1])) {
                $var_49 = str_replace('`', '', $var_153[0]);
                $var_117[$var_49] = $var_49;
                $var_118[] = $var_49 . '.' . str_replace(
                    '`', '', $var_153[1]
                );
            }
        } 

        
        $var_151 = $var_28->fn_33(
            $var_117, $var_118
        );

        
        
        if (empty($var_151)) {
            
            $var_151 = implode(
                ", ", array_map('PMA\libraries\Util::backquote', $var_117)
            );
        }

        return $var_151;
    }

    
    private function fn_33($var_155, $var_156)
    {
        
        $var_157 = array();

        
        foreach ($var_155 as $var_158) {
            $var_28->fn_34($var_157, $var_158);
        }

        
        $var_160 = $var_28->fn_31();
        $var_161 = $var_160['where_clause_tables'];
        $var_162 = $var_160['where_clause_columns'];

        
        $var_135 = $var_28->fn_30(
            $var_155, $var_156,
            $var_162, $var_161
        );

        
        
        $var_163 = array();
        if (mb_strlen($var_135) > 0) {
            
            $var_163[$var_135] = '';
        }
        
        $var_28->fn_35($var_163, $var_157, $var_155);

        
        $var_165 = '';

        
        
        $var_166 = array_diff($var_155, array_keys($var_163));
        if (count($var_166) > 0) {

            
            
            
            foreach ($var_166 as $var_158) {

                $var_167 = PMA_getChildReferences($var_28->var_0, $var_158);
                foreach ($var_167 as $var_59 => $var_168) {
                    foreach ($var_168 as $var_169) {

                        
                        if ($var_169['table_schema'] != $var_28->var_0) {
                            continue;
                        }

                        $var_49 = $var_169['table_name'];

                        $var_28->fn_34($var_157, $var_49);

                        
                        $var_170 = $var_163;
                        $var_171 = $var_155;
                        $var_171[] = $var_49;

                        
                        $var_28->fn_35(
                            $var_170, $var_157, $var_171
                        );

                        $var_172 = array_diff(
                            $var_171, array_keys($var_170)
                        );
                        
                        
                        
                        if (count($var_172) < count($var_166)) {
                            $var_163 = $var_170;
                            $var_155 = $var_171;
                        }

                        
                        if (count($var_172) == 0) {
                            break 3;
                        }
                    }
                }
            }

            $var_166 = array_diff($var_155, array_keys($var_163));
            
            if (count($var_166) > 0) {
                
                $var_165 .= implode(
                    ', ', array_map('Util::backquote', $var_166)
                );
            }
        }

        $var_173 = true;
        
        foreach ($var_163 as $var_49 => $var_174) {
            if ($var_173) {
                if (! empty($var_165)) {
                    $var_165 .= ", ";
                }
                $var_165 .= Util::backquote($var_49);
                $var_173 = false;
            } else {
                $var_165 .= "\n    LEFT JOIN " . Util::backquote(
                    $var_49
                ) . " ON " . $var_174;
            }
        }

        return $var_165;
    }

    
    private function fn_34(&$var_157, $var_158)
    {
        $var_157[$var_158] = array();

        $var_138 = PMA_getForeigners($GLOBALS['db'], $var_158);
        foreach ($var_138 as $var_175 => $var_139) {
            
            if ($var_175 == 'foreign_keys_data') {
                foreach ($var_139 as $var_176) {
                    $var_177 = array();
                    
                    foreach ($var_176['index_list'] as $var_124 => $var_178) {
                        $var_177[]
                            = Util::backquote($var_158) . "."
                            . Util::backquote($var_178) . " = "
                            . Util::backquote($var_176['ref_table_name']) . "."
                            . Util::backquote($var_176['ref_index_list'][$var_124]);
                    }
                    
                    $var_157[$var_158][$var_176['ref_table_name']]
                        = implode(" AND ", $var_177);
                }
            } else { 
                $var_157[$var_158][$var_139['foreign_table']]
                    = Util::backquote($var_158) . "."
                    . Util::backquote($var_175) . " = "
                    . Util::backquote($var_139['foreign_table']) . "."
                    . Util::backquote($var_139['foreign_field']);
            }
        }
    }

    
    private function fn_35(&$var_163, $var_157, $var_155)
    {
        while (true) {
            $var_179 = false;
            foreach ($var_155 as $var_180) {
                $var_181 = $var_157[$var_180];
                foreach ($var_181 as $var_182 => $var_174) {
                    if (! isset($var_163[$var_180])
                        && isset($var_163[$var_182])
                    ) {
                        $var_163[$var_180] = $var_174;
                        $var_179 = true;
                    } elseif (! isset($var_163[$var_182])
                        && isset($var_163[$var_180])
                        && in_array($var_182, $var_155)
                    ) {
                        $var_163[$var_182] = $var_174;
                        $var_179 = true;
                    }
                    if ($var_179) {
                        
                        if (count($var_163) == count($var_155)) {
                            return;
                        }
                    }
                }
            }
            
            if (! $var_179) {
                return;
            }
        }
    }

    
    private function fn_36($var_150)
    {
        $var_184 = '';
        
        $var_184 .= $var_28->fn_24();
        
        $var_151 = $var_28->fn_32($var_150);
        if (! empty($var_151)) {
            $var_184 .= 'FROM ' . htmlspecialchars($var_151) . "\n";
        }
        
        $var_184 .= $var_28->fn_25();
        
        $var_184 .= $var_28->fn_26();
        return $var_184;
    }

    
    public function fn_37()
    {
        $var_58 = '<form action="db_qbe.php" method="post" id="formQBE" '
            . 'class="lock-page">';
        $var_58 .= '<fieldset>';

        if ($GLOBALS['cfgRelation']['savedsearcheswork']) {
            $var_58 .= $var_28->fn_38();
        }

        $var_58 .= '<table class="data" style="width: 100%;">';
        
        $var_58 .= $var_28->fn_10();
        $var_58 .= $var_28->fn_11();
        $var_58 .= $var_28->fn_14();
        $var_58 .= $var_28->fn_12();
        $var_58 .= $var_28->fn_13();
        $var_58 .= $var_28->fn_15();
        $var_58 .= $var_28->fn_23();
        $var_58 .= $var_28->fn_20();
        $var_58 .= '</table>';
        $var_28->var_24--;
        $var_186 = array();
        $var_186['db'] = $var_28->var_0;
        $var_186['criteriaColumnCount'] = $var_28->var_23;
        $var_186['rows'] = $var_28->var_24;
        $var_58 .= PMA_URL_getHiddenInputs($var_186);
        $var_58 .= '</fieldset>';
        
        $var_58 .= $var_28->fn_17();
        
        $var_58 .= $var_28->fn_18();
        $var_58 .= '</form>';
        $var_58 .= '<form action="db_qbe.php" method="post" class="lock-page">';
        $var_58 .= PMA_URL_getHiddenInputs(array('db' => $var_28->var_0));
        
        $var_58 .= '<div class="floatleft" style="width:50%">';
        $var_58 .= '<fieldset>';
        $var_58 .= '<legend>'
            . sprintf(
                __('SQL query on database <b>%s</b>:'),
                Util::getDbLink($var_28->var_0)
            );
        $var_58 .= '</legend>';
        $var_187 = 'ltr';
        $var_58 .= '<textarea cols="80" name="sql_query" id="textSqlquery"'
            . ' rows="' . ((count($var_28->var_1) > 30) ? '15' : '7') . '"'
            . ' dir="' . $var_187 . '">';

        if (empty($var_28->var_15)) {
            $var_28->var_15 = array();
        }
        $var_58 .= $var_28->fn_36($var_28->var_15);

        $var_58 .= '</textarea>';
        $var_58 .= '</fieldset>';
        
        $var_58 .= '<fieldset class="tblFooters">';
        $var_58 .= '<input type="hidden" name="submit_sql" value="1" />';
        $var_58 .= '<input type="submit" value="' . __('Submit Query') . '" />';
        $var_58 .= '</fieldset>';
        $var_58 .= '</div>';
        $var_58 .= '</form>';
        return $var_58;
    }

    
    private function fn_38()
    {
        $var_58 = __('Saved bookmarked search:');
        $var_58 .= ' <select name="searchId" id="searchId">';
        $var_58 .= '<option value="">' . __('New bookmark') . '</option>';

        $var_35 = $var_28->fn_1();
        $var_188 = null;
        $var_189 = null;
        if (null != $var_35) {
            $var_188 = $var_35->getId();
            $var_189 = $var_35->getSearchName();
        }

        foreach ($var_28->var_25 as $var_192 => $var_193) {
            $var_58 .= '<option value="' . htmlspecialchars($var_192)
                . '" ' . (
                $var_192 == $var_188
                    ? 'selected="selected" '
                    : ''
                )
                . '>'
                . htmlspecialchars($var_193)
                . '</option>';
        }
        $var_58 .= '</select>';
        $var_58 .= '<input type="text" name="searchName" id="searchName" '
            . 'value="' . htmlspecialchars($var_189) . '" />';
        $var_58 .= '<input type="hidden" name="action" id="action" value="" />';
        $var_58 .= '<input type="submit" name="saveSearch" id="saveSearch" '
            . 'value="' . __('Create bookmark') . '" />';
        if (null !== $var_188) {
            $var_58 .= '<input type="submit" name="updateSearch" '
                . 'id="updateSearch" value="' . __('Update bookmark') . '" />';
            $var_58 .= '<input type="submit" name="deleteSearch" '
                . 'id="deleteSearch" value="' . __('Delete bookmark') . '" />';
        }

        return $var_58;
    }

    
    private function fn_5()
    {
        
        $var_38 = PMA_ifSetOr(
            $var_31['criteriaColumnCount'],
            3,
            'numeric'
        );
        $var_194 = PMA_ifSetOr(
            $var_31['criteriaColumnAdd'],
            0,
            'numeric'
        );
        $var_28->var_3 = max(
            $var_38 + $var_194,
            0
        );

        
        $var_195 = PMA_ifSetOr($var_31['rows'], 0, 'numeric');
        $var_196 = PMA_ifSetOr($var_31['criteriaRowAdd'], 0, 'numeric');
        $var_28->var_4 = max($var_195 + $var_196, 0);

        return $var_38;
    }

    
    private function fn_29(
        $var_117, $var_119, $var_120, $var_121
    ) {
        
        if (isset($var_120) && count($var_120) > 0) {
            $var_127 = $var_120;
            $var_128 = 1;
            return array($var_127, $var_128);
        } elseif (isset($var_121) && count($var_121) > 0) {
            $var_127 = $var_121;
            $var_128 = 1;
            return array($var_127, $var_128);
        } elseif (isset($var_119) && count($var_119) > 0) {
            $var_127 = $var_119;
            $var_128 = 0;
            return array($var_127, $var_128);
        } else {
            $var_127 = $var_117;
            $var_128 = 0;
            return array($var_127, $var_128);
        }
    }
}
