<?php




class var_0 extends var_1
{
    public $var_2 = 'html';

    protected $var_3;
    protected $var_4;
    protected $var_5      = array();
    protected $var_6       = array();
    protected $var_7    = array();
    protected $var_8  = array();
    protected $var_9   = array();
    protected $var_10 = '';
    protected $var_11 = array();
    protected $var_12    = array();
    protected $var_13      = array();
    protected $var_14 = "<html>\n<head><title></title></head>\n<body></body>\n</html>";
    protected $var_15 = '';
    protected $var_16 = '';
    protected $var_17   = '';
    protected $var_18 = '';
    protected $var_19;
    protected $var_20 = var_21;
    protected $var_22 = false;

    
    protected $var_23 = array(
        'contact'      => 'showcontact',
        'contactadd'   => 'addcontact',
        'contactedit'  => 'editcontact',
        'identityedit' => 'editidentity',
        'messageprint' => 'printmessage',
    );

    
    public function fn_0($var_24 = null, $var_25 = false)
    {
        parent::fn_0();

        $var_26->var_22 = $var_26->var_27->get('devel_mode');

        $var_26->fn_1('task', $var_24);
        $var_26->fn_1('standard_windows', (bool) $var_26->var_27->get('standard_windows'));
        $var_26->fn_1('locale', $_SESSION['language']);
        $var_26->fn_1('devel_mode', $var_26->var_22);

        
        $var_26->fn_1('cookie_domain', ini_get('session.cookie_domain'));
        $var_26->fn_1('cookie_path', ini_get('session.cookie_path'));
        $var_26->fn_1('cookie_secure', filter_var(ini_get('session.cookie_secure'), var_30));

        
        $var_31 = $var_26->var_27->get('skin');
        $var_26->set_skin($var_31);
        $var_26->fn_1('skin', $var_31);

        $var_26->set_assets_path($var_26->var_27->get('assets_path'), $var_26->var_27->get('assets_dir'));

        if (!empty($_REQUEST['_extwin']))
            $var_26->fn_1('extwin', 1);
        if ($var_26->var_25 || $var_25)
            $var_26->fn_1('framed', 1);

        $var_34 = <<<EOF

EOF;
        
        $var_26->add_script($var_34, 'head_top');
        $var_26->add_script('var '.self::var_36.' = new rcube_webmail();', 'head_top');

        
        $var_26->add_script(self::var_36.'.init();', 'docready');

        $var_26->var_10 = 'program/js/';
        $var_26->include_script('jquery.min.js');
        $var_26->include_script('common.js');
        $var_26->include_script('app.js');

        
        $var_26->add_handlers(array(
            'loginform'       => array($var_26, 'login_form'),
            'preloader'       => array($var_26, 'preloader'),
            'username'        => array($var_26, 'current_username'),
            'message'         => array($var_26, 'message_container'),
            'charsetselector' => array($var_26, 'charset_selector'),
            'aboutcontent'    => array($var_26, 'about_content'),
        ));
    }

    
    public function fn_1($var_39, $var_40, $var_41 = true)
    {
        $var_26->var_89[$var_39] = $var_40;

        if ($var_41 || isset($var_26->var_6[$var_39])) {
            $var_26->var_6[$var_39] = $var_40;
        }
    }

    
    public function var_33($var_42, $var_43 = null)
    {
        if (empty($var_42)) {
            return;
        }

        $var_42 = rtrim($var_42, '/') . '/';

        
        if (!var_44('|^https?:
            
            $this->assets_dir = $path;

            $base = preg_replace('/[?
            $var_45 = rtrim($var_45, '/');

            
            if ($var_46 = intval($var_26->var_27->get('use_secure_urls'))) {
                $var_47  = explode('/', $var_45);
                $var_48   = count($var_47) - 1;
                $var_49 = $var_46 > 1 ? $var_46 : 16; 

                
                
                
                if ($var_48 > -1 && preg_match('/^[a-f0-9]{' . $var_49 . '}$/', $var_47[$var_48])) {
                    $var_42 = '../' . $var_42;
                }
            }
        }

        
        if ($var_43) {
            if ($var_43[0] != '/') {
                $var_43 = realpath(var_21 . $var_43);
            }
            
            $var_26->var_20 = rtrim($var_43, '/') . '/';
        }

        $var_26->var_19 = $var_42;
        $var_26->var_29('var_19', $var_42);
    }

    
    protected function get_pagetitle()
    {
        if (!empty($var_26->var_50)) {
            $var_51 = $var_26->var_50;
        }
        var_52 if ($var_26->var_89['task'] == 'login') {
            $var_51 = $var_26->var_53->gettext(array(
                'name' => 'welcome',
                'vars' => array('product' => $var_26->var_27->get('product_name')
            )));
        }
        var_52 {
            $var_51 = ucfirst($var_26->var_89['task']);
        }

        var_139 $var_51;
    }

    
    var_55 function var_32($var_31)
    {
        
        if (strpos($var_31, '/') !== false || strpos($var_31, "\\") !== false) {
            rcube::raise_error(array(
                    'file'    => var_56,
                    'line'    => var_57,
                    'message' => 'Invalid skin name'
                ), true, false);

            return false;
        }

        $var_58 = false;
        $var_42  = var_21 . 'skins/';

        if (!var_59($var_31) && is_dir($var_42 . $var_31) && is_readable($var_42 . $var_31)) {
            $var_60 = 'var_61/' . $var_31;
            $var_58     = true;
        }
        var_52 {
            $var_60 = $var_26->var_27->get('var_60');
            if (!$var_60) {
                $var_60 = 'skins/' . var_62::var_63;
            }
            $var_58 = !$var_31;
        }

        $var_60 = rtrim($var_60, '/');

        $var_26->var_27->var_64('var_60', $var_60);
        $var_26->var_18 = $var_60;

        
        $var_26->var_9 = array();
        $var_26->load_skin($var_60);

        return $var_58;
    }

    
    private function var_65($var_60)
    {
        $var_26->var_9[] = $var_60;

        
        $var_66 = @file_get_contents(var_21 . $var_60 . '/meta.json');
        $var_66 = @json_decode($var_66, true);

        $var_66['path']  = $var_60;
        $var_67 = explode('/', $var_60);
        $var_68       = end($var_67);

        if (!$var_66['name']) {
            $var_66['name'] = $var_68;
        }

        $var_26->var_61[$var_68] = $var_66;

        if ($var_66['extends']) {
            $var_42 = var_21 . 'skins/';
            if (is_dir($var_42 . $var_66['extends']) && is_readable($var_42 . $var_66['extends'])) {
                $var_26->load_skin('skins/' . $var_66['extends']);
            }
        }
    }

    
    var_55 function var_69($var_39)
    {
        foreach ($var_26->var_9 as $var_60) {
            $var_70 = var_21 . $var_60 . '/templates/' . $var_39 . '.html';
            if ((is_file($var_70) && is_readable($var_70))
                || ($var_26->var_23[$var_39] && $var_26->template_exists($var_26->var_23[$var_39]))
            ) {
                var_139 true;
            }
        }

        var_139 false;
    }

    
    var_55 function var_71($var_72, &$var_60 = null, $var_73 = null)
    {
        $var_9 = $var_26->var_9;
        if ($var_73) {
            array_unshift($var_9, $var_73);
        }

        foreach ($var_9 as $var_60) {
            $var_42 = realpath(var_21 . $var_60 . $var_72);

            if ($var_42 && is_file($var_42)) {
                var_139 $var_60 . $var_72;
            }

            if ($var_26->var_20 != var_21) {
                $var_42 = realpath($var_26->var_20 . $var_60 . $var_72);

                if ($var_42 && is_file($var_42)) {
                    var_139 $var_60 . $var_72;
                }
            }
        }

        var_139 false;
    }

    
    var_55 function var_74($var_75, $var_76)
    {
        $var_26->add_script(self::var_36.".gui_object('$var_75', '$var_76');");
    }

    
    var_55 function var_77()
    {
        $var_78 = func_get_args();
        if (strpos($var_78[0], 'plugin.') !== false)
            $var_26->var_8[] = array('triggerEvent', $var_78[0], $var_78[1]);
        else
            $var_26->var_8[] = $var_78;
    }

    
    var_55 function var_79()
    {
        $var_80 = func_get_args();

        if (count($var_80) == 1 && is_array($var_80[0])) {
            $var_80 = $var_80[0];
        }

        foreach ($var_80 as $var_39) {
            $var_26->var_7[$var_39] = $var_26->var_53->gettext($var_39);
        }
    }

    
    var_55 function var_81($var_3, $var_2='notice', $var_82=null, $var_83=true, $var_84=0)
    {
        if ($var_83 || !$var_26->var_3) {
            if ($var_26->var_53->text_exists($var_3)) {
                if (!empty($var_82))
                    $var_82 = array_map(array('rcube','Q'), $var_82);
                $var_86 = $var_26->var_53->gettext(array('name' => $var_3, 'vars' => $var_82));
            }
            var_52
                $var_86 = $var_3;

            $var_26->var_3 = $var_3;
            $var_26->command('display_message', $var_86, $var_2, $var_84 * 1000);
        }
    }

    
    var_55 function var_87($var_88 = false)
    {
        $var_25 = $var_26->var_25;
        $var_89    = $var_88 ? null : array_intersect_key($var_26->var_89, array('extwin'=>1, 'framed'=>1));

        parent::reset();

        
        $var_26->var_89          = $var_26->var_6 = $var_89;
        $var_26->var_25       = $var_25 || $var_26->var_89['framed'];
        $var_26->var_7    = array();
        $var_26->var_8  = array();
        $var_26->var_11 = array();
        $var_26->var_13      = array();
        $var_26->var_15       = '';
        $var_26->var_16       = '';
        $var_26->var_17         = '';

        
        if (!$var_88) {
            $var_26->fn_0();
        }
    }

    
    var_55 function var_90($var_91 = array(), $var_92 = 1, $var_93 = false)
    {
        if ($var_26->var_89['extwin'])
            $var_91['extwin'] = 1;
        $var_94 = $var_26->var_53->url($var_91, false, false, $var_93);
        header('Location: ' . $var_94);
        var_96;
    }

    
    var_55 function var_97($var_98 = null, $var_96 = true)
    {
        if ($var_98 != 'iframe') {
            
            if ($var_96 != 'recur' && $var_26->var_53->var_99->is_processing('render_page')) {
                rcube::raise_error(array('code' => 505, 'type' => 'php',
                  'file' => var_56, 'line' => var_57,
                  'message' => 'Recursion alert: ignoring output->send()'), true, false);
                return;
            }
            $var_26->parse($var_98, false);
        }
        var_52 {
            $var_26->var_25 = true;
            $var_26->write();
        }

        
        var_101();
        flush();

        if ($var_96) {
            var_96;
        }
    }

    
    public function write($var_102 = '')
    {
        if (!empty($var_26->var_11)) {
            $var_26->fn_1('request_token', $var_26->var_53->get_request_token());
        }

        $var_104 = $var_26->get_js_commands($var_25);

        
        
        if ($var_25) {
            $var_26->var_13      = array();
            $var_26->var_11 = array();
            $var_26->var_15       = '';
            $var_26->var_16       = '';
        }

        
        $var_26->add_script($var_104, 'head_top');

        
        $var_106 = $var_26->var_25 || $var_26->var_89['framed'];
        if (!headers_sent() && $var_106 && ($var_107 = $var_26->var_53->var_27->get('x_frame_options', 'sameorigin'))) {
            if (strtolower($var_107) === 'deny') {
                header('X-Frame-Options: sameorigin', true);
            }
        }

        
        $var_26->_write($var_102, $var_26->var_27->get('skin_path'));
    }

    
    var_108 var_109($var_39 = 'main', $var_96 = true, $var_110 = true)
    {
        $var_111   = false;
        $var_112 = $var_39;
        $var_113 = array();

        $var_26->var_4 = $var_112;

        $var_114 = explode('.', $var_39, 2);
        if (count($var_114) > 1) {
            $var_111   = $var_114[0];
            $var_39     = $var_114[1];
            $var_115 = $var_111 . '/skins/' . $var_26->var_27->get('skin');

            
            foreach ($var_26->var_9 as $var_60) {
                $var_113[] = $var_26->var_53->var_99->var_95 . $var_111 . '/' . $var_60;
            }

            
            if (is_dir($var_26->var_53->var_99->var_116 . $var_111 . '/skins/default')) {
                $var_115 = $var_111 . '/skins/default';
                $var_113[] = $var_26->var_53->var_99->var_95 . $var_115;
            }

            
            $var_26->var_9 = array_merge($var_113, $var_26->var_9);
        }

        
        $var_42 = false;
        foreach ($var_26->var_9 as $var_60) {
            $var_42 = var_21 . "$var_60/templates/$var_39.html";

            
            if (!var_117($var_42) && ($var_118 = $var_26->var_23[$var_112])) {
                $var_42 = var_21 . "$var_60/templates/$var_118.html";

                if (is_readable($var_42)) {
                    rcube::raise_error(array(
                            'code' => 502, 'file' => var_56, 'line' => var_57,
                            'message' => "Using deprecated template '$var_118' in $var_60/templates. Please rename to '$var_112'"
                        ), true, false);
                }
            }

            var_119 (is_readable($var_42)) {
                $var_26->var_27->set('skin_path', $var_60);
                
                $var_26->var_18 = preg_replace('!plugins/\w+/!', '', $var_60);
                $var_115        = preg_replace('!^plugins/!', '', $var_60);
                break;
            }
            var_52 {
                $var_42 = false;
            }
        }

        
        if (!$var_42 || ($var_98 = @file_get_contents($var_42)) === false) {
            rcube::raise_error(array(
                'code' => 404,
                'type' => 'php',
                'line' => var_57,
                'file' => var_56,
                'message' => 'Error loading template for '.$var_112
                ), true, $var_110);

            $var_26->var_9 = var_120($var_26->var_9, count($var_113));
            return false;
        }

        
        
        if ($var_111) {
            $var_98 = preg_replace(
                array('/\bplugins\
                array($this->app->plugins->url, '\\1'.$var_26->var_53->var_99->var_95.$var_115.'/'),
                $var_98
            );
        }

        
        $var_121 = $var_26->parse_conditions($var_98);
        $var_121 = $var_26->parse_xml($var_121);

        
        $var_124 = $var_26->var_53->var_99->exec_hook("render_page", array('template' => $var_112, 'content' => $var_121));

        
        $var_121 = $var_124['content'];
        unset($var_124['content']);

        
        $var_26->var_9 = array_slice($var_26->var_9, count($var_113));

        if (!$var_110) {
            var_139 $var_26->postrender($var_121);
        }

        $var_26->write(trim($var_121));

        if ($var_96) {
            var_96;
        }
    }

    
    protected function get_js_commands(&$var_25 = null)
    {
        $var_126             = '';
        $var_127 = 0;
        $var_128    = array();

        
        
        if (!$var_26->var_25 && !empty($var_26->var_6)) {
            $var_128[] = array('set_env', $var_26->var_6);
        }
        if (!empty($var_26->var_7)) {
            $var_128[] = array('add_label', $var_26->var_7);
        }

        
        $var_129 = preg_replace('/[^a-z0-9]/i', '', $_REQUEST['_unlock']);
        if ($var_26->var_25) {
            $var_128[] = array('iframe_loaded', $var_129);
        }
        var_52 if ($var_129) {
            $var_128[] = array('hide_message', $var_129);
        }

        $var_104 = array_merge($var_128, $var_26->var_8);

        foreach ($var_104 as $var_130 => $var_80) {
            $var_131 = array_shift($var_80);
            $var_132 = $var_26->var_25 || preg_match('/^parent\./', $var_131);

            foreach ($var_80 as $var_130 => $var_133) {
                $var_80[$var_130] = self::json_serialize($var_133, $var_26->var_22);
            }

            if ($var_132) {
                $var_127++;
                $var_131        = preg_replace('/^parent\./', '', $var_131);
                $var_134 = 'if (window.parent && parent.' . self::var_36 . ') parent.';
                $var_131        = $var_134 . self::var_36 . '.' . $var_131;
            }
            var_52 {
                $var_131 = self::var_36 . '.' . $var_131;
            }

            $var_126 .= sprintf("%s(%s);\n", $var_131, implode(',', $var_80));
        }

        $var_25 = $var_134 && $var_127 == count($var_104);

        
        if ($var_25) {
            $var_126 = "if (window.parent && parent." . self::var_36 . ") {\n"
                . str_replace($var_134, "\tparent.", $var_126)
                . "}\n";
        }

        var_139 $var_126;
    }

    
    var_55 function var_135($var_136, $var_137 = false)
    {
        if ($var_136[0] == '/') {
            if ($var_137 && ($var_138 = $var_26->get_skin_file($var_136, $var_60))) {
                var_139 $var_138;
            }

            var_139 $var_26->var_18 . $var_136;
        }

        var_139 $var_136;
    }

    
    var_55 function var_140($var_141, $var_3)
    {
        global $__page_content, $var_142, $var_143;

        $var_142    = $var_141;
        $var_143 = $var_3;

        var_96;
    }

    
    public function asset_url($var_42)
    {
        
        

        var_119 (!$var_26->var_19 || in_array($var_42[0], array('?', '/', '.')) || strpos($var_42, ':
            return $path;
        }

        return $this->assets_path . $path;
    }


    

    
    protected function parse_with_globals($input)
    {
        $GLOBALS['var_144']   = var_145::quote(var_146);
        $GLOBALS['__comm_path'] = html::quote($var_26->var_53->var_147);
        $GLOBALS['__skin_path'] = html::quote($var_26->var_18);

        return preg_replace_callback('/\$(__[a-z0-9_\-]+)/',
            array($var_26, 'globals_callback'), $var_148);
    }

    
    protected function globals_callback($var_149)
    {
        var_139 $GLOBALS[$var_149[1]];
    }

    
    var_150 function fix_paths($var_121)
    {
        var_139 preg_replace_callback(
            '!(src|href|background)=(["\']?)([a-z0-9/_.-]+)(["\'\s>])!i',
            array($var_26, 'file_callback'), $var_121);
    }

    
    var_150 function file_callback($var_149)
    {
        $var_72 = $var_149[3];
        $var_72 = preg_replace('!^/this/!', '/', $var_72);

        
        if ($var_72[0] == '/') {
            $var_72 = $var_26->var_18 . $var_72;
        }

        
        if (preg_match('/\.(js|css)$/', $var_72, $var_151)) {
            $var_72 = $var_26->file_mod($var_72);
        }

        var_139 $var_149[1] . '=' . $var_149[2] . $var_72 . $var_149[4];
    }

    
    var_150 function var_153($var_121)
    {
        var_139 preg_replace_callback(
            '!(src|href|background)=(["\']?)([a-z0-9/_.?=-]+)(["\'\s>])!i',
            array($var_26, 'assets_callback'), $var_121);
    }

    
    var_150 function var_154($var_149)
    {
        $var_72 = $var_26->asset_url($var_149[3]);

        return $var_149[1] . '=' . $var_149[2] . $var_72 . $var_149[4];
    }

    
    var_150 function var_152($var_72)
    {
        $var_156  = false;
        $var_157 = substr($var_72, strrpos($var_72, '.') + 1);

        
        if (!$var_26->var_22 && !preg_match('/\.min\.' . $var_157 . '$/', $var_72)) {
            $var_158 = substr($var_72, 0, strlen($var_157) * -1) . 'min.' . $var_157;
            if ($var_156 = @filemtime($var_26->var_20 . $var_158)) {
                var_139 $var_158 . '?s=' . $var_156;
            }
        }

        if ($var_156 = @filemtime($var_26->var_20 . $var_72)) {
            $var_72 .= '?s=' . $var_156;
        }

        var_139 $var_72;
    }

    
    var_55 function var_159($var_148)
    {
        $var_148 = $var_26->parse_conditions($var_148);
        $var_148 = $var_26->parse_xml($var_148);
        $var_148 = $var_26->postrender($var_148);

        return $var_148;
    }

    
    var_150 function var_122($var_148)
    {
        $var_149 = preg_split('/<roundcube:(if|elseif|else|endif)\s+([^>]+)>\n?/is', $var_148, 2, var_161);
        if ($var_149 && count($var_149) == 4) {
            if (preg_match('/^(else|endif)$/i', $var_149[1])) {
                var_139 $var_149[0] . $var_26->parse_conditions($var_149[3]);
            }

            $var_162 = html::parse_attrib_string($var_149[2]);

            if (isset($var_162['condition'])) {
                $var_163    = $var_26->check_condition($var_162['condition']);
                $var_165 = preg_split('/<roundcube:(elseif|else|endif)\s+([^>]+)>\n?/is', $var_149[3], 2, var_161);

                if ($var_163) {
                    $var_166 = $var_165[0];
                    if ($var_165[1] != 'endif') {
                        $var_166 .= preg_replace('/.*<roundcube:endif\s+[^>]+>\n?/Uis', '', $var_165[3], 1);
                    }
                    var_52 {
                        $var_166 .= $var_165[3];
                    }
                }
                var_52 {
                    $var_166 = "<roundcube:$var_165[1] $var_165[2]>" . $var_165[3];
                }

                var_139 $var_149[0] . $var_26->parse_conditions($var_166);
            }

            var_167::raise_error(array(
                    'code' => 500, 'line' => var_57, 'file' => var_56,
                    'message' => "Unable to parse conditional tag " . $var_149[2]
                ), true, false);
        }

        var_139 $var_148;
    }

    
    var_150 function var_164($var_168)
    {
        var_139 $var_26->eval_expression($var_168);
    }

    
    var_150 function var_169($var_149)
    {
        $var_126    = $var_149[0];
        $var_162 = html::parse_attrib_string($var_149[1]);

        if (strtolower($var_162['method']) == 'post') {
            $var_170 = new class_0(array('name' => '_token', 'value' => $var_26->var_53->get_request_token()));
            $var_126 .= "\n" . $var_170->show();
        }

        var_139 $var_126;
    }

    
    var_150 function var_172($var_173)
    {
        $var_173 = preg_replace(
            array(
                '/session:([a-z0-9_]+)/i',
                '/config:([a-z0-9_]+)(:([a-z0-9_]+))?/i',
                '/env:([a-z0-9_]+)/i',
                '/request:([a-z0-9_]+)/i',
                '/cookie:([a-z0-9_]+)/i',
                '/browser:([a-z0-9_]+)/i',
                '/template:name/i',
            ),
            array(
                "\$_SESSION['\\1']",
                "\$this->app->config->get('\\1',rcube_utils::get_boolean('\\3'))",
                "\$this->env['\\1']",
                "rcube_utils::get_input_value('\\1', rcube_utils::INPUT_GPC)",
                "\$_COOKIE['\\1']",
                "\$this->browser->{'\\1'}",
                "'{$var_26->var_4}'",
            ),
            $var_173
        );

        
        
        return eval("return ($var_173);");
    }

    
    var_150 function var_123($var_148)
    {
        var_139 preg_replace_callback('/<roundcube:([-_a-z]+)\s+((?:[^>]|\\\\>)+)(?<!\\\\)>/Ui', array($var_26, 'xml_command'), $var_148);
    }

    
    var_150 function var_174($var_149)
    {
        $var_77 = strtolower($var_149[1]);
        $var_162  = html::parse_attrib_string($var_149[2]);

        
        if (!empty($var_162['condition']) && !$var_26->check_condition($var_162['condition'])) {
            var_139 '';
        }

        
        if ($var_77 != 'button' && !empty($var_162['title']) && $var_26->var_53->text_exists($var_162['title'])) {
            $var_162['title'] = $var_26->var_53->gettext($var_162['title']);
        }
        if ($var_77 != 'button' && !empty($var_162['summary']) && $var_26->var_53->text_exists($var_162['summary'])) {
            $var_162['summary'] = $var_26->var_53->gettext($var_162['summary']);
        }

        
        switch ($var_77) {
            
            case 'button':
                if ($var_162['name'] || $var_162['command']) {
                    var_139 $var_26->button($var_162);
                }
                var_178;

            
            case 'frame':
                return $var_26->frame($var_162);
                break;

            
            case 'label':
                if ($var_162['expression'])
                    $var_162['name'] = $var_26->eval_expression($var_162['expression']);

                if ($var_162['name'] || $var_162['command']) {
                    $var_82 = $var_162 + array('product' => $var_26->var_27->get('product_name'));
                    unset($var_82['name'], $var_82['command']);

                    $var_176   = $var_26->var_53->gettext($var_162 + array('vars' => $var_82));
                    $var_177 = !empty($var_162['quoting']) ? strtolower($var_162['quoting']) : (rcube_utils::get_boolean((string)$var_162['html']) ? 'no' : '');

                    
                    if ($var_162['noshow']) {
                        var_139 '';
                    }

                    switch ($var_177) {
                        case 'no':
                        case 'raw':
                            break;
                        case 'javascript':
                        case 'js':
                            $var_176 = rcube::JQ($var_176);
                            break;
                        default:
                            $var_176 = html::quote($var_176);
                            break;
                    }

                    var_139 $var_176;
                }
                var_178;

            case 'var_79':
                $var_26->add_label($var_162['name']);
                break;

            
            case 'include':
                $var_182 = $var_26->var_18;
                if (!var_59($var_162['var_60'])) $var_162['skinpath'] = $var_162['var_60'];
                if ($var_42 = $var_26->get_skin_file($var_162['file'], $var_60, $var_162['skinpath'])) {
                    
                    $var_26->var_18 = preg_replace('!plugins/\w+/!', '', $var_60);
                    $var_42 = realpath(var_21 . $var_42);
                }

                if (is_readable($var_42)) {
                    if ($var_26->var_27->get('skin_include_php')) {
                        $var_179 = $var_26->include_php($var_42);
                    }
                    var_52 {
                      $var_179 = file_get_contents($var_42);
                    }
                    $var_179 = $var_26->parse_conditions($var_179);
                    $var_179 = $var_26->parse_xml($var_179);
                    $var_179 = $var_26->fix_paths($var_179);
                    $var_26->var_18 = $var_182;
                    return $var_179;
                }
                var_178;

            case 'var_111.include':
                $hook = $this->app->plugins->exec_hook("template_plugin_include", $attrib);
                return $hook['var_183'];

            
            case 'var_184':
                if ($var_162['name'] && $var_162['id']) {
                    $var_26->command('gui_container', $var_162['name'], $var_162['id']);
                    
                    $var_124 = $var_26->var_53->var_99->exec_hook("template_container", $var_162);
                    return $var_124['content'];
                }
                var_178;

            
            case 'object':
                $object  = strtolower($var_162['name']);
                $var_183 = '';

                
                if (($var_185 = $var_26->var_186[$object]) && is_array($var_185)) {
                    if (is_callable($var_185)) {
                        
                        
                        
                        $var_187 = empty($var_162['src']);
                        $var_183  = call_user_func($var_185, $var_162);
                    }
                }
                
                var_52 if (function_exists($var_185)) {
                    $var_183 = call_user_func($var_185, $var_162);
                }
                var_52 if ($var_188 == 'doctype') {
                    $var_183 = html::doctype($var_162['value']);
                }
                var_52 if ($var_188 == 'logo') {
                    $var_162 += array('alt' => $var_26->xml_command(array('', 'object', 'name="productname"')));

                    if ($var_189 = $var_26->var_27->get('skin_logo')) {
                        if (is_array($var_189)) {
                            if ($var_190 = $var_189[$var_26->var_4]) {
                                $var_162['src'] = $var_190;
                            }
                            var_191 ($var_190 = $var_189['*']) {
                                $var_162['src'] = $var_190;
                            }
                        }
                        var_52 {
                            $var_162['src'] = $var_189;
                        }
                    }

                    $var_183 = html::img($var_162);
                }
                var_52 if ($var_188 == 'productname') {
                    $var_39 = $var_26->var_27->get('product_name', 'Roundcube Webmail');
                    $var_183 = html::quote($var_39);
                }
                var_52 if ($var_188 == 'version') {
                    $var_192 = (string)var_146;
                    if (is_file(var_21 . '.svn/entries')) {
                        if (preg_match('/Revision:\s(\d+)/', @shell_exec('svn info'), $var_193))
                          $var_192 .= ' [SVN r'.$var_193[1].']';
                    }
                    var_52 if (is_file(var_21 . '.git/index')) {
                        if (preg_match('/Date:\s+([^\n]+)/', @shell_exec('git log -1'), $var_193)) {
                            if ($var_194 = date('Ymd.Hi', strtotime($var_193[1]))) {
                                $var_192 .= ' [GIT '.$var_194.']';
                            }
                        }
                    }
                    $var_183 = html::quote($var_192);
                }
                var_52 if ($var_188 == 'steptitle') {
                  $var_183 = html::quote($var_26->get_pagetitle());
                }
                var_52 if ($var_188 == 'pagetitle') {
                    if ($var_26->var_22 && !empty($_SESSION['username']))
                        $var_51 = $_SESSION['username'].' :: ';
                    else if ($var_196 = $var_26->var_27->get('product_name'))
                        $var_51 = $var_196 . ' :: ';
                    else
                        $var_51 = '';
                    $var_51 .= $var_26->get_pagetitle();
                    $var_183 = html::quote($var_51);
                }

                
                $var_124 = $var_26->var_53->var_99->exec_hook("template_object_$var_188", $var_162 + array('content' => $var_183));

                if (var_197($var_124['var_183']) && !empty($var_187)) {
                    $var_198                 = uniqid('TEMPLOBJECT:', true);
                    $var_26->var_5[$var_198] = $var_124['content'];
                    $var_124['content']           = $var_198;
                }

                var_139 $var_124['content'];

            
            case 'var_199':
                return var_145::quote($var_26->eval_expression($var_162['expression']));

            
            case 'var':
                $var = explode(':', $var_162['name']);
                $var_39 = $var[1];
                $var_40 = '';

                switch ($var[0]) {
                    case 'env':
                        $var_40 = $var_26->var_89[$var_39];
                        break;
                    case 'config':
                        $var_40 = $var_26->var_27->get($var_39);
                        if (is_array($var_40) && $var_40[$_SESSION['storage_host']]) {
                            $var_40 = $var_40[$_SESSION['storage_host']];
                        }
                        var_178;
                    case 'request':
                        $var_40 = rcube_utils::get_input_value($var_39, var_200::var_201);
                        break;
                    case 'session':
                        $var_40 = $_SESSION[$var_39];
                        break;
                    case 'cookie':
                        $var_40 = htmlspecialchars($_COOKIE[$var_39]);
                        break;
                    case 'browser':
                        $var_40 = $var_26->var_202->{$var_39};
                        break;
                }

                var_119 (is_array($var_40)) {
                    $var_40 = implode(', ', $var_40);
                }

                var_139 var_145::quote($var_40);

            case 'var_203':
                return $var_26->form_tag($var_162);
        }
        return '';
    }

    
    protected function var_180($var_72)
    {
        ob_start();
        $var_126 = ob_get_contents();
        ob_end_clean();

        return $var_126;
    }

    
    var_150 function var_160($var_121)
    {
        
        foreach ($var_26->var_5 as $var_205 => $var_206) {
            $var_121 = str_replace($var_205, $var_206, $var_121, $var_207);
            if ($var_207) {
                $var_26->var_5[$var_205] = null;
            }
        }

        
        $var_121 = preg_replace_callback('/<form\s+([^>]+)>/Ui', array($var_26, 'alter_form_tag'), $var_121);

        return $var_121;
    }

    
    var_55 function var_208($var_162)
    {
        static $var_209   = 100;
        static $var_210 = null;

        
        $var_211 = array('compose', 'list', 'preferences', 'folders', 'identities');

        if (!($var_162['command'] || $var_162['name'] || $var_162['href'])) {
            var_139 '';
        }

        
        if ($var_162['type']) {
            $var_162['type'] = strtolower($var_162['type']);
            if ($var_212 = strpos($var_162['type'], '-menuitem')) {
                $var_162['type'] = substr($var_162['type'], 0, -9);
                $var_213 = true;
            }
        }
        var_52 {
            $var_162['type'] = ($var_162['image'] || $var_162['imagepas'] || $var_162['imageact']) ? 'image' : 'link';
        }

        $var_77 = $var_162['command'];

        if ($var_162['task']) {
            $var_214 = $var_77 = $var_162['task'] . '.' . $var_77;
        }
        var_52 {
            $var_214 = ($var_26->var_89['task'] ? $var_26->var_89['task'] . '.' : '') . $var_77;
        }

        if ($var_210 === null) {
            $var_210 = (array) $var_26->var_27->get('disabled_actions');
        }

        
        if (in_array($var_214, $var_210)) {
            var_139 '';
        }

        if (!$var_162['image']) {
            $var_162['image'] = $var_162['imagepas'] ? $var_162['imagepas'] : $var_162['imageact'];
        }

        if (!$var_162['id']) {
            $var_162['id'] =  sprintf('rcmbtn%d', $var_209++);
        }
        
        if ($var_162['title']) {
            $var_162['title'] = html::quote($var_26->var_53->gettext($var_162['title'], $var_162['domain']));
        }
        if ($var_162['label']) {
            $var_162['label'] = html::quote($var_26->var_53->gettext($var_162['label'], $var_162['domain']));
        }
        if ($var_162['alt']) {
            $var_162['alt'] = html::quote($var_26->var_53->gettext($var_162['alt'], $var_162['domain']));
        }

        
        if (!$var_162['role']) {
            $var_162['role'] = 'button';
        }
        if (!empty($var_162['class']) && !empty($var_162['classact']) || !empty($var_162['imagepas']) && !empty($var_162['imageact'])) {
            if (array_key_exists('tabindex', $var_162))
                $var_162['data-tabindex'] = $var_162['tabindex'];
            $var_162['tabindex'] = '-1';  
            $var_162['aria-disabled'] = 'true';
        }

        
        var_119 ($var_26->var_202->var_215 && !$var_162['title'] && $var_162['alt']) {
            $var_162['title'] = $var_162['alt'];
        }

        
        var_119 (!isset($var_162['alt'])) {
            $var_162['alt'] = '';
        }

        
        var_119 ($var_162['command']) {
            $var_26->add_script(sprintf(
                "%s.register_button('%s', '%s', '%s', '%s', '%s', '%s');",
                self::var_36,
                $var_77,
                $var_162['id'],
                $var_162['type'],
                $var_162['imageact'] ? $var_26->abs_url($var_162['imageact']) : $var_162['classact'],
                $var_162['imagesel'] ? $var_26->abs_url($var_162['imagesel']) : $var_162['classsel'],
                $var_162['imageover'] ? $var_26->abs_url($var_162['imageover']) : ''
            ));

            
            if (in_array($var_162['command'], var_216::$var_217)) {
                $var_162['href']    = $var_26->var_53->url(array('task' => $var_162['command']));
                $var_162['onclick'] = sprintf("return %s.command('switch-task','%s',this,event)", self::var_36, $var_162['command']);
            }
            var_52 if ($var_162['task'] && in_array($var_162['task'], var_216::$var_217)) {
                $var_162['href'] = $var_26->var_53->url(array('action' => $var_162['command'], 'task' => $var_162['task']));
            }
            var_52 if (in_array($var_162['command'], $var_211)) {
                $var_162['href'] = $var_26->var_53->url(array('action' => $var_162['command']));
            }
            var_52 if (($var_162['command'] == 'permaurl' || $var_162['command'] == 'extwin') && !empty($var_26->var_89['permaurl'])) {
              $var_162['href'] = $var_26->var_89['permaurl'];
            }
        }

        
        var_119 (!$var_162['href']) {
            $var_162['href'] = '
        }
        if ($attrib['var_24']) {
            if ($var_162['classact'])
                $var_162['class'] = $var_162['classact'];
        }
        var_52 if ($var_77 && !$var_162['onclick']) {
            $var_162['onclick'] = sprintf(
                "return %s.command('%s','%s',this,event)",
                self::var_36,
                $var_77,
                $var_162['prop']
            );
        }

        $var_126 = '';

        
        if ($var_162['var_2'] == 'image') {
            $var_218 = html::attrib_string(
                $var_162,
                array(
                    'style', 'class', 'id', 'width', 'height', 'border', 'hspace',
                    'vspace', 'align', 'alt', 'tabindex', 'title'
                )
            );
            $var_219 = sprintf('<img src="%s"%s />', $var_26->abs_url($var_162['image']), $var_218);
            if ($var_162['label']) {
                $var_219 .= ' '.$var_162['label'];
            }
            $var_220 = array('href', 'onclick', 'onmouseover', 'onmouseout', 'onmousedown', 'onmouseup', 'target');
        }
        var_52 if ($var_162['type'] == 'link') {
            $var_219 = isset($var_162['content']) ? $var_162['content'] : ($var_162['label'] ? $var_162['label'] : $var_162['command']);
            $var_220 = array_merge(var_145::$var_221, array('href', 'onclick', 'tabindex', 'target'));
            if ($var_162['innerclass'])
                $var_219 = html::span($var_162['innerclass'], $var_219);
        }
        var_52 if ($var_162['type'] == 'input') {
            $var_162['type'] = 'button';

            if ($var_162['label']) {
                $var_162['value'] = $var_162['label'];
            }
            if ($var_162['command']) {
              $var_162['disabled'] = 'disabled';
            }

            $var_126 = html::tag('input', $var_162, null, array('type', 'value', 'onclick', 'id', 'class', 'style', 'tabindex', 'disabled'));
        }

        
        var_119 ($var_219) {
            $var_218 = html::attrib_string($var_162, $var_220);
            $var_126 = sprintf('<a%s>%s</a>', $var_218, $var_219);
        }

        var_119 ($var_162['wrapper']) {
            $var_126 = html::tag($var_162['wrapper'], null, $var_126);
        }

        var_119 ($var_213) {
            $var_222 = $var_162['menuitem-class'] ? ' class="' . $var_162['menuitem-class'] . '"' : '';
            $var_126   = '<li role="menuitem"' . $var_222 . '>' . $var_126 . '</li>';
        }

        var_139 $var_126;
    }

    
    var_55 function var_37($var_72, $var_223='head')
    {
        var_119 (!preg_match('|^https?:
            $file = $this->file_mod($this->scripts_path . $file);
        }

        if (!is_array($this->script_files[$position])) {
            $this->script_files[$position] = array();
        }

        if (!in_array($file, $this->script_files[$position])) {
            $this->script_files[$position][] = $file;
        }
    }

    
    public function add_script($script, $position='var_224')
    {
        if (!isset($var_26->var_13[$var_223])) {
            $var_26->var_13[$var_223] = "\n" . rtrim($var_225);
        }
        var_52 {
            $var_26->var_13[$var_223] .= "\n" . rtrim($var_225);
        }
    }

    
    var_55 function var_226($var_72)
    {
        $var_26->var_12[] = $var_72;
    }

    
    var_55 function var_227($var_136)
    {
        $var_26->var_15 .= "\n" . $var_136;
    }

    
    var_55 function var_228($var_136)
    {
        $var_26->var_16 .= "\n" . $var_136;
    }

    
    var_150 function var_229($var_98 = '', $var_18 = '')
    {
        $var_121 = trim($var_98);

        if (empty($var_121)) {
            $var_121   = html::doctype('html5') . "\n" . $var_26->var_14;
            $var_230 = true;
        }

        
        if (empty($var_26->var_50)) {
            $var_26->var_50 = 'Roundcube Mail';
        }

        
        if (!empty($_SESSION['language'])) {
            $var_231 = substr($_SESSION['language'], 0, 2);
            $var_121 = preg_replace('/<html/', '<html lang="' . html::quote($var_231) . '"', $var_121, 1);
            if (!headers_sent()) {
                header('Content-Language: ' . $var_231);
            }
        }

        
        $var_232  = html::quote($var_26->var_50);
        $var_233 = '';
        $var_234 = '';

        
        if (!empty($var_26->var_235)) {
            if (!headers_sent()) {
                header('Content-Type: text/html; charset=' . $var_26->var_235);
            }
            $var_233 = '<meta http-equiv="content-type"';
            $var_233.= ' content="text/html; charset=';
            $var_233.= $var_26->var_235 . '" />'."\n";
        }

        
        var_119 (is_array($var_26->var_11['head'])) {
            foreach ($var_26->var_11['head'] as $var_72) {
                $var_233 .= html::script($var_72);
            }
        }

        $var_236 = $var_26->var_13['head_top'] . $var_26->var_13['head'];
        if (!empty($var_236)) {
            $var_233 .= html::script(array(), $var_236);
        }

        if (!empty($var_26->var_15)) {
            $var_233 .= $var_26->var_15;
        }

        
        if (!empty($var_26->var_13['docready'])) {
            $var_26->add_script('$(document).ready(function(){ ' . $var_26->var_13['docready'] . "\n});", 'foot');
        }

        if (is_array($var_26->var_11['foot'])) {
            foreach ($var_26->var_11['foot'] as $var_72) {
                $var_234 .= html::script($var_72);
            }
        }

        if (!empty($var_26->var_16)) {
            $var_234 .= $var_26->var_16 . "\n";
        }

        if (!empty($var_26->var_13['foot'])) {
            $var_234 .= html::script(array(), $var_26->var_13['foot']);
        }

        
        if ($var_237 = stripos($var_121, '</head>')) {
            $var_233 .= "\n";
        }
        var_52 {
            if (!is_numeric($var_237)) {
                $var_237 = stripos($var_121, '<body');
            }
            var_119 (!is_numeric($var_237) && ($var_237 = stripos($var_121, '<html'))) {
                while ($var_121[$var_237] != '>') {
                    $var_237++;
                }
                $var_237++;
            }
            $var_233 = "<head>\n<title>$var_232</title>\n$var_233\n</head>\n";
        }

        
        var_119 ($var_237) {
            $var_121 = substr_replace($var_121, $var_233, $var_237, 0);
        }
        var_52 {
            $var_121 = $var_233 . $var_121;
        }

        
        var_119 (($var_238 = strripos($var_121, '</body>')) || ($var_238 = strripos($var_121, '</html>'))) {
            $var_121 = substr_replace($var_121, $var_234."\n", $var_238, 0);
        }
        var_52 {
            $var_121 .= "\n".$var_234;
        }

        
        var_119 (!empty($var_26->var_12) && !$var_230
            && (($var_212 = stripos($var_121, '<script ')) || ($var_212 = stripos($var_121, '</head>')))
        ) {
            $var_239 = '';
            foreach ($var_26->var_12 as $var_72) {
                $var_239 .= html::tag('link', array('rel' => 'stylesheet',
                    'type' => 'text/css', 'href' => $var_72, 'nl' => true));
            }
            $var_121 = substr_replace($var_121, $var_239, $var_212, 0);
        }

        $var_121 = $var_26->parse_with_globals($var_26->fix_paths($var_121));

        if ($var_26->var_19) {
            $var_121 = $var_26->var_153($var_121);
        }

        $var_121 = $var_26->postrender($var_121);

        
        $var_124 = $var_26->var_53->var_99->exec_hook("send_page", array('content' => $var_121));
        if (!$var_124['abort']) {
            if ($var_26->var_235 != var_241) {
                
            }
            else {
                
            }
        }
    }

    
    public function frame($var_162, $var_242 = false)
    {
        static $var_243 = 0;

        if (!$var_162['id']) {
            $var_162['id'] = 'rcmframe' . ++$var_243;
        }

        $var_162['name'] = $var_162['id'];
        $var_162['src']  = $var_162['src'] ? $var_26->abs_url($var_162['src'], true) : 'program/resources/blank.gif';

        
        if ($var_242 || $var_162['contentframe']) {
            $var_26->fn_1('contentframe', $var_162['contentframe'] ? $var_162['contentframe'] : $var_162['name']);
            $var_26->fn_1('blankpage', $var_26->asset_url($var_162['src']));
        }

        var_139 html::iframe($var_162);
    }


    

    
    var_55 function var_204($var_162, $var_183 = null)
    {
        if ($var_26->var_89['extwin']) {
            $var_244 = new class_0(array('name' => '_extwin', 'value' => '1'));
            $var_170 = $var_244->show();
        }
        var_52 if ($var_26->var_25 || $var_26->var_89['framed']) {
            $var_244 = new class_0(array('name' => '_framed', 'value' => '1'));
            $var_170 = $var_244->show();
        }

        var_119 (!$var_183) {
            $var_162['noclose'] = true;
        }

        var_139 var_145::tag('form',
            $var_162 + array('action' => $var_26->var_53->var_147, 'method' => "get"),
            $var_170 . $var_183,
            array('id','class','style','name','method','action','enctype','onsubmit')
        );
    }

    
    var_55 function var_245($var_162, $var_183 = '')
    {
        $var_170 = new class_0();
        if ($var_162['task']) {
            $var_170->add(array('name' => '_task', 'value' => $var_162['task']));
        }
        if ($var_162['action']) {
            $var_170->add(array('name' => '_action', 'value' => $var_162['action']));
        }

        
        if ($var_162['form']) {
            if ($var_26->var_25 || $var_26->var_89['framed']) {
                $var_170->add(array('name' => '_framed', 'value' => '1'));
            }

            var_139 $var_170->show() . $var_183;
        }

        var_246($var_162['task'], $var_162['request']);
        $var_162['action'] = './';

        return $var_26->form_tag($var_162, $var_170->show() . $var_183);
    }

    
    var_55 function var_247($var_162)
    {
        static $var_248;

        
        if (!empty($var_248)) {
            var_139 $var_248;
        }

        
        if (strpos($_SESSION['username'], '@')) {
            $var_248 = $_SESSION['username'];
        }
        
        var_52 if ($var_249 = $var_26->var_53->var_250->get_identity()) {
            $var_248 = $var_249['email'];
        }
        var_52 {
            $var_248 = $var_26->var_53->var_250->get_username();
        }

        var_139 var_200::idn_to_utf8($var_248);
    }

    
    var_150 function var_253($var_162)
    {
        $var_254 = $var_26->var_27->get('default_host');
        $var_255 = (int) $var_26->var_27->get('login_autocomplete');

        $_SESSION['temp'] = true;

        
        $var_95 = rcube_utils::get_input_value('_url', var_200::var_256);
        if (empty($var_95) && !preg_match('/_(task|action)=logout/', $_SERVER['QUERY_STRING']))
            $var_95 = $_SERVER['QUERY_STRING'];

        
        $var_162['autocapitalize'] = 'off';

        $var_257 = !empty($var_162['form']) ? $var_162['form'] : 'form';

        
        $var_258 = $var_255 > 0 ? array() : array('autocomplete' => 'off');
        $var_259 = $var_255 > 0 ? array() : array('autocomplete' => 'off');
        $var_260 = $var_255 > 1 ? array() : array('autocomplete' => 'off');

        $var_261   = new class_0(array('name' => '_task', 'value' => 'login'));
        $var_262 = new class_0(array('name' => '_action', 'value' => 'login'));
        $var_263  = new class_0(array('name' => '_timezone', 'id' => 'rcmlogintz', 'value' => '_default_'));
        $var_264    = new class_0(array('name' => '_url', 'id' => 'rcmloginurl', 'value' => $var_95));
        $var_265   = new class_1(array('name' => '_user', 'id' => 'rcmloginuser', 'required' => 'required')
            + $var_162 + $var_258);
        $var_266   = new class_2(array('name' => '_pass', 'id' => 'rcmloginpwd', 'required' => 'required')
            + $var_162 + $var_260);
        $var_267   = null;

        if (is_array($var_254) && count($var_254) > 1) {
            $var_267 = new class_3(array('name' => '_host', 'id' => 'rcmloginhost'));

            foreach ($var_254 as $var_205 => $var_40) {
                if (!is_array($var_40)) {
                    $var_267->add($var_40, (is_numeric($var_205) ? $var_40 : $var_205));
                }
                var_52 {
                    $var_267 = null;
                    break;
                }
            }
        }
        var_52 if (is_array($var_254) && ($var_268 = key($var_254)) !== null) {
            $var_269 = true;
            $var_267 = new class_0(array(
                'name' => '_host', 'id' => 'rcmloginhost', 'value' => is_numeric($var_268) ? $var_254[$var_268] : $var_268) + $var_162);
        }
        var_52 if (empty($var_254)) {
            $var_267 = new class_1(array('name' => '_host', 'id' => 'rcmloginhost')
                + $var_162 + $var_259);
        }

        $var_26->add_gui_object('loginform', $var_257);

        
        $var_270 = new class_4(array('cols' => 2));

        $var_270->add('title', html::label('rcmloginuser', html::quote($var_26->var_53->gettext('username'))));
        $var_270->add('input', $var_265->show(rcube_utils::get_input_value('_user', var_200::var_201)));

        $var_270->add('title', html::label('rcmloginpwd', html::quote($var_26->var_53->gettext('password'))));
        $var_270->add('input', $var_266->show());

        
        if (is_object($var_267) && !$var_269) {
            $var_270->add('title', html::label('rcmloginhost', html::quote($var_26->var_53->gettext('server'))));
            $var_270->add('input', $var_267->show(rcube_utils::get_input_value('_host', var_200::var_201)));
        }

        $var_126  = $var_261->show();
        $var_126 .= $var_262->show();
        $var_126 .= $var_263->show();
        $var_126 .= $var_264->show();
        $var_126 .= $var_270->show();

        if ($var_269) {
            $var_126 .= $var_267->show();
        }

        if (rcube_utils::get_boolean($var_162['submit'])) {
            $var_272 = new class_1(array('type' => 'submit', 'id' => 'rcmloginsubmit',
                'class' => 'button mainaction', 'value' => $var_26->var_53->gettext('login')));
            $var_126 .= html::p('formbuttons', $var_272->show());
        }

        
        if (empty($var_162['form'])) {
            $var_126 = $var_26->form_tag(array('name' => $var_257, 'method' => 'post'), $var_126);
        }

        
        $var_26->include_script('jstz.min.js');

        return $var_126;
    }

    
    var_150 function var_273($var_162)
    {
        $var_274 = preg_split('/[\s\t\n,]+/', $var_162['images'], -1, var_275);
        $var_274 = array_map(array($var_26, 'abs_url'), $var_274);
        $var_274 = array_map(array($var_26, 'asset_url'), $var_274);

        if (empty($var_274) || $_REQUEST['_task'] == 'logout') {
            var_139;
        }

        $var_26->add_script('var images = ' . self::json_serialize($var_274, $var_26->var_22) .';
            for (var i=0; i<images.length; i++) {
                img = new Image();
                img.src = images[i];
            }', 'docready');
    }

    
    var_150 function var_276($var_162)
    {
        
        $var_26->add_label('searching');

        $var_162['name'] = '_q';

        if (empty($var_162['id'])) {
            $var_162['id'] = 'rcmqsearchbox';
        }
        if ($var_162['type'] == 'search' && !$var_26->var_202->var_277) {
            unset($var_162['type'], $var_162['results']);
        }

        $var_278 = new class_1($var_162);
        $var_126     = $var_278->show();

        $var_26->add_gui_object('qsearchbox', $var_162['id']);

        
        if (empty($var_162['form'])) {
            $var_126 = $var_26->form_tag(array(
                    'name'     => "rcmqsearchform",
                    'onsubmit' => self::var_36 . ".command('search'); return false",
                    'style'    => "display:inline"
                ), $var_126);
        }

        var_139 $var_126;
    }

    
    var_150 function var_279($var_162)
    {
        if (isset($var_162['id']) === false) {
            $var_162['id'] = 'rcmMessageContainer';
        }

        $var_26->add_gui_object('message', $var_162['id']);

        return html::div($var_162, '');
    }

    
    var_55 function var_280($var_162)
    {
        
        $var_281 = array('name' => '_charset');
        foreach ($var_162 as $var_282 => $var_40) {
            if (in_array($var_282, array('id', 'name', 'class', 'style', 'size', 'tabindex'))) {
                $var_281[$var_282] = $var_40;
            }
        }

        $var_283 = array(
            'UTF-8'        => 'UTF-8 ('.$var_26->var_53->gettext('unicode').')',
            'US-ASCII'     => 'ASCII ('.$var_26->var_53->gettext('english').')',
            'ISO-8859-1'   => 'ISO-8859-1 ('.$var_26->var_53->gettext('westerneuropean').')',
            'ISO-8859-2'   => 'ISO-8859-2 ('.$var_26->var_53->gettext('easterneuropean').')',
            'ISO-8859-4'   => 'ISO-8859-4 ('.$var_26->var_53->gettext('baltic').')',
            'ISO-8859-5'   => 'ISO-8859-5 ('.$var_26->var_53->gettext('cyrillic').')',
            'ISO-8859-6'   => 'ISO-8859-6 ('.$var_26->var_53->gettext('arabic').')',
            'ISO-8859-7'   => 'ISO-8859-7 ('.$var_26->var_53->gettext('greek').')',
            'ISO-8859-8'   => 'ISO-8859-8 ('.$var_26->var_53->gettext('hebrew').')',
            'ISO-8859-9'   => 'ISO-8859-9 ('.$var_26->var_53->gettext('turkish').')',
            'ISO-8859-10'   => 'ISO-8859-10 ('.$var_26->var_53->gettext('nordic').')',
            'ISO-8859-11'   => 'ISO-8859-11 ('.$var_26->var_53->gettext('thai').')',
            'ISO-8859-13'   => 'ISO-8859-13 ('.$var_26->var_53->gettext('baltic').')',
            'ISO-8859-14'   => 'ISO-8859-14 ('.$var_26->var_53->gettext('celtic').')',
            'ISO-8859-15'   => 'ISO-8859-15 ('.$var_26->var_53->gettext('westerneuropean').')',
            'ISO-8859-16'   => 'ISO-8859-16 ('.$var_26->var_53->gettext('southeasterneuropean').')',
            'WINDOWS-1250' => 'Windows-1250 ('.$var_26->var_53->gettext('easterneuropean').')',
            'WINDOWS-1251' => 'Windows-1251 ('.$var_26->var_53->gettext('cyrillic').')',
            'WINDOWS-1252' => 'Windows-1252 ('.$var_26->var_53->gettext('westerneuropean').')',
            'WINDOWS-1253' => 'Windows-1253 ('.$var_26->var_53->gettext('greek').')',
            'WINDOWS-1254' => 'Windows-1254 ('.$var_26->var_53->gettext('turkish').')',
            'WINDOWS-1255' => 'Windows-1255 ('.$var_26->var_53->gettext('hebrew').')',
            'WINDOWS-1256' => 'Windows-1256 ('.$var_26->var_53->gettext('arabic').')',
            'WINDOWS-1257' => 'Windows-1257 ('.$var_26->var_53->gettext('baltic').')',
            'WINDOWS-1258' => 'Windows-1258 ('.$var_26->var_53->gettext('vietnamese').')',
            'ISO-2022-JP'  => 'ISO-2022-JP ('.$var_26->var_53->gettext('japanese').')',
            'ISO-2022-KR'  => 'ISO-2022-KR ('.$var_26->var_53->gettext('korean').')',
            'ISO-2022-CN'  => 'ISO-2022-CN ('.$var_26->var_53->gettext('chinese').')',
            'EUC-JP'       => 'EUC-JP ('.$var_26->var_53->gettext('japanese').')',
            'EUC-KR'       => 'EUC-KR ('.$var_26->var_53->gettext('korean').')',
            'EUC-CN'       => 'EUC-CN ('.$var_26->var_53->gettext('chinese').')',
            'BIG5'         => 'BIG5 ('.$var_26->var_53->gettext('chinese').')',
            'GB2312'       => 'GB2312 ('.$var_26->var_53->gettext('chinese').')',
        );

        if ($post = var_200::get_input_value('_charset', var_200::var_256)) {
            $var_64 = $post;
        }
        var_52 if (!empty($var_162['selected'])) {
            $var_64 = $var_162['selected'];
        }
        var_52 {
            $var_64 = $var_26->get_charset();
        }

        $var_64 = strtoupper($var_64);
        if (!var_285($var_283[$var_64]) && preg_match('/^[A-Z0-9-]+$/', $var_64)) {
            $var_283[$var_64] = $var_64;
        }

        $var_286 = new class_3($var_281);
        $var_286->var_271(array_values($var_283), array_keys($var_283));

        return $var_286->var_171($var_64);
    }

    
    var_150 function var_287($var_162)
    {
        $var_183 = '';
        $var_288 = array(
            'about.' . $_SESSION['language'] . '.html',
            'about.' . substr($_SESSION['language'], 0, 2) . '.html',
            'about.html',
        );
        foreach ($var_288 as $var_72) {
            $var_289 = var_290 . $var_72;
            if (is_readable($var_289)) {
                $var_183 = file_get_contents($var_289);
                $var_183 = $var_26->parse_conditions($var_183);
                $var_183 = $var_26->parse_xml($var_183);
                break;
            }
        }

        var_139 $var_183;
    }
}
