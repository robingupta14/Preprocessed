<?php




















class var_0 extends var_1 {
    public $var_2 = 'product';
    public $var_3 = array(
        'showall'                         => 'Products - All Products and Categories',
        'showallFeaturedProducts'         => 'Products - Only Featured',
        'showallCategoryFeaturedProducts' => 'Products - Featured Products under current category',
        'showallManufacturers'            => 'Products - By Manufacturer',
        'showTopLevel'                    => 'Product Categories Menu - Show Top Level',
        'showFullTree'                    => 'Product Categories Menu - Show Full Tree',  
        'showallSubcategories'            => 'Product Categories Menu - Subcategories of current category',


        'ecomSearch'                      => 'Product Search - Autocomplete',
        'searchByModel'                   => 'Product Search - By Model',
        'quicklinks'                      => 'Links - User Links',
        'showGiftCards'                   => 'Gift Cards UI',
    );
    protected $var_4 = array(
        'batch_process'               => 'Batch capture order transactions',
        'cleanNonUnicodeProducts'     => 'Clean all non-unicode charset products',
        'copyProduct'                 => "Copy Product",

        'reimport'                    => 'ReImport Products',
        'findDupes'                   => 'Fix Duplicate SEF Names',


        'showallImpropercategorized'  => 'View products in top level categories that should not be',
        'showallUncategorized'        => 'View all uncategorized products',
        'nonUnicodeProducts'          => 'View all non-unicode charset products',
        'process_orders'              => 'Batch capture order transactions',
        'processModelAliases'         => 'Process uploaded model aliases',
        'saveModelAliases'            => 'Save uploaded model aliases',







        'uploadModelAliases'          => 'Upload model aliases',
    );
    
    public $var_5 = array(
        'aggregation',
        'categories',

        'ealerts',
        'facebook',
        'files',
        'rss',
        'tags',
        'twitter',
    );  

    static function fn_0() {
        return gt("e-Commerce Store Front");
    }

    static function fn_1() {
        return gt("Displays the products and categories in your store");
    }

    static function fn_2() {
        return "OIC Group, Inc";
    }

    static function fn_3() {
        return true;
    }

    public function fn_4() {
        return gt('e-Commerce Item');
    }

    static function fn_5() {
        return true;
    }

    static function fn_6() {
        return true;
    }

    function fn_7($var_6 = null, $var_7 = array()) {
        global $var_8, $var_9, $var_10, $var_11;

        if (empty($var_7)) {
            $var_7 = $var_9->var_7;
        }
        parent::fn_7($var_6, $var_7);

        
        $var_12->fn_8();


        if (!empty($var_7['action']) && ($var_7['controller'] == "store" && $var_7['action'] == "showall") ) {

            if (isset($var_7['title']) && is_string($var_7['title'])) {


                $var_14 = $var_8->selectValue('storeCategories', 'id', "sef_url='" . $var_7['title'] . "'");
                $var_16 = $var_8->selectValue('storeCategories', 'is_active', "sef_url='" . $var_7['title'] . "'");
                if (empty($var_16) && !$var_11->isAdmin()) {
                    redirect_to(array("section" => var_18)); 
                }
            } elseif (isset($var_12->var_50['category'])) { 
                $var_14 = $var_12->var_50['category'];
            } else {
                $var_14 = 0;
            }

        } elseif (!empty($var_7['action']) && ($var_7['controller'] == "store" && ($var_7['action'] == "show" || $var_7['action'] == "showByTitle" || $var_7['action'] == "categoryBreadcrumb"))) {

            if (!empty($var_7['id'])) {

                $var_14 = $var_8->selectValue('product_storeCategories', 'storecategories_id', "product_id='" . $var_7['id'] . "'");
            } elseif (!empty($var_7['title'])) {

                $var_19 = $var_8->selectValue('product', 'id', "sef_url='" . $var_7['title'] . "'");
                $var_14 = $var_8->selectValue('product_storeCategories', 'storecategories_id', "product_id='" . $var_19 . "'");
            }
        } elseif (isset($var_12->var_50['show_first_category']) || (!expTheme::inAction() && $var_10 == var_18)) {
            if (!empty($var_12->var_50['show_first_category'])) {
                $var_14 = $var_8->selectValue('storeCategories', 'id', 'lft=1');
            } else {
                $var_14 = null;

            }
        } elseif (!isset($var_12->var_50['show_first_category']) && !expTheme::inAction()) {
            $var_14 = null;

        } else {
            $var_14 = null;
        }

        if (!is_null($var_14)) expSession::set('catid', $var_14);

        
        
        
        
        
        
        
        

        $var_12->var_20 = expSession::get('catid');
        $var_12->var_21 = new class_0($var_12->var_20);
        if ($var_12->var_20) { 
            $var_12->fn_8($var_12->var_21);
        }
    }

    function fn_9() {
        global $var_8, $var_11, $var_9;

        class_17::set('viewable', $var_12->var_7);

        if (empty($var_12->var_21->var_22)) {
            $var_23 = 'SELECT COUNT(DISTINCT p.id) as c FROM ' . $var_8->var_24 . 'product p ';

            $var_25 = 'SELECT DISTINCT p.*, IF(base_price > special_price AND use_special_price=1,special_price, base_price) as price FROM ' . $var_8->var_24 . 'product p ';
            $var_26 = 'JOIN ' . $var_8->var_24 . 'product_storeCategories sc ON p.id = sc.product_id ';
            $var_26 .= 'WHERE ';
            if (!$var_11->isAdmin()) $var_26 .= '(p.active_type=0 OR p.active_type=1) AND ';
            $var_26 .= 'sc.storecategories_id IN (';
            $var_26 .= 'SELECT id FROM ' . $var_8->var_24 . 'storeCategories WHERE rgt BETWEEN ' . $var_12->var_21->var_27 . ' AND ' . $var_12->var_21->var_28 . ')';

            $var_29 = $var_23 . $var_26;
            $var_26 = $var_25 . $var_26;



            $var_30 = !empty($var_12->var_7['order']) ? $var_12->var_7['order'] : $var_12->var_50['orderby'];
            $var_31 = !empty($var_12->var_7['dir']) ? $var_12->var_7['dir'] : $var_12->var_50['orderby_dir'];
            if (empty($var_30)) $var_30 = 'title';
            if (empty($var_31)) $var_31 = 'ASC';
        } else { 
            $var_25 = 'SELECT DISTINCT p.*, er.event_starttime, er.signup_cutoff FROM ' . $var_8->var_24 . 'product p ';
            $var_23 = 'SELECT COUNT(DISTINCT p.id) as c, er.event_starttime, er.signup_cutoff FROM ' . $var_8->var_24 . 'product p ';
            $var_26 = 'JOIN ' . $var_8->var_24 . 'product_storeCategories sc ON p.id = sc.product_id ';
            $var_26 .= 'JOIN ' . $var_8->var_24 . 'eventregistration er ON p.product_type_id = er.id ';
            $var_26 .= 'WHERE sc.storecategories_id IN (';
            $var_26 .= 'SELECT id FROM ' . $var_8->var_24 . 'storeCategories WHERE rgt BETWEEN ' . $var_12->var_21->var_27 . ' AND ' . $var_12->var_21->var_28 . ')';
            if ($var_12->var_21->var_32) {
                $var_26 .= ' AND er.signup_cutoff > ' . time();
            }

            $var_29 = $var_23 . $var_26;
            $var_26 = $var_25 . $var_26;

            $var_30 = !empty($var_12->var_7['order']) ? $var_12->var_7['order'] : 'event_starttime';
            $var_31 = !empty($var_12->var_7['dir']) ? $var_12->var_7['dir'] : 'ASC';
        }

        if (empty($var_9->var_7['title']))  
            $var_9->var_7['title'] = $var_12->var_21->var_33;
        $var_34 = !empty($var_12->var_50['limit']) ? $var_12->var_50['limit'] : (!empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : 10);
        if ($var_12->var_21->find('count') > 0) { 
            $var_36 = new class_2(array(
                'model_field' => 'product_type',
                'sql'         => $var_26,
                'count_sql'   => $var_29,
                'limit'       => $var_34,
                'order'       => $var_30,
                'dir'         => $var_31,
                'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
                'controller'  => $var_12->var_7['controller'],
                'action'      => $var_12->var_7['action'],
                'columns'     => array(
                    gt('Model 
                    gt('var_37 var_38') => 'title',
                    gt('Price')        => 'price'
                ),
            ));
        } else { 
            $var_36 = new class_2(array(
                'model_field' => 'product_type',
                'sql'         => 'SELECT * FROM ' . $var_8->var_24 . 'product WHERE 1',
                'limit'       => $var_34,
                'order'       => $var_30,
                'dir'         => $var_31,
                'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
                'controller'  => $var_12->var_7['controller'],
                'action'      => $var_12->var_7['action'],
                'columns'     => array(
                    gt('Model 
                    gt('var_37 var_38') => 'title',
                    gt('Price')        => 'price'
                ),
            ));
        }

        $var_39 = $var_12->var_21->pathToNode();
        $var_41 = ($var_12->var_20 == 0) ? $var_12->var_21->getTopLevel(null, false, true) : $var_12->var_21->getChildren(null, false, true);

        $var_44 = "SELECT DISTINCT p.* FROM " . $var_8->var_24 . "product p JOIN " . $var_8->var_24 . "product_storeCategories sc ON p.id = sc.product_id WHERE sc.storecategories_id=" . $var_12->var_21->var_45 . " ORDER BY rank ASC";
        
        $var_46 = $var_9->var_47;

        assign_to_template(array(
            'page'             => $var_36,
            'defaultSort'      => $var_46,
            'ancestors'        => $var_39,
            'categories'       => $var_41,
            'current_category' => $var_12->var_21,
            'rerankSQL'        => $var_44
        ));
        $var_12->fn_10();
    }

    function fn_8($var_21 = null) {

        
        if (is_object($var_21)) {
            $var_49 = new class_3(expCore::makeLocation("storeCategory","@store-" . $var_21->var_45,""));
        } elseif (empty($var_12->var_50)) {  
            $var_51 = new class_3(expCore::makeLocation("ecomconfig","@globalstoresettings",""));
            $var_12->var_50 = $var_51->var_50;
            return;
        }

        
        $var_50 = new class_3(expCore::makeLocation("ecomconfig","@globalstoresettings",""));

        
        $var_12->var_50 = empty($var_49->var_50) || @$var_49->var_50['use_global'] == 1 ?  @array_merge($var_50->var_50, $var_12->var_50) :  @array_merge($var_50->var_50, $var_12->var_50, $var_49->var_50);

        
        
        if (empty($var_12->var_50['images_per_row'])) {
            $var_12->var_50['images_per_row'] = 3;
        }
    }

    
    function fn_11() {
        $var_12->var_7['controller'] = 'eventregistration';
        redirect_to($var_12->var_7);

        
        $var_26 = 'SELECT DISTINCT p.*, er.event_starttime, er.signup_cutoff FROM ' . var_52 . '_product p ';
        $var_26 .= 'JOIN ' . var_52 . '_eventregistration er ON p.product_type_id = er.id ';
        $var_26 .= 'WHERE 1 AND er.signup_cutoff > ' . time();

        $var_34 = empty($var_12->var_50['event_limit']) ? 10 : $var_12->var_50['event_limit'];
        $var_30 = 'eventdate';
        $var_31 = 'ASC';

        $var_36 = new class_2(array(
            'model_field' => 'product_type',
            'sql'         => $var_26,
            'limit'       => $var_34,
            'order'       => $var_30,
            'dir'         => $var_31,
            'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller'  => $var_12->var_7['controller'],
            'action'      => $var_12->var_7['action'],
            'columns'     => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        assign_to_template(array(
            'page' => $var_36
        ));
    }

    
    function fn_12() {
        $var_12->var_7['controller'] = 'eventregistration';
        redirect_to($var_12->var_7);

        
        global $var_8, $var_11;

        class_17::set('viewable', $var_12->var_7);

        $var_53 = isset($var_12->var_7['time']) ? $var_12->var_7['time'] : time();
        assign_to_template(array(
            'time' => $var_53
        ));




        $var_54 = getdate($var_53);
        $var_55 = getdate(time());
        if ($var_54['mon'] != $var_55['mon']) $var_55['mday'] = -10;
        

        $var_56 = -1;

        $var_57 = mktime(0, 0, 0, $var_54['mon'], 1, $var_54['year']);
        $var_58 = intval(date('W', $var_57));
        if ($var_58 >= 52 && $var_54['mon'] == 1) $var_58 = 1;
        $var_59 = getdate($var_57);










        $var_72[$var_58] = array(); 
        $var_73[$var_58] = array();
        if (($var_59['wday'] == 0) && (var_60 == 1)) {
            for ($var_61 = -6; $var_61 < (1 - var_60); $var_61++) {
                $var_72[$var_58][$var_61] = array();
                $var_73[$var_58][$var_61] = -1;
            }
            $var_62 = $var_59['wday'] + 7; 
        } else {
            for ($var_61 = 1 - $var_59['wday']; $var_61 < (1 - var_60); $var_61++) {
                $var_72[$var_58][$var_61] = array();
                $var_73[$var_58][$var_61] = -1;
            }
            $var_62 = $var_59['wday']; 
        }
        
        $var_63 = date('t', $var_53);

        for ($var_61 = 1; $var_61 <= $var_63; $var_61++) {
            $var_64 = mktime(0, 0, 0, $var_54['mon'], $var_61, $var_54['year']);
            if ($var_61 == $var_55['mday']) $var_56 = $var_58;



            $var_65 = new class_4();


            if ($var_11->isAdmin()) {
                $var_67 = $var_65->find('all', 'product_type="eventregistration"', "title ASC");
            } else {
                $var_67 = $var_65->find('all', 'product_type="eventregistration" && active_type=0', "title ASC");
            }
            $var_68 = array();

            foreach ($var_67 as $var_69) {
                
                if ($var_69->var_70 >= expDateTime::startOfDayTimestamp($var_64) && $var_69->var_70 <= expDateTime::endOfDayTimestamp($var_64)) {
                    $var_68[] = $var_69;
                }
                
            }

            $var_72[$var_58][$var_61] = $var_12->fn_13($var_68);
            $var_73[$var_58][$var_61] = count($var_72[$var_58][$var_61]);
            if ($var_62 >= (6 + var_60)) {
                $var_58++;
                $var_72[$var_58] = array(); 
                $var_73[$var_58] = array();
                $var_62 = var_60;
            } else $var_62++;
        }
        
        for ($var_61 = 1; $var_62 && $var_61 < (8 + var_60 - $var_62); $var_61++) {
            $var_72[$var_58][$var_61 + $var_63] = array();
            $var_73[$var_58][$var_61 + $var_63] = -1;
        }

        $var_12->var_7['time'] = $var_53;
        assign_to_template(array(
            'currentweek' => $var_56,
            'monthly'     => $var_72,
            'counts'      => $var_73,
            "prevmonth3"  => strtotime('-3 months', $var_57),
            "prevmonth2"  => strtotime('-2 months', $var_57),
            "prevmonth"   => strtotime('-1 months', $var_57),
            "nextmonth"   => strtotime('+1 months', $var_57),
            "nextmonth2"  => strtotime('+2 months', $var_57),
            "nextmonth3"  => strtotime('+3 months', $var_57),
            'now'         => $var_57,
            "today"       => expDateTime::startOfDayTimestamp(time()),
            'params'      => $var_12->var_7,
            'daynames'    => event::dayNames(),
        ));
    }

    
    function fn_13($var_74, $var_75 = true) {
        global $var_8;
        $var_67 = array();
        foreach ($var_74 as $var_76) {
















            $var_26 = 'SELECT DISTINCT p.*, er.event_starttime, er.signup_cutoff FROM ' . $var_8->var_24 . 'product p ';

            $var_26 .= 'JOIN ' . $var_8->var_24 . 'eventregistration er ON p.product_type_id = er.id ';
            $var_26 .= 'WHERE 1 ';





            $var_26 .= ' AND er.id = ' . $var_76->var_77;

            $var_30 = 'event_starttime';
            $var_31 = 'ASC';

            $var_78 = $var_8->selectObjectBySql($var_26);
            $var_78->var_70 = $var_76->var_70;
            $var_78->var_80 = $var_76->var_81 + $var_76->var_70;
            $var_78->var_82 = $var_76->var_83 + $var_76->var_70;
            $var_78->var_84 = $var_76->var_84;
            $var_67[] = $var_78;
        }
        $var_67 = expSorter::sort(array('array' => $var_67, 'sortby' => 'eventstart', 'order' => $var_75 ? 'ASC' : 'DESC'));
        return $var_67;
    }

    function fn_10() {


        

        

        $var_39 = $var_12->var_21->pathToNode();
        
        assign_to_template(array(
            'ancestors' => $var_39
        ));
    }

    function fn_14() {
        class_17::set('viewable', $var_12->var_7);



        $var_26 = 'SELECT p.* FROM ' . var_52 . '_product p LEFT OUTER JOIN ' . var_52 . '_product_storeCategories ';
        $var_26 .= 'sc ON p.id = sc.product_id WHERE sc.product_id is null AND p.parent_id=0';

        expSession::set('product_export_query', $var_26);

        $var_34 = !empty($var_12->var_50['limit']) ? $var_12->var_50['limit'] : 10;
        $var_36 = new class_2(array(
            'model_field' => 'product_type',
            'sql'         => $var_26,
            'limit'       => !empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : $var_34,
            'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller'  => $var_12->var_7['controller'],
            'action'      => $var_12->var_7['action'],
            'columns'     => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        assign_to_template(array(
            'page'        => $var_36,
            'moduletitle' => 'Uncategorized Products'
        ));
    }

    function fn_15() {
        class_17::set('manageable', $var_12->var_7);

        if (var_85) {
            $var_34 = !empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : 10;
        } else {
            $var_34 = 0;  
        }
        $var_36 = new class_2(array(
            'model'      => 'product',
            'where'      => 'parent_id=0',
            'limit'      => $var_34,
            'order'      => (isset($var_12->var_7['order']) ? $var_12->var_7['order'] : 'title'),
            'dir'        => (isset($var_12->var_7['dir']) ? $var_12->var_7['dir'] : 'ASC'),
            'page'       => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller' => $var_12->var_7['controller'],
            'action'     => $var_12->var_7['action'],
            'columns'    => array(
                gt('Type')         => 'product_type',
                gt('Product Name') => 'title',
                gt('Model 
                gt('var_86')        => 'base_price'
            )
        ));
        assign_to_template(array(
            'page' => $var_36
        ));
    }

    function fn_16() {
        class_17::set('viewable', $var_12->var_7);

        
        $var_26 = 'SELECT DISTINCT(p.id),p.product_type FROM ' . var_52 . '_product p ';
        $var_26 .= 'JOIN ' . var_52 . '_product_storeCategories psc ON p.id = psc.product_id ';
        $var_26 .= 'JOIN '.var_52.'_storeCategories sc ON psc.storecategories_id = sc.parent_id ';
        $var_26 .= 'WHERE p.parent_id=0 AND sc.parent_id != 0';

        expSession::set('product_export_query', $var_26);

        $var_34 = !empty($var_12->var_50['limit']) ? $var_12->var_50['limit'] : 10;
        $var_36 = new class_2(array(
            'model_field' => 'product_type',
            'sql'         => $var_26,
            'limit'       => !empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : $var_34,
            'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller'  => $var_12->var_7['controller'],
            'action'      => $var_12->var_7['action'],
            'columns'     => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        assign_to_template(array(
            'page'        => $var_36,
            'moduletitle' => 'Improperly Categorized Products'
        ));
    }

    function fn_17() {
        redirect_to(array('controller' => 'report', 'action' => 'batch_export', 'applytoall' => true));
    }

    function fn_18() {
        global $var_8;

        $var_12->var_7['applytoall'] = 1;  

        
        

        $var_87 = '"id","parent_id","child_rank","title","body","model","warehouse_location","sef_url","meta_title","meta_keywords","meta_description","tax_class_id","quantity","availability_type","base_price","special_price","use_special_price","active_type","product_status_id","category1","category2","category3","category4","category5","category6","category7","category8","category9","category10","category11","category12","surcharge","category_rank","feed_title","feed_body","weight","width","height","length","image1","image2","image3","image4","image5","companies_id"' . chr(13) . chr(10);
        if (isset($var_12->var_7['applytoall']) && $var_12->var_7['applytoall'] == 1) {
            $var_26 = expSession::get('product_export_query');
            if (empty($var_26)) $var_26 = 'SELECT DISTINCT(p.id) from ' . $var_8->var_24 . 'product as p WHERE (product_type="product")';
            
            
            $var_88 = $var_8->selectArraysBySql($var_26);
            
        } else {
            foreach ($var_12->var_7['act-upon'] as $var_90) {
                $var_88[] = array('id' => $var_90);
            }
        }
        set_time_limit(0);
        $var_91 = new class_6();

        
        foreach ($var_88 as $var_93) {
            $var_94 = array('company', 'crosssellItem', 'optiongroup');
            $var_95 = $var_91->find('first', 'id=' . $var_93['id'], null, null, 0, true, true, $var_94, true);

            
            $var_87 .= expString::outputField($var_95->var_45);
            $var_87 .= expString::outputField($var_95->var_96);
            $var_87 .= expString::outputField($var_95->var_97);
            $var_87 .= expString::outputField($var_95->var_98);
            $var_87 .= expString::outputField(expString::stripLineEndings($var_95->var_99), ",", true);
            $var_87 .= expString::outputField($var_95->var_100);
            $var_87 .= expString::outputField($var_95->var_101);
            $var_87 .= expString::outputField($var_95->var_33);

            $var_87 .= expString::outputField($var_95->var_102);
            $var_87 .= expString::outputField($var_95->var_103);
            $var_87 .= expString::outputField($var_95->var_104);
            $var_87 .= expString::outputField($var_95->var_105);
            $var_87 .= expString::outputField($var_95->var_106);
            $var_87 .= expString::outputField($var_95->var_107);
            $var_87 .= expString::outputField($var_95->var_108);
            $var_87 .= expString::outputField($var_95->var_109);
            $var_87 .= expString::outputField($var_95->var_110);
            $var_87 .= expString::outputField($var_95->var_111);
            $var_87 .= expString::outputField($var_95->var_112);

            $var_113 = 0;
            
            for ($var_114 = 0; $var_114 < 12; $var_114++) {
                $var_12->var_115 = '';
                if (isset($var_95->storeCategory[$var_114])) {
                    $var_87 .= expString::outputField(class_0::buildCategoryString($var_95->storeCategory[$var_114]->var_45, true));
                    $var_113 = $var_8->selectValue('product_storeCategories', 'rank', 'product_id=' . $var_95->var_45 . ' AND storecategories_id=' . $var_95->storeCategory[$var_114]->var_45);
                } else $var_87 .= ',';
            }
            $var_87 .= expString::outputField($var_95->var_116);
            $var_87 .= expString::outputField($var_113);  
            $var_87 .= expString::outputField($var_95->var_117);
            $var_87 .= expString::outputField($var_95->var_118);
            $var_87 .= expString::outputField($var_95->var_119);
            $var_87 .= expString::outputField($var_95->var_120);
            $var_87 .= expString::outputField($var_95->var_121);
            $var_87 .= expString::outputField($var_95->var_122);
            
            if (isset($var_95->var_84['mainimage'][0])) {
                $var_87 .= expString::outputField($var_95->var_84['mainimage'][0]->var_45);
            } else $var_87 .= ',';
            for ($var_114 = 0; $var_114 < 3; $var_114++) {
                if (isset($var_95->var_84['images'][$var_114])) {
                    $var_87 .= expString::outputField($var_95->var_84['images'][$var_114]->var_45);
                } else $var_87 .= ',';
            }
            $var_87 .= expString::outputField($var_95->var_123, chr(13) . chr(10)); 

            foreach ($var_95->var_124 as $var_125) {
                
                
                $var_87 .= expString::outputField($var_125->var_45);
                $var_87 .= expString::outputField($var_125->var_96);
                $var_87 .= expString::outputField($var_125->var_97);
                $var_87 .= expString::outputField($var_125->var_98);
                $var_87 .= expString::outputField(expString::stripLineEndings($var_125->var_99));
                $var_87 .= expString::outputField($var_125->var_100);
                $var_87 .= expString::outputField($var_125->var_101);
                $var_87 .= expString::outputField($var_125->var_33);

                $var_87 .= expString::outputField($var_125->var_102);
                $var_87 .= expString::outputField($var_125->var_103);
                $var_87 .= expString::outputField($var_125->var_104);
                $var_87 .= expString::outputField($var_125->var_105);
                $var_87 .= expString::outputField($var_125->var_106);
                $var_87 .= expString::outputField($var_125->var_107);
                $var_87 .= expString::outputField($var_125->var_108);
                $var_87 .= expString::outputField($var_125->var_109);
                $var_87 .= expString::outputField($var_125->var_110);
                $var_87 .= expString::outputField($var_125->var_111);
                $var_87 .= expString::outputField($var_125->var_112);
                $var_87 .= ',,,,,,,,,,,,';  
                $var_87 .= expString::outputField($var_125->var_116);
                $var_87 .= ',,,'; 
                $var_87 .= expString::outputField($var_125->var_119);
                $var_87 .= expString::outputField($var_125->var_120);
                $var_87 .= expString::outputField($var_125->var_121);
                $var_87 .= expString::outputField($var_125->var_122);
                $var_87 .= ',,,,,';  
                $var_87 .= expString::outputField($var_125->var_123, chr(13) . chr(10));

                
            }

        }








        $var_126 = 'product_export_' . time() . '.csv';

        ob_end_clean();
        ob_start("ob_gzhandler");

        
        
        $var_127 = (var_128 == 'IE' || var_128 == 'OPERA') ? 'application/octetstream' : 'application/octet-stream';

        header('Content-Type: ' . $var_127);
        header('Expires: ' . gmdate('D, d M Y H:i:s') . ' GMT');
        
        if (var_128 == 'IE') {
            header('Content-Disposition: inline; filename="' . $var_126 . '"');
            header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
            header('Pragma: public');
        } else {
            header('Content-Disposition: attachment; filename="' . $var_126 . '"');
            header('Pragma: no-cache');
        }
        
        var_129; 

        
        
    }

    
    function fn_19() {
        class_17::set('viewable', $var_12->var_7);

        $var_34 = !empty($var_12->var_50['limit']) ? $var_12->var_50['limit'] : 10;
        $var_36 = new class_2(array(
            'model'      => 'product',
            'where'      => 'companies_id=' . $var_12->var_7['id'] . ' AND parent_id=0',
            'limit'      => !empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : $var_34,
            'default'    => 'Product Name',
            'page'       => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller' => $var_12->var_7['controller'],
            'action'     => $var_12->var_7['action'],
            'columns'    => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            )
        ));

        $var_130 = new class_7($var_12->var_7['id']);

        assign_to_template(array(
            'page'    => $var_36,
            'company' => $var_130
        ));
    }

    
    function fn_20() {
        global $var_8;
        class_17::set('viewable', $var_12->var_7);
        $var_26 = 'SELECT comp.* FROM ' . $var_8->var_24 . 'companies as comp JOIN ' . $var_8->var_24 . 'product AS prod ON prod.companies_id = comp.id WHERE parent_id=0 GROUP BY comp.title ORDER BY comp.title;';
        $var_131 = $var_8->selectObjectsBySql($var_26);
        assign_to_template(array(
            'manufacturers' => $var_131
        ));
    }

    function fn_21() {
        class_17::set('viewable', $var_12->var_7);
        
        $var_133 = 'giftcard';
        $var_134 = new $var_133();
        $var_135 = $var_134->find("all", "product_type = 'giftcard'");

        
        $var_12->fn_8();

        
        $var_50['custom_message_product'] = $var_12->var_50['custom_message_product'];
        $var_50['minimum_gift_card_purchase'] = $var_12->var_50['minimum_gift_card_purchase'];
        $var_136 = expSession::get('params');
        expSession::un_set('params');
        assign_to_template(array(
            'giftcards' => $var_135,
            'config'    => $var_50,
            'records'   => $var_136
        ));
    }

    function fn_22() {
        global $var_8, $var_30, $var_138, $var_11;

        class_17::set('viewable', $var_12->var_7);



        $var_45 = isset($var_12->var_7['title']) ? expString::escape($var_12->var_7['title']) : $var_12->var_7['id'];
        $var_92 = new class_6($var_45);
        $var_133 = new $var_92->var_133($var_92->var_45);
        $var_133->var_98 = expString::parseAndTrim($var_133->var_98, true);
        $var_133->var_139 = expString::parseAndTrim($var_133->var_139, true);

        
        
        if (empty($var_92->var_45)) {
            redirect_to(array('controller' => 'notfound', 'action' => 'page_not_found', 'title' => $var_12->var_7['title']));
        }
        
        if (!empty($var_92->var_96)) {
            $var_92 = new class_6($var_92->var_96);
            redirect_to(array('controller' => 'store', 'action' => 'show', 'title' => $var_92->var_33));
        }
        if ($var_92->var_111 == 1) {
            $var_133->var_140 = "This product is temporarily unavailable for purchase.";
        } elseif ($var_92->var_111 == 2 && !$var_11->isAdmin()) {
            flash("error", $var_92->var_98 . " " . gt("is currently unavailable."));
            class_17::back();
        } elseif ($var_92->var_111 == 2 && $var_11->isAdmin()) {
            $var_133->var_140 = $var_92->var_98 . " is currently marked as unavailable for purchase or display.  Normal users will not see this product.";
        }

        
        if (!empty($var_133->var_123)) {
            $var_133->var_130 = new class_7($var_133->var_123);
        }

        if (!empty($var_133->var_141)) foreach ($var_133->var_141 as &$var_142) {
            $var_142->getAttachableItems();
        }

        $var_144 = $var_133->getForm('show');

        if (!empty($var_144)) $var_138 = new class_8($var_12, $var_144);
        $var_12->fn_8(); 

        assign_to_template(array(
            'config'        => $var_12->var_50,
            'asset_path'    => $var_12->var_146,

            'product'       => $var_133,
            'last_category' => !empty($var_30->var_147) ? $var_30->var_147 : null,
        ));
        $var_12->fn_10();
    }

    function fn_23() {
        global $var_30, $var_138, $var_11;
        
        class_17::set('viewable', $var_12->var_7);

        $var_92 = new class_6(expString::escape($var_12->var_7['title']));
        $var_133 = new $var_92->var_133($var_92->var_45);
        $var_133->var_98 = expString::parseAndTrim($var_133->var_98, true);
        $var_133->var_139 = expString::parseAndTrim($var_133->var_139, true);

        
        
        if (empty($var_92->var_45)) {
            redirect_to(array('controller' => 'notfound', 'action' => 'page_not_found', 'title' => $var_12->var_7['title']));
        }
        if (!empty($var_92->var_96)) {
            $var_92 = new class_6($var_92->var_96);
            redirect_to(array('controller' => 'store', 'action' => 'show', 'title' => $var_92->var_33));
        }
        if ($var_92->var_111 == 1) {
            $var_133->var_140 = "This product is temporarily unavailable for purchase.";
        } elseif ($var_92->var_111 == 2 && !$var_11->isAdmin()) {
            flash("error", $var_92->var_98 . " " . gt("is currently unavailable."));
            class_17::back();
        } elseif ($var_92->var_111 == 2 && $var_11->isAdmin()) {
            $var_133->var_140 = $var_92->var_98 . " is currently marked as unavailable for purchase or display.  Normal users will not see this product.";
        }
        if (!empty($var_133->var_141)) foreach ($var_133->var_141 as &$var_142) {
            $var_142->getAttachableItems();
        }
        

        $var_144 = $var_133->getForm('show');
        
        if (!empty($var_144)) $var_138 = new class_8($var_12, $var_144);
        $var_12->fn_8(); 

        assign_to_template(array(
            'config'        => $var_12->var_50,
            'product'       => $var_133,
            'last_category' => !empty($var_30->var_147) ? $var_30->var_147 : null,
        ));
    }

    function fn_24() {
        global $var_30, $var_138, $var_8;

        class_17::set('viewable', $var_12->var_7);
        $var_92 = new class_6();
        $var_100 = $var_92->find("first", 'model="' . expString::escape($var_12->var_7['model']) . '"');
        
        $var_133 = new $var_100->var_133($var_100->var_45);
        
        $var_144 = $var_133->getForm('show');
        if (!empty($var_144)) $var_138 = new class_8($var_12, $var_144);
        
        $var_12->fn_8(); 
        assign_to_template(array(
            'config'        => $var_12->var_50,
            'product'       => $var_133,
            'last_category' => $var_30->var_147
        ));
    }

    function fn_25() {


        class_17::set('viewable', $var_12->var_7);

        $var_149 = expSession::get('catid');
        $var_20 = !empty($var_149) ? $var_149 : (!empty($var_12->var_7['cat']) ? intval($var_12->var_7['cat']) : 0);
        $var_21 = new class_0($var_20);
        $var_41 = $var_21->getEcomSubcategories();
        $var_39 = $var_21->pathToNode();
        assign_to_template(array(
            'categories' => $var_41,
            'ancestors'  => $var_39,
            'category'   => $var_21
        ));
    }

    function fn_26() {
        class_17::set('viewable', $var_12->var_7);
        $var_30 = !empty($var_12->var_7['order']) ? $var_12->var_7['order'] : $var_12->var_50['orderby'];
        $var_31 = !empty($var_12->var_7['dir']) ? $var_12->var_7['dir'] : $var_12->var_50['orderby_dir'];
        if (empty($var_30)) $var_30 = 'title';
        if (empty($var_31)) $var_31 = 'ASC';

        $var_36 = new class_2(array(
            'model_field' => 'product_type',
            'sql'         => 'SELECT * FROM ' . var_52 . '_product WHERE is_featured=1',
            'limit'       => ecomconfig::getConfig('pagination_default'),
            'order'       => $var_30,
            'dir'         => $var_31,
            'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller'  => $var_12->var_7['controller'],
            'action'      => $var_12->var_7['action'],
            'columns'     => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        assign_to_template(array(
            'page' => $var_36
        ));
    }

    function fn_27() {
        class_17::set('viewable', $var_12->var_7);
        $var_151 = $var_12->var_21;

        $var_30 = !empty($var_12->var_7['order']) ? $var_12->var_7['order'] : $var_12->var_50['orderby'];
        $var_31 = !empty($var_12->var_7['dir']) ? $var_12->var_7['dir'] : $var_12->var_50['orderby_dir'];
        if (empty($var_30)) $var_30 = 'title';
        if (empty($var_31)) $var_31 = 'ASC';
        
        $var_26 = 'SELECT * FROM ' . var_52 . '_product as p,' . var_52 . '_product_storeCategories as sc WHERE sc.product_id = p.id and p.is_featured=1 and sc.storecategories_id =' . $var_151->var_45;
        $var_36 = new class_2(array(
            'model_field' => 'product_type',
            'sql'         => $var_26,
            'limit'       => ecomconfig::getConfig('pagination_default'),
            'order'       => $var_30,
            'dir'         => $var_31,
            'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller'  => $var_12->var_7['controller'],
            'action'      => $var_12->var_7['action'],
            'columns'     => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        assign_to_template(array(
            'page' => $var_36
        ));
    }

    function fn_28() {
        class_17::set('viewable', $var_12->var_7);
        $var_21 = new class_0(null, false, false);
        
        $var_41 = $var_21->getTopLevel(null, false, true);
        $var_39 = $var_12->var_21->pathToNode();
        $var_151 = $var_12->var_21;

        assign_to_template(array(
            'categories' => $var_41,
            'curcat'     => $var_151,
            'topcat'     => @$var_39[0]
        ));
    }

    function fn_29() {
        global $var_11;

        class_17::set('viewable', $var_12->var_7);
        $var_23 = 'SELECT COUNT(DISTINCT p.id) as c FROM ' . var_52 . '_product p ';
        $var_25 = 'SELECT DISTINCT p.* FROM ' . var_52 . '_product p ';
        $var_26 = 'JOIN ' . var_52 . '_product_storeCategories sc ON p.id = sc.product_id ';
        $var_26 .= 'WHERE ';
        if (!$var_11->isAdmin()) $var_26 .= '(p.active_type=0 OR p.active_type=1)'; 
        
        

        $var_29 = $var_23 . $var_26;
        $var_26 = $var_25 . $var_26;

        $var_30 = 'sc.rank'; 
        $var_31 = 'ASC'; 

        $var_34 = !empty($var_12->var_50['limit']) ? $var_12->var_50['limit'] : 10;
        $var_36 = new class_2(array(
            'model_field' => 'product_type',
            'sql'         => $var_26,
            'count_sql'   => $var_29,
            'limit'       => !empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : $var_34,
            'order'       => $var_30,
            'dir'         => $var_31,
            'page'        => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller'  => $var_12->var_7['controller'],
            'action'      => $var_12->var_7['action'],
            'columns'     => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        $var_21 = new class_0(null, false, false);
        
        $var_41 = $var_21->getTopLevel(null, false, true);
        $var_39 = $var_12->var_21->pathToNode();
        $var_151 = $var_12->var_21;

        assign_to_template(array(
            'page'       => $var_36,
            'categories' => $var_41
        ));
    }

    function fn_30() {  
        class_17::set('viewable', $var_12->var_7);
        $var_21 = new class_0(null, false, false);
        
        $var_41 = $var_21->getFullTree();
        $var_39 = $var_12->var_21->pathToNode();
        $var_151 = $var_12->var_21;

        assign_to_template(array(
            'categories' => $var_41,
            'curcat'     => $var_151,
            'topcat'     => @$var_39[0]
        ));
    }

    function fn_31() {

    }

    function fn_32() {

    }

    
    function var_153() {
        global $var_8, $var_9;

        $var_100 = new $var_12->var_2();

        $var_154 = $var_8->countObjects($var_100->var_156);

        $var_157 = 0;
        for ($var_61 = 0; $var_61 < $var_154; $var_61 += 100) {
            $var_158 = 'id LIMIT ' . ($var_61) . ', 100';
            $var_159 = $var_8->selectArrays($var_100->var_156, 'parent_id=0', $var_158);

            foreach ($var_159 as $var_161) {
                $var_162 = $var_161['id'];
                $var_90 = new class_6($var_161['id']);
                unset($var_161['id']);
                if (ecomconfig::getConfig('ecom_search_results') == '') {
                    $var_161['title'] = (isset($var_90->var_84['mainimage'][0]) ? '<img src="' . var_163 . 'thumb.php?id=' . $var_90->var_84['mainimage'][0]->var_45 . '&w=40&h=40&zc=1" style="float:left;margin-right:5px;" />' : '') . $var_161['title'] . (!empty($var_161['model']) ? ' - SKU
                }


               
                $sql = "original_id=" . $origid . " AND ref_module='" . $var_12->var_164 . "'";
                $var_165 = $var_8->selectObject('search', $var_26);
                if (!empty($var_165)) {
                    $var_167 = new class_9($var_165->var_45, false, false);
                    $var_167->update($var_161);
                } var_169 {
                    $var_167 = new class_9($var_161, false, false);
                }

                $var_167->var_170 = empty($var_161['created_at']) ? null : $var_161['created_at'];
                if ($var_161['product_type'] == 'giftcard') {
                    $var_167->var_171 = str_replace(var_172, '', $var_9->makeLink(array('controller' => 'store', 'action' => 'showGiftCards')));
                } var_169 {

                    $var_167->var_171 = str_replace(var_172, '', $var_9->makeLink(array('controller' => $var_161['product_type'], 'action' => 'show', 'title' => $var_161['sef_url'])));
                }

                $var_167->var_174  = $var_12->var_164;

                $var_167->var_175 = $var_161['product_type'];

                $var_90 = new $var_167->var_175($var_162);
                $var_167->var_21 = $var_90->var_176;
                if ($var_167->var_175 == 'eventregistration') {
                    $var_167->var_98 .= ' - ' . expDateTime::format_date($var_90->var_70);
                }

                $var_167->var_177 = $var_162;
                
                $var_167->save();
                $var_157++;
            }
        }
        return $var_157;
    }

    function searchByModel() {
        
    }

    function edit() {
        global $var_8;




        
        if (isset($var_12->var_7['view']) && $var_12->var_7['view'] == 'edit') {
            class_17::set('editable', $var_12->var_7);
        }

        
        if (!empty($var_12->var_7['id'])) {
            
            $var_133 = $var_8->selectValue('product', 'product_type', 'id=' . $var_12->var_7['id']);
            if (empty($var_133)) redirect_to(array('controller' => 'store', 'action' => 'picktype'));
        } var_169 {
            if (empty($var_12->var_7['product_type'])) var_179(array('controller' => 'store', 'action' => 'picktype'));
            $var_133 = $var_12->var_7['product_type'];
        }

        if (!empty($var_12->var_7['id'])) {
            $var_180 = new $var_133($var_12->var_7['id']);
            if (!empty($var_12->var_181) && !is_array($var_180->var_181)) $var_180->var_181 = expUnserialize($var_180->var_181);
        } var_169 {
            $var_180 = new $var_133();
            $var_180->var_181 = array();
        }



        
        $var_182 = array();
        
        $var_183 = $var_8->selectExpObjects('optiongroup_master', null, 'optiongroup_master');
        
        foreach ($var_183 as $var_185) {
            
            
            $var_186 = $var_8->selectArray('optiongroup', 'optiongroup_master_id=' . $var_185->var_45 . ' AND product_id=' . $var_180->var_45);
            
            
            if (empty($var_186)) {
                $var_186['optiongroup_master_id'] = $var_185->var_45;
                $var_186['title'] = $var_185->var_98;
                $var_188 = new class_10($var_186);
            } var_169 {
                $var_188 = new class_10($var_186['id']);
            }

            $var_182[$var_188->var_98] = $var_188;

            if (empty($var_188->var_190)) {
                foreach ($var_185->var_191 as $var_192) {
                    $var_193 = new class_11(array('title' => $var_192->var_98, 'option_master_id' => $var_192->var_45), false, false);
                    $var_182[$var_188->var_98]->var_194[] = $var_193;
                }

            } var_169 {
                if (count($var_188->var_190) == count($var_185->var_191)) {
                    $var_182[$var_188->var_98]->var_194 = $var_188->var_190;
                } var_169 {
                    
                    foreach ($var_185->var_191 as $var_192) {
                        $var_195 = $var_8->selectValue('option', 'id', 'option_master_id=' . $var_192->var_45 . " AND product_id=" . $var_180->var_45);
                        if (empty($var_195)) {
                            $var_193 = new class_11(array('title' => $var_192->var_98, 'option_master_id' => $var_192->var_45), false, false);
                        } var_169 {
                            $var_193 = new class_11($var_195);
                        }

                        $var_182[$var_188->var_98]->var_194[] = $var_193;
                    }
                }
            }
            
        }
        

        var_196($var_182, array("optiongroup", "sortOptiongroups"));

        


        foreach (var_229::var_230() as $var_231 => $var_232) {
            
            if (var_233($var_232)) {
                $var_234 = new $var_232($var_231);
                $var_218[$var_231] = $var_234->var_98;
                $var_219[$var_231] = $var_234->var_235();
            }
        }




        var_197 (!empty($var_12->var_7['product_type']) && ($var_12->var_7['product_type'] == "product" || $var_12->var_7['product_type'] == "childProduct")) {
            
            if (empty($var_180->var_45) && $var_180->isChild()) {
                $var_180->var_97 = $var_8->max('product', 'child_rank', null, 'parent_id=' . $var_180->var_96) + 1;
            }
            
        }
        $var_200 = '';
        $parent = null;
        if ((var_201($var_12->var_7['var_96']) && empty($var_180->var_45))) {
            
            $var_200 = 'var_202';
            $parent = new $var_133($var_12->var_7['var_96'], false, true);
            $var_180->var_96 = $var_12->var_7['var_96'];
        } elseif ((!var_203($var_180->var_45) && $var_180->var_96 != 0)) {
            
            $var_200 = 'var_202';
            $parent = new $var_133($var_180->var_96, false, true);
        } else {
            $var_200 = 'var_202';
        }

        $var_204 = new var_205();
        $var_206 = array();
        $var_206[0] = '- '.gt('var_207 var_208 var_209 var_210').' -';
        $var_205 = $var_204->var_35('var_211', 'var_212=1');
        if (!var_203($var_205)) foreach ($var_205 as $var_213) {
            if (!$var_8->var_155('var_66', 'var_214='.$var_213->var_45) || (!empty($var_180->var_214) && $var_180->var_214 == $var_213->var_45))
                $var_206[$var_213->var_45] = $var_213->var_98;
        }

        var_215(array(
            'var_180'            => $var_180,
            'parent'            => $parent,
            'var_216'              => $var_180->var_145($var_200),
            'var_217'      => $var_182,

            'var_205'=> $var_206,
            'var_218' => var_201($var_218) ? $var_218 : '', 
            'shipping_methods'  => var_201($var_219) ? $var_219 : '', 
            'product_types'     => var_201($var_12->var_50['var_220']) ? $var_12->var_50['product_types'] : ''
            
        ));
    }

    function var_221() {
        global $var_8;

        
        $var_204 = new var_205();
        $var_206 = array();
        $var_206[0] = '- '.gt('var_207 var_208 var_209 var_210').' -';
        $var_205 = $var_204->var_35('var_211', 'var_212=1');
        if (!var_203($var_205)) foreach ($var_205 as $var_213) {
            $var_206[$var_213->var_45] = $var_213->var_98;
        }

        
        if (!var_203($var_12->var_7['var_45'])) {
            
            $var_133 = $var_8->var_15('var_92', 'var_133', 'var_45=' . $var_12->var_7['id']);
        } else {
            if (var_203($var_12->var_7['var_133'])) var_179(array('var_222' => 'var_223', 'var_224' => 'var_225'));
            $var_133 = $var_12->var_7['var_133'];
        }

        $var_180 = new $var_133($var_12->var_7['var_45']);
        
        $var_182 = array();

        $var_183 = $var_8->var_184('var_226', null, 'var_226');
        foreach ($var_183 as $var_185) {
            
            
            $var_186 = $var_8->var_187('var_189', 'var_227=' . $var_185->var_45 . ' AND product_id=' . $var_180->var_45);
            
            if (var_203($var_186)) {
                $var_186['var_227'] = $var_185->var_45;
                $var_186['var_98'] = $var_185->var_98;
                $var_188 = new var_189($var_186);
            } else {
                $var_188 = new var_189($var_186['var_45']);
            }

            $var_182[$var_188->var_98] = $var_188;

            if (var_203($var_188->var_190)) {
                foreach ($var_185->var_191 as $var_192) {
                    $var_193 = new var_190(array('var_98' => $var_192->var_98, 'var_228' => $var_192->var_45), false, false);
                    $var_182[$var_188->var_98]->var_194[] = $var_193;
                }
            } else {
                if (var_157($var_188->var_190) == count($var_185->var_191)) {
                    $var_182[$var_188->var_98]->var_194 = $var_188->var_190;
                } else {
                    
                    foreach ($var_185->var_191 as $var_192) {
                        $var_195 = $var_8->var_15('var_190', 'var_45', 'var_228=' . $var_192->var_45 . " AND product_id=" . $var_180->var_45);
                        if (var_203($var_195)) {
                            $var_193 = new var_190(array('var_98' => $var_192->var_98, 'var_228' => $var_192->var_45), false, false);
                        } else {
                            $var_193 = new var_190($var_195);
                        }

                        $var_182[$var_188->var_98]->var_194[] = $var_193;
                    }
                }
            }
        }

        


        foreach (var_229::var_230() as $var_231 => $var_232) {
            if (var_233($var_232)) {
                $var_234 = new $var_232($var_231);
                $var_218[$var_231] = $var_234->var_98;
                $var_219[$var_231] = $var_234->var_235();
            }
        }

        $var_180->var_177 = $var_180->var_45;
        $var_180->var_236 = $var_180->var_100;
        $var_180->var_33 = NULL;
        $var_180->var_237 = NULL;
        $var_180->var_238 = NULL;

        if ($var_180->var_198()) {
            $var_180->var_97 = $var_8->var_199('var_92', 'var_97', null, 'var_96=' . $var_180->var_96) + 1;
        }

        var_215(array(
            'var_239'              => true,
            'var_180'            => $var_180,
            'parent'            => new $var_133($var_180->var_96, false, true),
            'var_216'              => $var_180->var_145($var_180->var_96 == 0 ? 'edit' : 'child_edit'),
            'var_217'      => $var_182,
            'var_205'=> $var_206,
            'var_218' => $var_218,
            'var_219'  => $var_219
        ));
    }

    function var_225() {
        $var_240 = var_0::var_241();
        $var_242 = array();
        foreach ($var_240 as $var_243 => $var_244) {
            $var_245 = new $var_244();
            $var_242[$var_244] = $var_245->var_176;
        }
        var_215(array(
            'var_220' => $var_242
        ));
    }

    function var_246() {

        
        $var_133 = var_201($var_12->var_7['var_133']) ? $var_12->var_7['product_type'] : 'product';

        $var_180 = new $var_133();

        $var_180->var_246($var_12->var_7);

        if ($var_133 == "childProduct" || $var_133 == "product") {
            $var_180->var_153();
            
            if ($var_180->var_96 != 0) {
                $parent = new $var_133($var_180->var_96, false, false);
                if (var_201($var_12->var_7['var_177'])) {
                    var_247("var_248", var_249("var_250 var_92 var_251."));
                } else {
                    flash("var_248", var_249("Child product copied and saved."));
                }
                var_179(array('var_222' => 'var_223', 'var_224' => 'var_137', 'var_98' => $parent->var_33));
            } elseif (isset($var_12->var_7['original_id'])) {
                flash("message", gt("Product copied and saved. You are now viewing your new product."));
            } var_169 {
                flash("message", gt("Product saved."));
            }
            redirect_to(array('controller' => 'store', 'action' => 'show', 'title' => $var_180->var_33));
        } elseif ($var_133 == "giftcard") {
            flash("message", gt("Giftcard saved."));
            redirect_to(array('controller' => 'store', 'action' => 'manage'));
        } elseif ($var_133 == "eventregistration") {
            

            flash("message", gt("Event saved."));
            redirect_to(array('controller' => 'store', 'action' => 'manage'));
        } elseif ($var_133 == "donation") {
            flash("message", gt("Donation saved."));
            redirect_to(array('controller' => 'store', 'action' => 'manage'));
        }
    }

    function delete() {
        global $var_8;

        if (empty($var_12->var_7['id'])) var_424 false;
        $var_133 = $var_8->selectValue('product', 'product_type', 'id=' . $var_12->var_7['id']);
        $var_92 = new $var_133($var_12->var_7['id'], true, false);
        
        
        
        
        

        $var_8->delete('option', 'product_id=' . $var_92->var_45 . " AND optiongroup_id IN (SELECT id from " . $var_8->var_24 . "optiongroup WHERE product_id=" . $var_92->var_45 . ")");
        $var_8->delete('optiongroup', 'product_id=' . $var_92->var_45);
        
        $var_8->delete('product_storeCategories', 'product_id=' . $var_92->var_45 . ' AND product_type="' . $var_133 . '"');

        if ($var_92->var_133 == "product") {
            if ($var_92->hasChildren()) {
                $var_12->deleteChildren();
            }
        }

        $var_92->delete();

        flash('message', gt('Product deleted successfully.'));
        class_17::back();
    }

    var_254 var_255() {
        global $var_30;

        $var_256 = !empty($var_30->var_257) ? $var_30->var_257 : 0;
        
        assign_to_template(array(
            "oicount" => $var_256,
        ));
    }

    var_258 static function var_241() {
        $var_259 = array(
            var_260 . 'framework/modules/ecommerce/products/models',
        );

        $var_242 = array();
        foreach ($var_259 as $var_261) {
            if (is_readable($var_261)) {
                $var_262 = opendir($var_261);
                while (($var_263 = readdir($var_262)) !== false) {
                    if (is_readable($var_261 . '/' . $var_263) && substr($var_263, -4) == '.php' && $var_263 != 'childProduct.php') {
                        $var_244 = substr($var_263, 0, -4);
                        $var_242[$var_261 . '/' . $var_263] = $var_244;
                    }
                }
            }
        }

        var_424 $var_242;
    }

    var_254 var_264() {
        global $var_9;

        if (empty($var_9->var_7['action'])) var_424 array();

        
        $var_224 = $var_9->var_7['action'];
        $var_264 = array('title'=>'', 'keywords'=>'', 'description'=>'', 'canonical'=> '', 'noindex' => false, 'nofollow' => false);
        $var_265 = ecomconfig::getConfig('storename');
        switch ($var_224) {
            case 'showall': 
                $var_266 = $var_12->var_21;
                if (!empty($var_266)) {
                    $var_264['title'] = empty($var_266->var_102) ? $var_266->var_98 . ' ' . gt('Products') . ' - ' . $var_265 : $var_266->var_102;
                    $var_264['keywords'] = empty($var_266->var_103) ? $var_266->var_98 : strip_tags($var_266->var_103);
                    $var_264['description'] = empty($var_266->var_104) ? strip_tags($var_266->var_99) : strip_tags($var_266->var_104);
                    $var_264['canonical'] = empty($var_266->var_267) ? $var_9->plainPath() : strip_tags($var_266->var_267);
                    $var_264['noindex'] = empty($var_266->var_269) ? false : $var_266->var_269;
                    $var_264['nofollow'] = empty($var_266->var_270) ? false : $var_266->var_270;
                }
                var_271;
            case 'var_137':
            case 'var_148':
                $var_90 = new class_6(isset($var_9->var_7['title']) ? expString::sanitize($var_9->var_7['title']) : intval($var_9->var_7['id']));
                if (!empty($var_90)) {
                    $var_264['title'] = empty($var_90->var_102) ? $var_90->var_98 . " - " . $var_265 : $var_90->var_102;
                    $var_264['keywords'] = empty($var_90->var_103) ? $var_90->var_98 : strip_tags($var_90->var_103);
                    $var_264['description'] = empty($var_90->var_104) ? strip_tags($var_90->var_99) : strip_tags($var_90->var_104);
                    $var_264['canonical'] = empty($var_90->var_267) ? $var_9->plainPath() : strip_tags($var_90->var_267);
                    $var_264['noindex'] = empty($var_90->var_269) ? false : $var_90->var_269;
                    $var_264['nofollow'] = empty($var_90->var_270) ? false : $var_90->var_270;
                    if (!empty($var_90->var_84['mainimage'][0]) && file_exists(var_260.$var_90->var_84['mainimage'][0]->var_272.$var_90->var_84['mainimage'][0]->var_126)) {
                        $var_264['rich'] = '<!--
        <PageMap>
            <DataObject type="thumbnail">
                <Attribute name="src" value="'.$var_90->var_84['mainimage'][0]->var_273.'"/>
                <Attribute name="width" value="'.$var_90->var_84['mainimage'][0]->var_274.'"/>
                <Attribute name="height" value="'.$var_90->var_84['mainimage'][0]->var_274.'"/>
            </DataObject>
        </PageMap>
    -->';
                    }
                    $var_264['fb']['type'] = 'product';
                    $var_264['fb']['title'] =  substr(empty($var_90->meta_fb['title']) ? $var_90->var_98 : $var_90->meta_fb['title'], 0, 87);
                    $var_264['fb']['description'] = substr(empty($var_90->meta_fb['description']) ? $var_264['description'] : $var_90->meta_fb['description'], 0, 199);
                    $var_264['fb']['url'] = empty($var_90->meta_fb['url']) ? $var_264['canonical'] : $var_90->meta_fb['url'];
                    $var_264['fb']['image'] = empty($var_90->meta_fb['fbimage'][0]) ? '' : $var_90->meta_fb['fbimage'][0]->var_273;
                    if (empty($var_264['fb']['image'])) {
                        if (!empty($var_90->var_84['mainimage'][0]))
                            $var_264['fb']['image'] = $var_90->var_84['mainimage'][0]->var_273;
                        if (empty($var_264['fb']['image']))
                            $var_264['fb']['image'] = var_275 . '/framework/modules/ecommerce/assets/images/no-image.jpg';
                    }
                    var_271;
                }
            default:
                $var_264['title'] = gt("Shopping") . " - " . $var_265;
                $var_264['keywords'] = SITE_KEYWORDS;
                $var_264['description'] = SITE_DESCRIPTION;
        }

        







        var_424 $var_264;
    }

    
    var_258 function var_276() {
        if (empty($var_12->var_50['enable_ratings_and_reviews'])) {
            $var_12->var_5[] = 'comments';
        }
        var_20::configure();
    }

    var_258 function var_277() {
        
        
        
        $var_92 = new class_6($var_12->var_7['id']);
        
        
        if (empty($var_92->var_45)) 
        {
            flash('error', gt('There was an error deleting the child products.'));
            class_17::back();
        }
        $var_278 = $var_92->find('all', 'parent_id=' . $var_92->var_45);
        foreach ($var_278 as $var_279) {
            
            $var_279->delete();
        }
    }

    var_254 var_280() {
        
        $var_281 = expString::escape($var_12->var_7['search_string']);

        $var_26 = "model like '%" . $var_281 . "%'";

        $var_34 = !empty($var_12->var_50['limit']) ? $var_12->var_50['limit'] : 10;
        $var_36 = new class_2(array(
            'model'      => 'product',
            'where'      => $var_26,
            'limit'      => !empty($var_12->var_50['pagination_default']) ? $var_12->var_50['pagination_default'] : $var_34,
            'order'      => 'title',
            'dir'        => 'DESC',
            'page'       => (isset($var_12->var_7['page']) ? $var_12->var_7['page'] : 1),
            'controller' => $var_12->var_7['controller'],
            'action'     => $var_12->var_7['action'],
            'columns'    => array(
                gt('Model 
                gt('var_37 var_38') => 'title',
                gt('Price')        => 'base_price'
            ),
        ));

        assign_to_template(array(
            'page'  => $var_36,
            'terms' => $var_281
        ));
    }

    

    var_254 var_282() {
        global $var_8, $var_11;

        $var_26 = "select DISTINCT(p.id) as id, p.title, model from " . $var_8->var_24 . "product as p WHERE ";
        if (!($var_11->isAdmin())) $var_26 .= '(p.active_type=0 OR p.active_type=1) AND ';

        
        $var_12->var_7['query'] = expString::escape($var_12->var_7['query']);
        if ($var_12->var_7['query'][0] == '-') {
            $var_26 .= " p.model LIKE '%" . $var_12->var_7['query'];
        } var_169 {
            $var_26 .= " p.model LIKE '" . $var_12->var_7['query'];
        }

        $var_26 .= "%' AND p.parent_id=0 GROUP BY p.id ";
        $var_26 .= "order by p.model ASC LIMIT 30";
        $var_283 = $var_8->selectObjectsBySql($var_26);
        
        $var_284 = new class_12(200, gt('Here\'s the items you wanted'), $var_283);
        $var_284->send();
    }

    
    var_258 function var_168() {
        global $var_8, $var_11;

        $var_12->var_7['query'] = expString::escape($var_12->var_7['query']);
        if (var_285 && var_286 == 1) {  
            $var_287 = trim($var_12->var_7['query']);
            if (!empty($var_287)) {
                if (var_288 == 1 || $var_11->var_45 <> 0) {
                    $var_289 = new class_13();
                    $var_289->var_290 = $var_11->var_45;
                    $var_289->var_291 = $var_287;
                    $var_289->var_292 = time();

                    $var_8->insertObject($var_289, 'search_queries');
                }
            }
        }
        
        $var_281 = explode(" ", $var_12->var_7['query']);
        $var_293 = ecomconfig::getConfig('ecom_search_results');

        
        $var_26 = "select DISTINCT(p.id) as id, p.title, model, sef_url, f.id as fileid, match (p.title,p.body) against ('" . $var_12->var_7['query'] . "*' IN BOOLEAN MODE) as score ";
        $var_26 .= "  from " . $var_8->var_24 . "product as p LEFT JOIN " .
            $var_8->var_24 . "content_expFiles as cef ON p.id=cef.content_id AND cef.content_type IN ('product','eventregistration','donation','giftcard') AND cef.subtype='mainimage' LEFT JOIN " . $var_8->var_24 .
            "expFiles as f ON cef.expFiles_id = f.id WHERE ";
        if (!($var_11->isAdmin())) $var_26 .= '(p.active_type=0 OR p.active_type=1) AND ';
        if ($var_293 == 'products') $var_26 .= 'product_type = "product" AND ';
        $var_26 .= " match (p.title,p.body) against ('" . $var_12->var_7['query'] . "*' IN BOOLEAN MODE) AND p.parent_id=0  GROUP BY p.id ";
        $var_26 .= "order by score desc LIMIT 10";

        $var_294 = $var_8->selectObjectsBySql($var_26);
        foreach ($var_294 as $var_295) {
            $var_295->var_119 = 1;
            unset($var_295->var_296);
            $var_297 = !empty($var_295->var_100) ? $var_295->var_100 : $var_295->var_33;
            $var_283[$var_297] = $var_295;
        }

        
        $var_26 = "select DISTINCT(p.id) as id, p.title, model, sef_url, f.id as fileid  from " . $var_8->var_24 . "product as p LEFT JOIN " .
            $var_8->var_24 . "content_expFiles as cef ON p.id=cef.content_id AND cef.content_type IN ('product','eventregistration','donation','giftcard') AND cef.subtype='mainimage' LEFT JOIN " . $var_8->var_24 .
            "expFiles as f ON cef.expFiles_id = f.id WHERE ";
        if (!($var_11->isAdmin())) $var_26 .= '(p.active_type=0 OR p.active_type=1) AND ';
        if ($var_293 == 'products') $var_26 .= 'product_type = "product" AND ';
        $var_26 .= " (p.model like '%" . $var_12->var_7['query'] . "%' ";
        $var_26 .= " OR p.title like '%" . $var_12->var_7['query'] . "%') ";
        $var_26 .= " AND p.parent_id=0 GROUP BY p.id LIMIT 10";

        $var_298 = $var_8->selectObjectsBySql($var_26);
        foreach ($var_298 as $var_295) {
            $var_295->var_119 = 2;
            $var_297 = !empty($var_295->var_100) ? $var_295->var_100 : $var_295->var_33;
            $var_283[$var_297] = $var_295;
        }

        
        $var_26 = "select DISTINCT(p.id) as id, p.title, model, sef_url, f.id as fileid  from " . $var_8->var_24 . "product as p LEFT JOIN " .
            $var_8->var_24 . "content_expFiles as cef ON p.id=cef.content_id AND cef.content_type IN ('product','eventregistration','donation','giftcard') AND cef.subtype='mainimage' LEFT JOIN " . $var_8->var_24 .
            "expFiles as f ON cef.expFiles_id = f.id WHERE ";
        if (!($var_11->isAdmin())) $var_26 .= '(p.active_type=0 OR p.active_type=1) AND ';
        if ($var_293 == 'products') $var_26 .= 'product_type = "product" AND ';
        $var_26 .= " (p.model like '" . $var_12->var_7['query'] . "%' ";
        $var_26 .= " OR p.title like '" . $var_12->var_7['query'] . "%') ";
        $var_26 .= " AND p.parent_id=0 GROUP BY p.id LIMIT 10";

        $var_299 = $var_8->selectObjectsBySql($var_26);
        foreach ($var_299 as $var_295) {
            if (strcmp(strtolower(trim($var_12->var_7['query'])), strtolower(trim($var_295->var_100))) == 0)
                $var_295->var_119 = 10;
            else if (strcmp(strtolower(trim($var_12->var_7['query'])), strtolower(trim($var_295->var_98))) == 0)
                $var_295->var_119 = 9;
            else
                $var_295->var_119 = 3;

            $var_297 = !empty($var_295->var_100) ? $var_295->var_100 : $var_295->var_33;
            $var_283[$var_297] = $var_295;
        }

        var_254 var_300($var_301, $var_302) {
            return ($var_301->var_119 == $var_302->var_119 ? 0 : ($var_301->var_119 < $var_302->var_119) ? 1 : -1);
        }

        var_197 (count($var_281)) {
            foreach ($var_283 as $var_303) {
                $var_297 = !empty($var_303->var_100) ? $var_303->var_100 : $var_303->var_33;
                foreach ($var_281 as $var_304) {
                    if (stristr($var_303->var_98, $var_304)) $var_283[$var_297]->var_119 = $var_283[$var_297]->var_119 + 1;
                }
            }
        }
        var_305($var_283, 'sortSearch');

        $var_284 = new class_12(200, gt('Here\'s the items you wanted'), $var_283);
        $var_284->send();
    }

    
    var_258 function var_306() {
        global $var_8, $var_11;

        $var_12->var_7['query'] = expString::escape($var_12->var_7['query']);
        
        $var_26 = "select DISTINCT(p.id) as id, p.title, model, sef_url, f.id as fileid, ";
        $var_26 .= "match (p.title,p.model,p.body) against ('" . $var_12->var_7['query'] . "*' IN BOOLEAN MODE) as relevance, ";
        $var_26 .= "CASE when p.model like '" . $var_12->var_7['query'] . "%' then 1 else 0 END as modelmatch, ";
        $var_26 .= "CASE when p.title like '%" . $var_12->var_7['query'] . "%' then 1 else 0 END as titlematch ";
        $var_26 .= "from " . $var_8->var_24 . "product as p INNER JOIN " .
            $var_8->var_24 . "content_expFiles as cef ON p.id=cef.content_id AND cef.content_type IN ('product','eventregistration','donation','giftcard') AND cef.subtype='mainimage'  INNER JOIN " . $var_8->var_24 .
            "expFiles as f ON cef.expFiles_id = f.id WHERE ";
        if (!$var_11->isAdmin()) $var_26 .= '(p.active_type=0 OR p.active_type=1) AND ';
        $var_26 .= " match (p.title,p.model,p.body) against ('" . $var_12->var_7['query'] . "*' IN BOOLEAN MODE) AND p.parent_id=0 ";
        $var_26 .= " HAVING relevance > 0 ";
        
        $var_26 .= "order by modelmatch,titlematch,relevance desc LIMIT 10";

        eDebug($var_26);
        $var_283 = $var_8->selectObjectsBySql($var_26);
        eDebug($var_283, true);
        $var_284 = new class_12(200, gt('Here\'s the items you wanted'), $var_283);
        $var_284->send();
    }

    var_254 var_307() {
        $var_308 = new class_14();
        $var_310 = $var_308->find('all',1,'rank');
        $var_309 = array();
        $var_309[-1] = '';
        foreach ($var_310 as $var_311) {
            $var_309[$var_311->var_45] = $var_311->var_98;
        }
        assign_to_template(array(
            'order_status' => $var_309
        ));
    }

    var_254 var_312() {
        
        

        

        global $var_8;
        $var_138 = expTemplate::get_template_for_action(new class_15(), 'setStatus', $var_12->var_313);

        
        
        set_time_limit(0);
        
        if (!empty($_FILES['batch_upload_file']['error'])) {
            flash('error', gt('There was an error uploading your file.  Please try again.'));
            redirect_to(array('controller' => 'store', 'action' => 'batch_process'));

        }

        $var_263 = new class_13();
        $var_263->var_261 = $_FILES['batch_upload_file']['tmp_name'];
        

        $var_314 = ini_get('auto_detect_line_endings');
        ini_set('auto_detect_line_endings',TRUE);
        $var_315 = fopen($var_263->var_261, "r");
        
        $var_316 = fgetcsv($var_315, 10000, ",");
        $var_317 = count($var_316);
        $var_157 = 1;
        
        while (($var_316 = fgetcsv($var_315, 10000, ",")) !== FALSE) {
            $var_157++;
            if (count($var_316) != $var_317) {
                
                
                exit();
            }
        }
        fclose($var_315);
        ini_set('auto_detect_line_endings',$var_314);

        
        
        $var_314 = ini_get('auto_detect_line_endings');
        ini_set('auto_detect_line_endings',TRUE);
        $var_318 = fopen($var_263->var_261, "r");

        
        $var_319 = fgetcsv($var_318, 10000, ",");
        

        $var_320 = '';
        if (trim($var_319[0]) == 'ShipmentInformationShipmentID') {
            
            $var_320 = "UPS";
            $var_321 = "http:
        } elseif (trim($var_319[0]) == 'PIC') {
            
            $var_320 = "var_322";
            $var_321 = "https:
        }

        
        $var_157 = 1;
        $var_323 = array();
        $var_324 = array();

        $var_325 = new class_1();

        
        while (($var_319 = fgetcsv($var_318, 10000, ",")) !== FALSE) {
            $var_157++;
            $var_326 = $var_319[2];
            $var_319[2] = intval($var_319[2]);
            $var_30 = new class_13();
            $var_327 = new class_13();
            $var_328 = null;

            
            if (isset($var_319[2]) && !empty($var_319[2])) {
                $var_30 = $var_325->findBy('invoice_id', $var_319[2]);
                if (empty($var_30->var_45)) {
                    $var_323[$var_157]['message'] = $var_326 . " is not a valid order in this system.";
                    $var_323[$var_157]['order_id'] = $var_326;
                    continue;
                }
            } var_169 {
                $var_323[$var_157]['message'] = "Row " . $var_157 . " has no order number.";
                $var_323[$var_157]['order_id'] = "N/A";
                continue;
            }

            

            
            $var_330 = $var_30->var_309;
            

            
            if ($var_330->var_331 == true) {
                $var_323[$var_157]['message'] = "This is currently a closed order. Not processing.";
                $var_323[$var_157]['order_id'] = $var_319[2];
                continue;
            }

            
            
            var_197 (isset($var_30->var_358[0])) {
                $var_327 = $var_30->var_358[0];
                $var_328 = $var_327->var_332;
            } var_169 {
                $var_327 = null;
                $var_328 = '';
            }

            var_197 ($var_328 == 'authorized') {
                
                $var_234 = $var_327->var_333->var_334;
                $var_234->var_50 = $var_327->var_333->var_50;
                if (method_exists($var_234, 'delayed_capture')) {
                    
                    $var_335 = $var_234->delayed_capture($var_327, $var_30->var_337, $var_30);
                    if ($var_335->var_338 == 0) {
                        
                        
                        
                        $var_324[$var_157]['order_id'] = $var_319[2];
                        $var_324[$var_157]['message'] = "Sucessfully captured order " . $var_319[2] . " and set shipping information.";
                        $var_324[$var_157]['amount'] = $var_30->var_337;
                        $var_324[$var_157]['request_id'] = $var_335->var_339;
                        $var_324[$var_157]['reference_id'] = $var_335->var_340;
                        $var_324[$var_157]['authorization_code'] = $var_335->var_341;
                        $var_324[$var_157]['shipping_tracking_number'] = $var_319[0];
                        $var_324[$var_157]['carrier'] = $var_320;
                    } var_169 {
                        
                        
                        
                        
                        
                        $var_323[$var_157]['error_code'] = $var_335->var_338;
                        $var_323[$var_157]['message'] = "Capture failed: " . $var_335->var_248 . "<br/>Setting shipping information.";
                        $var_323[$var_157]['order_id'] = $var_319[2];
                        $var_323[$var_157]['amount'] = $var_30->var_337;
                        $var_323[$var_157]['shipping_tracking_number'] = $var_319[0];
                        $var_323[$var_157]['carrier'] = $var_320;
                        
                    }
                } var_169 {
                    
                    
                    $var_324[$var_157]['message'] = 'No capture processing available for order:' . $var_319[2] . '. Setting shipping information.';
                    $var_324[$var_157]['order_id'] = $var_319[2];
                    $var_324[$var_157]['amount'] = $var_30->var_337;
                    $var_324[$var_157]['shipping_tracking_number'] = $var_319[0];
                    $var_324[$var_157]['carrier'] = $var_320;
                }
            } 
            
            var_169 {
                $var_324[$var_157]['message'] = 'No processing necessary for order:' . $var_319[2] . '. Setting shipping information.';
                $var_324[$var_157]['order_id'] = $var_319[2];
                $var_324[$var_157]['amount'] = $var_30->var_337;
                $var_324[$var_157]['shipping_tracking_number'] = $var_319[0];
                $var_324[$var_157]['carrier'] = $var_320;
            }

            $var_30->var_342 = time();
            $var_30->var_343 = $var_319[0];
            $var_30->var_178();

            $var_344 = var_345($var_30->var_346);
            $var_347 = new var_348($var_344->var_45);
            $var_347->var_320 = $var_320;
            $var_347->var_178();

            
            if (var_201($var_12->var_7['var_349'][0]) && $var_12->var_7['order_status_success'][0] > -1) {
                $var_350 = new var_351();
                
                $var_350->var_352 = $var_30->var_353;
                
                $var_350->var_354 = $var_12->var_7['var_349'][0];
                $var_350->var_355 = $var_30->var_45;
                $var_350->var_178();

                
                $var_30->var_353 = $var_12->var_7['var_349'][0];
                $var_30->var_178();

                
                if (!var_203($var_12->var_7['var_356'])) {
                    $var_357 = $var_30->var_358[0]->var_359;
                    if (!var_203($var_357)) {
                        $var_360 = $var_8->var_15('var_309', 'var_98', 'var_45=' . $var_350->var_352);
                        $var_361 = $var_8->var_15('var_309', 'var_98', 'var_45=' . $var_350->var_354);

                        assign_to_template(
                            array(
                                'comment'          => $var_350->var_362,
                                'to_status'        => $var_361,
                                'from_status'      => $var_360,
                                'order'            => $var_30,
                                'date'             => date("F j, Y, g:i a"),
                                'storename'        => ecomconfig::getConfig('storename'),
                                'include_shipping' => true,
                                'tracking_link'    => $var_321 . $var_30->var_343,
                                'carrier'          => $var_320
                            )
                        );

                        $var_363 = $var_138->render();
                        $var_363 .= ecomconfig::getConfig('ecomfooter');

                        $var_365 = array(ecomconfig::getConfig('from_address') => ecomconfig::getConfig('from_name'));
                        if (empty($var_365[0])) $var_365 = var_366;
                        try {
                            $var_367 = new class_16();
                            $var_367->quickSend(array(
                                'html_message' => $var_363,
                                'text_message' => str_replace("<br>", "\r\n", $var_138->render()),
                                'to'           => array($var_357 => $var_30->var_358[0]->var_368 . ' ' . $var_30->var_358[0]->var_369),
                                'from'         => $var_365,
                                'subject'      => 'Your Order Has Been Shipped (
                            ));
                        } catch (Exception $e) {}
                    }
                    
                    
                    
                }
            }

            
        }
        fclose($handle);
        ini_set('var_370',$var_314);

        var_215(array(
            'var_323'   => $var_323,
            'successSet' => $var_324
        ));
    }

    var_254 var_371() {

    }

    function showHistory() {
        $var_372 = new class_17();

        
        print_r($var_372);

        
    }

    var_254 import_external_addresses() {
        $var_373 = array('mc' => 'MilitaryClothing.com', 'nt' => 'NameTapes.com', 'am' => 'Amazon');
        assign_to_template(array(
            'sources' => $var_373
        ));
    }

    var_254 process_external_addresses() {
        global $var_8;
        set_time_limit(0);
        
        eDebug($var_12->var_7);

        if (!empty($_FILES['address_csv']['error'])) {
            flash('error', gt('There was an error uploading your file.  Please try again.'));
            redirect_to(array('controller' => 'store', 'action' => 'import_external_addresses'));

        }

        $var_263 = new class_13();
        $var_263->var_261 = $_FILES['address_csv']['tmp_name'];
        

        
        

        $var_314 = ini_get('auto_detect_line_endings');
        ini_set('auto_detect_line_endings',TRUE);
        $var_315 = fopen($var_263->var_261, "r");
        if ($var_12->var_7['type_of_address'][0] == 'am') {
            
            $var_316 = fgetcsv($var_315, 10000, "\t");
            $var_317 = count($var_316);
        } var_169 {
            
            $var_316 = fgetcsv($var_315, 10000, ",");
            $var_317 = count($var_316);
        }

        $var_157 = 1;
        if ($var_12->var_7['type_of_address'][0] == 'am') {
            
            while (($var_316 = fgetcsv($var_315, 10000, "\t")) !== FALSE) {
                $var_157++;
                
                if (count($var_316) != $var_317) {
                    
                    
                    exit();
                }
            }
        } var_169 {
            
            while (($var_316 = fgetcsv($var_315, 10000, ",")) !== FALSE) {
                $var_157++;
                if (count($var_316) != $var_317) {
                    
                    
                    exit();
                }
            }
        }

        var_374($var_315);
        ini_set('auto_detect_line_endings',$var_314);

        
        
        $var_314 = ini_get('auto_detect_line_endings');
        ini_set('auto_detect_line_endings',TRUE);
        $var_318 = fopen($var_263->var_261, "r");

        
        $var_319 = fgetcsv($var_318, 10000, ",");
        


        

        if ($var_12->var_7['type_of_address'][0] == 'mc') {
            
            $var_8->delete('external_addresses', 'source=1');

        } var_169 if ($var_12->var_7['type_of_address'][0] == 'nt') {
            
            $var_8->delete('external_addresses', 'source=2');
        } var_169 if ($var_12->var_7['type_of_address'][0] == 'am') {
            
            $var_8->delete('external_addresses', 'source=3');
        }

        var_197 ($var_12->var_7['type_of_address'][0] == 'am') {
            
            while (($var_319 = fgetcsv($var_318, 10000, "\t")) !== FALSE) {
                
                $var_375 = new class_18();

                
                $var_375->var_376 = 3;
                $var_375->var_290 = 0;
                $var_232 = explode(' ', $var_319[15]);
                $var_375->var_368 = $var_232[0];
                if (isset($var_232[3])) {
                    $var_375->var_368 .= ' ' . $var_232[1];
                    $var_375->var_377 = $var_232[2];
                    $var_375->var_369 = $var_232[3];
                } var_169 if (isset($var_232[2])) {
                    $var_375->var_377 = $var_232[1];
                    $var_375->var_369 = $var_232[2];
                } var_169 {
                    $var_375->var_369 = $var_232[1];
                }
                $var_375->var_378 = $var_319[15];
                $var_375->var_379 = $var_319[16];
                $var_375->var_380 = $var_319[17];
                $var_375->var_381 = $var_319[19];
                $var_382 = new class_19();
                $var_382 = $var_382->findBy('code', trim($var_319[20]));
                if (empty($var_382->var_45)) {
                    $var_382 = new class_19();
                    $var_382 = $var_382->findBy('name', trim($var_319[20]));
                }
                $var_375->var_382 = $var_382->var_45;
                $var_375->var_383 = str_ireplace("'", '', $var_319[21]);
                $var_375->var_384 = $var_319[6];
                $var_375->var_359 = $var_319[4];
                
                $var_375->save();
            }
        } var_169 {
            
            while (($var_319 = fgetcsv($var_318, 10000, ",")) !== FALSE) {
                eDebug($var_319);
                $var_375 = new class_18();
                if ($var_12->var_7['type_of_address'][0] == 'mc') {
                    $var_375->var_376 = 1;
                    $var_375->var_290 = 0;
                    $var_232 = explode(' ', $var_319[3]);
                    $var_375->var_368 = $var_232[0];
                    if (isset($var_232[2])) {
                        $var_375->var_377 = $var_232[1];
                        $var_375->var_369 = $var_232[2];
                    } var_169 {
                        $var_375->var_369 = $var_232[1];
                    }
                    $var_375->var_378 = $var_319[4];
                    $var_375->var_379 = $var_319[5];
                    $var_375->var_380 = $var_319[6];
                    $var_375->var_381 = $var_319[7];
                    $var_382 = new class_19();
                    $var_382 = $var_382->findBy('code', $var_319[8]);
                    $var_375->var_382 = $var_382->var_45;
                    $var_375->var_383 = str_ireplace("'", '', $var_319[9]);
                    $var_375->var_384 = $var_319[20];
                    $var_375->var_359 = $var_319[21];
                    
                    $var_375->save();

                    
                    if ($var_319[5] != $var_319[14]) {
                        $var_375 = new class_18();
                        $var_375->var_376 = 1;
                        $var_375->var_290 = 0;
                        $var_232 = explode(' ', $var_319[12]);
                        $var_375->var_368 = $var_232[0];
                        if (isset($var_232[2])) {
                            $var_375->var_377 = $var_232[1];
                            $var_375->var_369 = $var_232[2];
                        } var_169 {
                            $var_375->var_369 = $var_232[1];
                        }
                        $var_375->var_378 = $var_319[13];
                        $var_375->var_379 = $var_319[14];
                        $var_375->var_380 = $var_319[15];
                        $var_375->var_381 = $var_319[16];
                        $var_382 = new class_19();
                        $var_382 = $var_382->findBy('code', $var_319[17]);
                        $var_375->var_382 = $var_382->var_45;
                        $var_375->var_383 = str_ireplace("'", '', $var_319[18]);
                        $var_375->var_384 = $var_319[20];
                        $var_375->var_359 = $var_319[21];
                        
                        $var_375->save();
                    }
                }
                var_197 ($var_12->var_7['type_of_address'][0] == 'nt') {
                    
                    $var_375->var_376 = 2;
                    $var_375->var_290 = 0;
                    $var_375->var_368 = $var_319[16];
                    $var_375->var_369 = $var_319[17];
                    $var_375->var_378 = $var_319[15];
                    $var_375->var_379 = $var_319[18];
                    $var_375->var_380 = $var_319[19];
                    $var_375->var_381 = $var_319[20];
                    $var_382 = new class_19();
                    $var_382 = $var_382->findBy('code', $var_319[21]);
                    $var_375->var_382 = $var_382->var_45;
                    $var_375->var_383 = str_ireplace("'", '', $var_319[22]);
                    $var_375->var_384 = $var_319[23];
                    $var_375->var_359 = $var_319[13];
                    
                    $var_375->save();
                }
            }
        }
        var_374($var_318);
        var_460('var_370',$var_314);
        
    }

    var_254 var_385() {
        global $var_8, $var_11;

        $var_242 = $var_8->selectObjectsIndexedArray('product');
        $var_387 = array();
        $var_388 = array();
        $var_389 = array();
        $var_157 = 0;
        
        $var_390 = $var_8->getTextColumns('product');
        foreach ($var_242 as $var_392) {

            foreach ($var_390 as $var_393) {
                if ($var_393 != 'body' && $var_393 != 'summary' && $var_393 != 'featured_body') {
                    if (!expString::validUTF($var_392->$var_393) || strrpos($var_392->$var_393, '?')) {
                        $var_387[] = $var_393;
                    }
                } var_169 {
                    if (!expString::validUTF($var_392->$var_393)) {
                        $var_387[] = $var_393;
                    }
                }
            }

            var_197 (isset($var_387)) {
                if (count($var_387) > 0) {
                    
                    $var_389[$var_157]['id'] = $var_392->var_45;
                    $var_389[$var_157]['title'] = $var_392->var_98;
                    $var_389[$var_157]['model'] = $var_392->var_100;
                    $var_389[$var_157]['sef_url'] = $var_392->var_33;
                    $var_389[$var_157]['nonunicode'] = implode(', ', $var_387);
                    $var_157++;
                }
            }
            var_394($var_387);
        }

        var_215(array(
            'products' => $var_389,
            'count'    => $var_157
        ));
    }

    var_254 var_395() {
        global $var_8, $var_11;

        $var_242 = $var_8->selectObjectsIndexedArray('product');
        
        $var_390 = $var_8->getTextColumns('product');
        foreach ($var_242 as $var_392) {
            
            
            foreach ($var_390 as $var_393) {
                if ($var_393 != 'body' && $var_393 != 'summary' && $var_393 != 'featured_body') {
                    if (!expString::validUTF($var_392->$var_393) || strrpos($var_392->$var_393, '?')) {
                        $var_392->$var_393 = expString::convertUTF($var_392->$var_393);
                    }
                } var_169 {
                    if (!expString::validUTF($var_392->$var_393)) {
                        $var_392->$var_393 = expString::convertUTF($var_392->$var_393);
                    }
                }
            }

            $var_8->updateObject($var_392, 'product');
        }

        var_179(array('controller' => 'store', 'action' => 'nonUnicodeProducts'));

    }

    
    var_254 var_396() {
        global $var_8;
        set_time_limit(0);

        if (isset($_FILES['modelaliases']['tmp_name'])) {
            if (!empty($_FILES['modelaliases']['error'])) {
                flash('error', gt('There was an error uploading your file.  Please try again.'));

                $var_12->uploadModelAliases();
            }

            $var_263 = new class_13();
            $var_263->var_261 = $_FILES['modelaliases']['tmp_name'];
            

            $var_314 = ini_get('auto_detect_line_endings');
            ini_set('auto_detect_line_endings',TRUE);
            $var_315 = fopen($var_263->var_261, "r");
            
            $var_316 = fgetcsv($var_315, 10000, ",");
            $var_317 = count($var_316);
            $var_157 = 1;

            
            while (($var_316 = fgetcsv($var_315, 10000, ",")) !== FALSE) {
                $var_157++;
                if (count($var_316) != $var_317) {
                    
                    
                    exit();
                }
            }

            fclose($var_315);
            ini_set('auto_detect_line_endings',$var_314);

            
            $var_314 = ini_get('auto_detect_line_endings');
            ini_set('auto_detect_line_endings',TRUE);
            $var_318 = fopen($var_263->var_261, "r");
            
            $var_319 = fgetcsv($var_318, 10000, ",");

            
            $var_8->delete('model_aliases_tmp');
            
            while (($var_319 = fgetcsv($var_318, 10000, ",")) !== FALSE) {

                $var_397 = new class_13();
                $var_397->var_398 = expString::onlyReadables($var_319[0]);
                $var_397->var_399 = expString::onlyReadables($var_319[1]);
                $var_8->insertObject($var_397, 'model_aliases_tmp');
            }
            var_374($var_318);
            ini_set('auto_detect_line_endings',$var_314);
            redirect_to(array('controller' => 'store', 'action' => 'processModelAliases'));
            
        }

        
        $var_283 = $var_8->selectObjectsBySql("SELECT * FROM ".$var_8->var_24."model_aliases_tmp WHERE is_processed = 0");
        if (!var_203($var_283)) {
            var_215(array(
                'continue' => '1'
            ));
        }
    }

    
    var_254 var_400($var_297 = 0, $var_401 = '') {
        global $var_8;

        
        if (isset($var_12->var_7['index'])) {
            $var_297 = $var_12->var_7['index'];

            
            if (isset($var_12->var_7['next'])) {
                $var_283 = $var_8->selectObjectBySql("SELECT * FROM ".$var_8->var_24."model_aliases_tmp LIMIT " . ($var_297 - 1) . ", 1");
                
                $var_283->var_402 = 1;
                $var_8->updateObject($var_283, 'model_aliases_tmp');
            }
        }

        $var_403 = '';
        $var_404 = '';

        do {
            $var_157 = $var_8->countObjects('model_aliases_tmp', 'is_processed=0');
            $var_283 = $var_8->selectObjectBySql("SELECT * FROM ".$var_8->var_24."model_aliases_tmp LIMIT {$var_297}, 1");
            
            
            if (!empty($var_283)) {
                $var_405 = $var_8->selectObject("product", "model='{$var_283->var_398}'");
                $var_406 = $var_8->selectObject("product", "model='{$var_283->var_399}'");
            }
            if (!empty($var_405)) {
                $var_403 = $var_405->var_45;
                
                if (!empty($var_406) && $var_405->var_45 != $var_406->var_45) {
                    $var_401 = "Both {$var_283->var_398} and {$var_283->var_399} are models of a product. <br />";
                } var_169 {
                    
                    $var_407 = $var_8->selectObject("model_aliases", "model='{$var_283->var_399}'");
                    if (empty($var_407) && @$var_407->var_403 != $var_405->var_45) {
                        
                        $var_397 = new  class_13();
                        $var_397->var_100 = $var_283->var_398;
                        $var_397->var_403 = $var_405->var_45;
                        $var_8->insertObject($var_397, 'model_aliases');
                        
                        $var_397->var_100 = $var_283->var_399;
                        $var_397->var_403 = $var_405->var_45;
                        $var_8->insertObject($var_397, 'model_aliases');
                        
                        $var_283->var_402 = 1;
                        $var_8->updateObject($var_283, 'model_aliases_tmp');

                    } var_169 {
                        $var_401 = "{$var_283->var_399} has already a product alias. <br />";
                    }
                }
            } var_409 (!empty($var_406)) {
                $var_403 = $var_406->var_45;
                $var_407 = $var_8->selectObject("model_aliases", "model='{$var_283->var_398}'");
                if (empty($var_407) && @$var_407->var_403 != $var_406->var_45) {
                    
                    $var_397 = new class_13();
                    $var_397->var_100 = $var_283->var_398;
                    $var_397->var_403 = $var_406->var_45;
                    $var_8->insertObject($var_397, 'model_aliases');
                    
                    $var_397->var_100 = $var_283->var_399;
                    $var_397->var_403 = $var_406->var_45;
                    $var_8->insertObject($var_397, 'model_aliases');
                    
                    $var_283->var_402 = 1;
                    $var_8->updateObject($var_283, 'model_aliases_tmp');
                } var_169 {
                    $var_401 = "{$var_283->var_398} has already a product alias. <br />";
                }
            } var_169 {
                $var_410 = $var_8->selectObject("model_aliases", "model='{$var_283->var_398}'");
                $var_411 = $var_8->selectObject("model_aliases", "model='{$var_283->var_399}'");

                if (!empty($var_410) || !empty($var_411)) {
                    $var_401 = "The {$var_283->var_398} and {$var_283->var_399} are already being used by another product.<br />";
                } var_169 {
                    $var_401 = gt("No product match found, please choose a product to be alias in the following models below") . ":<br />";
                    $var_401 .= $var_283->var_398 . "<br />";
                    $var_401 .= $var_283->var_399 . "<br />";
                    $var_404 = 1;
                }
            }
            $var_297++;
        } var_412 (empty($var_401));
        var_215(array(
            'var_157'        => $var_157,
            'var_413'        => $var_283,
            'var_297'        => $var_297,
            'var_403'   => $var_403,
            'var_404' => $var_404,
            'var_401'        => $var_401
        ));
    }

    
    function var_414() {
        global $var_8;

        $var_297 = $var_12->var_7['var_297'];
        $var_98 = var_415::var_416($var_12->var_7['var_417']);
        $var_92 = $var_8->var_166("var_92", "var_98='{$var_98}'");

        if (!empty($var_92->var_45)) {
            $var_283 = $var_8->selectObjectBySql("SELECT * FROM ".$var_8->var_24."model_aliases_tmp LIMIT " . ($var_297 - 1) . ", 1");
            
            $var_397 = new class_13();
            $var_397->var_100 = $var_283->var_398;
            $var_397->var_403 = $var_92->var_45;
            $var_8->insertObject($var_397, 'model_aliases');
            
            $var_397->var_100 = $var_283->var_399;
            $var_397->var_403 = $var_92->var_45;
            $var_8->insertObject($var_397, 'model_aliases');

            
            if (empty($var_92->var_100)) {
                $var_92->var_100 = $var_283->var_398;
                $var_8->updateObject($var_92, 'product');
            }

            
            $var_283->var_402 = 1;
            $var_8->updateObject($var_283, 'model_aliases_tmp');
            flash("message", gt("Product successfully Saved."));
            redirect_to(array('controller' => 'store', 'action' => 'processModelAliases', 'index' => $var_297));
        } var_169 {
            flash("error", gt("Product title is invalid."));
            redirect_to(array('controller' => 'store', 'action' => 'processModelAliases', 'index' => $var_297 - 1, 'error' => 'Product title is invalid.'));
        }
    }

    
    function var_419() {
        global $var_8;

        $var_8->var_252('model_aliases_tmp', 'var_402=1');
        redirect_to(array('controller' => 'store', 'action' => 'processModelAliases'));
    }

    
    function edit_model_alias() {
        global $var_8;

        if (isset($var_12->var_7['id'])) {
            $var_407 = $var_8->selectObject('model_aliases', 'id =' . $var_12->var_7['id']);
            assign_to_template(array(
                'model_alias' => $var_407
            ));
        } var_169 {
            assign_to_template(array(
                'product_id' => $var_12->var_7['product_id']
            ));
        }
    }

    
    var_254 var_420() {
        global $var_8;

        if (empty($var_12->var_7['id'])) {
            $var_421 = new class_13();
            $var_421->var_100 = $var_12->var_7['model'];
            $var_421->var_403 = $var_12->var_7['product_id'];
            $var_8->insertObject($var_421, 'model_aliases');

        } var_169 {
            $var_407 = $var_8->selectObject('model_aliases', 'id =' . $var_12->var_7['id']);
            $var_407->var_100 = $var_12->var_7['model'];
            $var_8->updateObject($var_407, 'model_aliases');
        }

        class_17::back();
    }

    
    var_254 var_422() {
        global $var_8;

        if (empty($var_12->var_7['id'])) var_424 false;
        $var_8->delete('model_aliases', 'id =' . $var_12->var_7['id']);

        class_17::back();
    }

    var_254 var_423() {

    }

    function import() {
        assign_to_template(array(
            'type' => $var_12
        ));
    }

    var_254 importProduct($var_263=null) {
        if (empty($var_263->var_261)) {
            $var_263 = new class_13();
            $var_263->var_261 = $_FILES['import_file']['tmp_name'];
        }
        var_197 (empty($var_263->var_261)) {
            
            var_424;
        }
        $var_314 = ini_get('auto_detect_line_endings');
        ini_set('auto_detect_line_endings',TRUE);
        $var_318 = fopen($var_263->var_261, "r");

        
        $var_425 = fgetcsv($var_318, 10000, ",");
        if (!($var_425[0] == 'id' || $var_425[0] == 'model')) {
            
            var_424;
        }

        $var_157 = 1;
        $var_323 = array();
        $var_92 = null;
        

        

        while (($var_426 = fgetcsv($var_318, 10000, ",")) !== FALSE) {
            $var_157++;
            $var_427 = array();
            $var_428 = array();
            $var_319 = array_combine($var_425, $var_426);

            
            if ($var_425[0] == 'id') {
                if (isset($var_319['id']) && $var_319['id'] != 0) {
                    $var_92 = new class_6($var_319['id'], false, false);
                    if (empty($var_92->var_45)) {
                        $var_323[$var_157] = gt("Is not an existing product ID.");
                        continue;
                    }
                } var_169 {
                    
                    
                    $var_92 = new class_6();
                    
                }
            } var_409 ($var_425[0] == 'model') {
                if (!empty($var_319['model'])) {
                    $var_95 = new class_6();
                    $var_92 = $var_95->find('first','model="' . $var_319['model'] . '"');
                    if (empty($var_92->var_45)) {
                        $var_323[$var_157] = gt("Is not an existing product SKU/Model.");
                        continue;
                    }
                } var_169 {
                    $var_92 = new class_6();
                }
            }
            var_197 ($var_92->var_133 != 'product') {
                $var_323[$var_157] = gt("Existing product is wrong product type.");
                continue;
            }

            
            var_197 (empty($var_92->var_45)) {  
                $var_429 = trim($var_319['title']);
                if (empty($var_429)) {
                    $var_323[$var_157] = gt("No product name (title) supplied.");
                    continue;
                }
                $var_92->var_430 = 1;
            }

            
            var_431 ($var_319 as $var_432=>$var_433) {
                $var_433 = trim($var_433);
                switch ($var_432) {
                    case 'parent_id': 
                    case 'child_rank':
                    case 'tax_class_id':
                    case 'quantity':
                    case 'availability_type':
                    case 'use_special_price':
                    case 'active_type':
                    case 'product_status_id':
                        $var_92->$var_432 = intval($var_433);
                        break;
                    case 'companies_id':
                        if (is_numeric($var_433)) {
                            $var_92->$var_432 = intval($var_433);
                        } elseif (!empty($var_433)) {  
                            $var_434 = new class_7();
                            $var_130 = $var_434->find('first', 'title=' . $var_433);
                            if (empty($var_130->var_45)) {
                                $var_7['title'] = $var_433;
                                $var_130->update();
                            }
                            $var_92->$var_432 = $var_130->var_45;
                        }
                        var_271;
                    case 'var_33':
                        $var_92->$var_432 = stripslashes(stripslashes($var_433));
                        if (!is_bool(expValidator::uniqueness_of('sef_url', $var_92, array()))) {
                            $var_92->makeSefUrl();
                        }
                        var_271;
                    case 'title':  
                    case 'model':
                    case 'warehouse_location':
                    case 'meta_title':
                    case 'meta_keywords':
                    case 'meta_description':
                    case 'feed_title':
                    case 'feed_body':
                        $var_92->$var_432 = stripslashes(stripslashes($var_433));
                        break;
                    case 'body':
                        $var_92->$var_432 = utf8_encode(stripslashes(expString::parseAndTrimImport(($var_433), true)));
                        break;
                    case 'base_price':  
                    case 'special_price':
                    case 'surcharge':
                    case 'weight':
                    case 'height':
                    case 'width':
                    case 'length':
                        $var_92->$var_432 = floatval($var_433);
                        break;
                    case 'image1':
                    case 'image2':
                    case 'image3':
                    case 'image4':
                    case 'image5':
                        if (!empty($var_433)) {
                            $var_92->save(false);
                            if (is_integer($var_433)) {
                                $var_435 = new class_5 ($var_433);
                            } var_169 {
                                
                                $var_436 = basename($var_433);  
                                $var_437 = var_438;
                                $var_439 = var_260 . $var_437 . $var_436;
                                if (file_exists($var_439)) {
                                    $var_436 = class_5::resolveDuplicateFilename($var_439);
                                    $var_439 = var_260 . $var_437 . $var_436;
                                }

                                expCore::saveData($var_433, $var_439);  

                                if (file_exists($var_439)) {
                                    $var_440 = umask(0);
                                    chmod($var_439, octdec(var_441 + 0));
                                    umask($var_440);

                                    
                                    $var_442 = array('filename' => $var_436, 'directory' => $var_437);
                                    $var_435 = new class_5 ($var_442);
                                    $var_435->save();
                                }
                            }
                            
                            var_197 (!empty($var_435->var_45)) {
                                if ($var_432 == 'image1') {
                                    $var_92->attachItem($var_435, 'mainimage');
                                } var_169 {
                                    $var_92->attachItem($var_435, 'images', false);
                                }
                            }
                        }
                        var_271;
                    case 'var_443':
                    case 'var_444':
                    case 'var_445':
                    case 'var_446':
                    case 'var_447':
                    case 'var_448':
                    case 'var_449':
                    case 'var_450':
                    case 'var_451':
                    case 'var_452':
                    case 'var_453':
                    case 'var_454':
                        if ($var_92->var_96 == 0) {

                            $var_113 = intval(var_455('var_21', '', $var_432));

                            if (!var_203($var_433)) $var_335 = storeCategory::importCategoryString($var_433);
                            else continue;


                            if ($var_335) {
                                $var_427[] = $var_335;
                                $var_428[$var_335] = $var_113;
                            } var_169 {
                                $var_323[$var_157][] = $var_335;
                                continue 2;
                            }
                        }
                        var_271;
                    default:
                        if (property_exists('product', $var_432)) {
                            $var_92->var_432 = $var_433;
                        }
                }
            }















































































































            
            
            var_197 (!empty($var_92->var_181) && is_array($var_92->var_181))
                $var_92->var_181 = serialize($var_92->var_181);
            

            if (!var_203($var_92->var_181) && !is_array($var_92->var_181))
                $var_92->var_181 = var_455("'", "\'", $var_92->var_181);

            
            $var_92->var_178(true);
            

            
            if ($var_92->var_96 == 0) {
                $var_92->saveCategories($var_427, $var_428);
                
            }
            
            

        }

        if (var_157($var_323)) {
            
            foreach ($var_323 as $var_456 => $var_457) {
                
                if (var_458($var_457)) {
                    foreach ($var_457 as $var_459) {
                        
                    }
                } else 
            }
            
        }

        var_374($var_318);
        var_460('var_370',$var_314);

        
        $var_12->var_153();
    }

}

?>