<?php


















abstract class var_0 {
    protected $var_1 = ''; 
    public $var_2 = ''; 
    public $var_3 = null; 


    public $var_4 = ''; 
    public $var_5 = ''; 

    public $var_6 = array(); 
    public $var_7 = array(); 

    
    protected $var_8 = array(  
        'manage'    => 'Manage',
        'configure' => 'Configure',
        'create'    => 'Create',
        'edit'      => 'Edit',
        'delete'    => 'Delete',
        'approve'  => 'Approval',
    );
    protected $var_9 = array();  
    protected $var_10 = array();  
    public $var_11 = array(); 

    public $var_12 = ''; 
    public $var_13 = ''; 
    public $var_14 = ''; 
    public $var_15 = ''; 

    public $var_16 = array(); 
    public $var_17 = array(); 
    public $var_18 = null; 

    public $var_19 = 'stable'; 

    public $var_20 = false;

    
    public function fn_1($var_21 = null, $var_17 = array()) {
        
        $var_22->var_3 = new class_0($var_22);
        $var_22->var_1 = $var_22->var_3->getName();
        $var_22->var_2 = substr($var_22->var_3->getName(), 0, -10);
        $var_22->var_12 = __realpath($var_22->var_3->getFileName());

        
        $var_25 = explode('/', $var_22->var_12);


        
        array_pop($var_25); 
        $var_25[count($var_25) - 1] = 'views';
        array_push($var_25, $var_22->var_2);
        $var_22->var_14 = implode('/', array_slice($var_25, -3, 3));

        
        $var_26 = array_search('core', $var_25);
        if ($var_26) {
            $var_22->var_13 = var_27 . 'framework/modules/' . $var_22->var_14;
        } else {
            $var_22->var_13 = implode('/', $var_25);
        }

        
        array_pop($var_25);
        $var_25[count($var_25) - 1] = 'assets';

        $var_26 = array_search('framework', $var_25);  
        if (!$var_26) $var_26 = array_search('themes', $var_25);
        $var_22->var_15 = var_28 . implode('/', array_slice($var_25, $var_26)) . "/";

        
        if (empty($var_22->var_4)) $var_22->var_4 = get_model_for_controller($var_22->var_1);
        $var_29 = $var_22->var_4;
        if (class_exists($var_29)) {
            $var_22->$var_29 = new $var_29(null, false, false);
            $var_22->var_5 = $var_22->$var_29->var_30;
        } else {
            $var_22->var_4 = 'expRecord';
            $var_22->$var_29 = new class_1(null, false, false);
            $var_22->var_5 = null;
        }

        
        $var_22->var_18 = expCore::makeLocation($var_22->var_2, $var_21, null);

        
        if (var_31 && $var_22->$var_29->var_32) {
            $var_33 = 99;
            if (expSession::exists("uilevel")) $var_33 = expSession::get("uilevel");
            if (!expPermissions::check('approve', $var_22->var_18)) {
                $var_22->$var_29->var_34 = true;
            } elseif ($var_33 == var_35 && isset($var_33)) {
                $var_22->$var_29->var_34 = true;  
            }
        }

        
        $var_16 = new class_2($var_22->var_18);
        $var_22->var_16 = $var_16->var_16;

        $var_22->var_17 = $var_17;
    }

    
    public function fn_2() {
        return static::fn_3();
    }

    
    public static function fn_3() {
        return gt("Exponent Base Controller");
    }

    
    public static function fn_4() {
        return gt("This is the base controller which most Exponent modules inherit their methods from.");
    }

    
    public static function fn_5() {
        return "OIC Group, Inc";
    }

    
    public static function fn_6() {
        return true;
    }

      
    public static function fn_7() {
        return true;
    }

      
    public static function fn_8() {
        return true;
    }

    
    public static function fn_9() {
        return false;
    }

    
    public static function fn_10() {
        return false;
    }

    
    public static function fn_11() {
        return false;
    }

    
    public static function fn_12() {
        return false;
    }

      
    public static function fn_13() {
        return false;
    }

    
    public function fn_14() {
        assign_to_template(array(
            'asset_path' => $var_22->var_15,
            'model_name' => $var_22->var_4,
            'table'      => $var_22->var_5,
            'controller' => $var_22->var_2,
            'config'     => $var_22->var_16
        ));
    }

    
    public function fn_15() {
        expHistory::set('viewable', $var_22->var_17);

        $var_40 = new class_3(array(
            'model'      => $var_22->var_4,
            'where'      => static::fn_6() ? $var_22->fn_16() : null,
            'limit'      => (isset($var_22->var_17['limit']) && $var_22->var_17['limit'] != '') ? $var_22->var_17['limit'] : 10,
            'order'      => isset($var_22->var_17['order']) ? $var_22->var_17['order'] : null,
            'page'       => (isset($var_22->var_17['page']) ? $var_22->var_17['page'] : 1),
            'controller' => $var_22->var_2,
            'action'     => $var_22->var_17['action'],
            'src'        => static::fn_6() == true ? $var_22->var_18->var_21 : null,
            'columns'    => array(
                gt('ID
                gt('var_42') => 'title',
                gt('Body')  => 'body'
            ),
        ));

        assign_to_template(array(
            'page'  => $var_40,
            'items' => $var_40->var_43
        ));
    }

    
    public function fn_17() {
        global $var_44;

         
        expHistory::set('viewable', $var_22->var_17);
        $var_29 = $var_22->var_4;

        
        $var_45 = new class_4($var_22->var_17['tag']);

        
        $var_47 = $var_44->selectColumn($var_29, 'id', $var_22->fn_16());

        
        $var_49 = $var_45->findWhereAttachedTo($var_29);

        
        $var_51 = array();
        foreach ($var_49 as $var_52) {
            if (in_array($var_52->var_53, $var_47)) $var_51[] = $var_52;
        }

        
        $var_54 = 'created_at DESC';
        $var_40 = new class_3(array(
            'records'    => $var_51,
            'limit'      => (isset($var_22->var_16['limit']) && $var_22->var_16['limit'] != '') ? $var_22->var_16['limit'] : 10,
            'order'      => $var_54,
            'page'       => (isset($var_22->var_17['page']) ? $var_22->var_17['page'] : 1),
            'controller' => $var_22->var_2,
            'action'     => $var_22->var_17['action'],
            'src'=>$var_22->var_18->var_21,
            'columns'    => array(
                gt('Title') => 'title'
            ),
        ));

        $var_40->var_43 = expSorter::sort(array('array' => $var_40->var_43, 'sortby' => 'created_at', 'order' => 'DESC', 'ignore_case' => true));

        assign_to_template(array(
            'page'        => $var_40,
            'items'       => $var_40->var_43,
            'moduletitle' => ucfirst($var_29) . ' ' . gt('items tagged with') . ' "' . expString::sanitize($var_22->var_17['tag']) . '"',
            'rank'        => ($var_54 === 'rank') ? 1 : 0
        ));
    }

    
    public function fn_18() {
        expHistory::set('viewable', $var_22->var_17);
        $var_29 = $var_22->var_4;

        $var_49 = $var_22->$var_29->find('all', $var_22->fn_16());
        $var_57 = array();
        foreach ($var_49 as $var_52) {
            foreach ($var_52->var_46 as $var_45) {
                if (isset($var_57[$var_45->var_53])) {
                    $var_57[$var_45->var_53]->var_58++;
                } else {
                    $var_59 = new class_4($var_45->var_53);
                    $var_57[$var_45->var_53] = $var_59;
                    $var_57[$var_45->var_53]->var_58 = 1;
                }
            }
        }





        $var_57 = expSorter::sort(array('array' => $var_57, 'order' => 'count DESC', 'type' => 'a'));
        if (!empty($var_22->var_16['limit'])) $var_57 = array_slice($var_57, 0, $var_22->var_16['limit']);
        $var_54 = isset($var_22->var_16['order']) ? $var_22->var_16['order'] : 'title ASC';
        if ($var_54 != 'hits') {
            $var_57 = expSorter::sort(array('array' => $var_57, 'order' => $var_54, 'ignore_case' => true, 'rank' => ($var_54 === 'rank') ? 1 : 0));
        }

        assign_to_template(array(
            'tags' => $var_57
        ));
    }

    
    public function fn_19() {
        expHistory::set('viewable', $var_22->var_17);
        $var_29 = $var_22->var_4;

        $var_49 = $var_22->$var_29->find('all', $var_22->fn_16());
        $var_60 = array();
        $var_60[0] = new class_5();
        $var_60[0]->var_53 = 0;
        $var_60[0]->var_61 = !empty($var_22->var_16['uncat']) ? $var_22->var_16['uncat'] : gt('Not Categorized');
        $var_60[0]->var_58 = 0;
        foreach ($var_49 as $var_52) {
            if (!empty($var_52->var_62)) {
                if (isset($var_60[$var_52->var_62[0]->var_53])) {
                    $var_60[$var_52->var_62[0]->var_53]->var_58++;
                } else {
                    $var_63 = new class_6($var_52->var_62[0]->var_53);
                    $var_60[$var_52->var_62[0]->var_53] = $var_63;
                    $var_60[$var_52->var_62[0]->var_53]->var_58 = 1;
                }
            } else {
                $var_60[0]->var_58++;
            }
        }





        $var_60 = expSorter::sort(array('array' => $var_60, 'order' => 'count DESC', 'type' => 'a'));
        if (!empty($var_22->var_16['limit'])) $var_60 = array_slice($var_60, 0, $var_22->var_16['limit']);
        $var_54 = isset($var_22->var_16['order']) ? $var_22->var_16['order'] : 'title ASC';
        if ($var_54 != 'count') {
            $var_60 = expSorter::sort(array('array' => $var_60, 'order' => $var_54, 'ignore_case' => true, 'rank' => ($var_54 === 'rank') ? 1 : 0));
        }

        assign_to_template(array(
            'cats' => $var_60
        ));
    }

    
    public function fn_20() {
	    expHistory::set('viewable', $var_22->var_17);
        $var_29 = $var_22->var_4;

        $var_49 = $var_22->$var_29->find('all');
        $var_65 = array();
        
        foreach ($var_49 as $var_52) {
            $var_66 = expCommentController::getComments(array('content_type'=>$var_29,'content_id'=>$var_52->var_53));
            if (!empty($var_66)) {
                foreach ($var_66 as $var_67) {
                    $var_67->var_68 = $var_52->var_61;
                    $var_67->var_69 = $var_52->var_69;
                }
                $var_65 = array_merge($var_65,$var_66);
            }
        }
        
        $var_65 = expSorter::sort(array('array' => $var_65, 'sortby' => 'created_at', 'order' => 'DESC', 'ignore_case' => true));
        $var_70 = (isset($var_22->var_16['headcount']) && $var_22->var_16['headcount'] != '') ? $var_22->var_16['headcount'] : 10;
        $var_64 = array_slice($var_65,0,$var_70);
	    assign_to_template(array(
            'comments'=>$var_64,
        ));
	}

    
    public function fn_21() {
        expHistory::set('viewable', $var_22->var_17);
        $var_29 = $var_22->var_4;

        
        $var_53 = null;
        if (isset($var_22->var_17['id'])) {
            $var_53 = $var_22->var_17['id'];
        } elseif (isset($var_22->var_17['title'])) {
            $var_53 = $var_22->var_17['title'];
        }

        $var_71 = new $var_29($var_53);
        if (empty($var_71->var_53))
            redirect_to(array('controller'=>'notfound','action'=>'page_not_found','title'=>$var_22->var_17['title']));

        $var_16 = class_2::getConfig($var_71->var_72);
        if (empty($var_22->var_16))
            $var_22->var_16 = $var_16;
        if (empty($var_22->var_18->var_21)) {
            $var_73 = expUnserialize($var_71->var_72);
            $var_22->var_18 = new class_5();
            $var_22->var_18->var_21 = $var_73->var_21;
        }

        assign_to_template(array(
            'record' => $var_71,
            'config' => $var_16
        ));
    }

    
    public function fn_22() {
        expHistory::set('viewable', $var_22->var_17);
        $var_29 = $var_22->var_4;
        
        
        $var_71 = $var_22->$var_29->find('first', "sef_url='" . $var_22->var_17['title'] . "'");
        if (!is_object($var_71)) {
            $var_71 = $var_22->$var_29->find('first', "title='" . $var_22->var_17['title'] . "'");
        }
        $var_22->var_18 = unserialize($var_71->var_72);

        assign_to_template(array(
            'record' => $var_71,
        ));
    }

    
    public function fn_23() {
        expHistory::set('viewable', $var_22->var_17);
        $var_74 = static::fn_6() ? $var_22->fn_16() : null;
        $var_70 = isset($var_22->var_17['limit']) ? $var_22->var_17['limit'] : 1;
        $var_54 = 'RAND()';
        assign_to_template(array(
            'items' => $var_22->var_75->find('all', $var_74, $var_54, $var_70)
        ));
    }

    
    public function fn_24() {
        global $var_44;

        
        expHistory::set('viewable', $var_22->var_17);

        
        $var_76 = new class_4();
        $var_29 = empty($var_22->var_17['model']) ? $var_22->var_4 : $var_22->var_17['model'];
        $var_77 = new $var_29();

        
        $var_78 = 'SELECT DISTINCT m.id FROM ' . $var_44->var_79 . $var_77->var_30 . ' m ';
        $var_78 .= 'JOIN ' . $var_44->var_79 . $var_76->var_80 . ' ct ';
        $var_78 .= 'ON m.id = ct.content_id WHERE (';
        $var_81 = true;

        if (isset($var_22->var_17['tags'])) {
            $var_55 = is_array($var_22->var_17['tags']) ? $var_22->var_17['tags'] : array($var_22->var_17['tags']);
        } elseif (isset($var_22->var_16['expTags'])) {
            $var_55 = $var_22->var_16['expTags'];
        } else {
            $var_55 = array();
        }

        foreach ($var_55 as $var_82) {
            $var_78 .= ($var_81) ? 'exptags_id=' . intval($var_82) : ' OR exptags_id=' . intval($var_82);
            $var_81 = false;
        }
        $var_78 .= ") AND content_type='" . $var_77->var_1 . "'";

        
        $var_83 = $var_44->selectObjectsBySql($var_78);
        $var_43 = array();
        foreach ($var_83 as $var_85) {
            $var_43[] = new $var_29($var_85->var_53);
        }

        assign_to_template(array(
            'items' => $var_43
        ));
    }

    
    public function fn_25() {
        $var_86 = array('controller' => $var_22->var_17['controller'], 'action' => 'edit');
        
        if (!empty($var_22->var_17['src'])) $var_86['src'] = $var_22->var_17['src'];
        redirect_to($var_86);
    }

    
    public function fn_26() {
        expHistory::set('editable', $var_22->var_17);
        $var_87 = class_4::getAllTags();
        $var_29 = $var_22->var_4;

        if (isset($var_22->var_17['id'])) {
            if (!isset($var_22->var_17['revision_id'])) {
                $var_71 = $var_22->$var_29->find($var_22->var_17['id']);
            } else {
                $var_88 = $var_22->$var_29->find($var_22->var_17['id']);
                $var_43 = $var_22->$var_29->find('revisions', $var_22->$var_29->var_89 . '=' . intval($var_22->var_17['id']) . ' AND revision_id=' . intval($var_22->var_17['revision_id']));
                $var_71 = $var_43[0];
                $var_71->var_90 = $var_88->var_91;
            }
        } else {
            $var_71 = new $var_29($var_22->var_17);
        }
        if (!empty($var_22->var_17['copy'])) {
            $var_71->var_53 = null;
            if (isset($var_71->var_69)) $var_71->var_69 = null;
        }
        assign_to_template(array(
            'record'     => $var_71,


            'taglist'    => $var_87
        ));
    }

    
    public function fn_27() {
        expHistory::set('editable', $var_22->var_17);
        $var_29 = $var_22->var_4;
        $var_71 = $var_22->$var_29->find($var_22->var_17['id']);

        $var_18 = expUnserialize($var_71->var_72);
        $var_18->var_21 = $var_22->var_18->var_21;
        $var_71->var_72 = serialize($var_18);

        $var_71->fn_28();

        expHistory::back();
    }

    
    public function fn_28() {
        global $var_44;

        
        if (array_key_exists('expTag', $var_22->var_17)) {
            if (isset($var_22->var_17['id'])) {
                $var_44->fn_29('content_expTags', 'content_type="' . (!empty($var_22->var_17['content_type']) ? $var_22->var_17['content_type'] : $var_22->var_4) . '" AND content_id=' . $var_22->var_17['id']);
            }
            $var_55 = explode(",", trim($var_22->var_17['expTag']));
            unset($var_22->var_17['expTag']);

            foreach ($var_55 as $var_45) {
                if (!empty($var_45)) {
                    $var_45 = strtolower(trim($var_45));
                    $var_45 = str_replace(array('"', "'"), "", $var_45); 
                    if (!empty($var_45)) {
                        $var_46 = new class_4($var_45);
                        if (empty($var_46->var_53))
                            $var_46->fn_28(array('title' => $var_45));
                        $var_22->var_17['expTag'][] = $var_46->var_53;
                    }
                }
            }
        }

        
        if (array_key_exists('expCat', $var_22->var_17) && !empty($var_22->var_17['expCat'])) {
            $var_94 = $var_22->var_17['expCat'];
            unset($var_22->var_17['expCat']);
            $var_22->var_17['expCat'][] = $var_94;
        }

        $var_29 = $var_22->var_4;
        $var_22->$var_29->fn_28($var_22->var_17);

        if ($var_22->fn_10()) {
            $var_22->fn_30($var_22->var_17);
        }

        
        if (!empty($var_22->var_17['send_status'])) {
            if ($var_22->var_1 == 'eventController') {
                facebookController::postEvent(
                    array('model' => $var_29, 'id' => $var_22->var_17['date_id'], 'src' => $var_22->var_18->var_21, 'config' => $var_22->var_16, 'orig_controller' => expModules::getControllerName($var_22->var_1))
                );
            } else {
                facebookController::postStatus(
                    array('model' => $var_29, 'id' => $var_22->$var_29->var_53, 'src' => $var_22->var_18->var_21, 'config' => $var_22->var_16, 'orig_controller' => expModules::getControllerName($var_22->var_1))
                );
            }
        }

        
        if (!empty($var_22->var_17['send_tweet'])) {
            if ($var_22->var_1 == 'eventController') {
                twitterController::postEventTweet(
                    array('model' => $var_29, 'id' => $var_22->var_17['date_id'], 'src' => $var_22->var_18->var_21, 'config' => $var_22->var_16, 'orig_controller' => expModules::getControllerName($var_22->var_1))
                );
            } else {
                twitterController::postTweet(
                    array('model' => $var_29, 'id' => $var_22->$var_29->var_53, 'src' => $var_22->var_18->var_21, 'config' => $var_22->var_16, 'orig_controller' => expModules::getControllerName($var_22->var_1))
                );
            }
        }

        
        if (!empty($var_22->var_17['send_ealerts'])) {
            redirect_to(array('controller' => 'ealert', 'action' => 'send_confirm', 'model' => $var_29, 'id' => $var_22->$var_29->var_53, 'src' => $var_22->var_18->var_21, 'orig_controller' => expModules::getControllerName($var_22->var_1)));
        } else {
            expHistory::back();
        }
    }

    
    public function fn_29() {
        $var_29 = $var_22->var_4;
        if (empty($var_22->var_17['id'])) {
            flash('error', gt('Missing id for the') . ' ' . $var_29 . ' ' . gt('you would like to delete'));
            expHistory::back();
        }

        $var_96 = new $var_29($var_22->var_17['id']);
        $var_97 = $var_96->fn_29();

        
        if ($var_22->fn_10()) {
            $var_98 = new class_7();

            $var_99 = $var_98->find('first', 'original_id=' . $var_22->var_17['id'] . " AND ref_module='" . $var_22->var_2 . "'");
            if (!empty($var_99->var_53)) $var_99->fn_29();
        }

        expHistory::back();
    }

    
    public function fn_31() {
        $var_29 = $var_22->var_4;
        $var_96 = new $var_29($var_22->var_17['id']);
        $var_96->fn_31($var_22->var_17['push']);
        expHistory::back();
    }

    
    public function fn_32() {
        expHistory::set('manageable', $var_22->var_17);

        $var_40 = new class_3(array(
            'model'      => $var_22->var_4,
            'where'      => static::fn_6() ? $var_22->fn_16() : null,
            'limit'      => isset($var_22->var_17['limit']) ? $var_22->var_17['limit'] : 10,
            'order'      => isset($var_22->var_17['order']) ? $var_22->var_17['order'] : null,
            'page'       => (isset($var_22->var_17['page']) ? $var_22->var_17['page'] : 1),
            'controller' => $var_22->var_2,
            'action'     => $var_22->var_17['action'],
            'src'        => static::fn_6() == true ? $var_22->var_18->var_21 : null,
            'columns'    => array(
                gt('ID
                gt('var_42') => 'title',
                gt('Body')  => 'body'
            ),
        ));

        assign_to_template(array(
            'page'  => $var_40,
            'items' => $var_40->var_43
        ));
    }

    
    public function fn_33() {
        $var_101 = 1;
        foreach ($var_22->var_17['rerank'] as $var_53) {
            $var_29 = $var_22->var_17['model'];
            $var_96 = new $var_29($var_53);
            $var_96->var_101 = $var_101;
            $var_96->save(false, true);
            $var_101++;
        }

        if (!expJavascript::inAjaxAction())
            redirect_to($var_22->var_17['lastpage']);
    }

    
    public function fn_34() {
        global $var_44;

        expHistory::set('editable', $var_22->var_17);
        $var_103 = expTemplate::get_config_templates($var_22, $var_22->var_18);

        
        $var_104 = expModules::listInstalledControllers($var_22->var_2, $var_22->var_18);
        $var_40 = new class_3(array(
            'records' => $var_104,
            'controller' => $var_22->var_18->var_105,
            'action' => $var_22->var_17['action'],
            'order'   => isset($var_22->var_17['order']) ? $var_22->var_17['order'] : 'section',
            'dir'     => isset($var_22->var_17['dir']) ? $var_22->var_17['dir'] : '',
            'page'    => (isset($var_22->var_17['page']) ? $var_22->var_17['page'] : 1),
            'columns' => array(
                gt('Title') => 'title',
                gt('Page')  => 'section'
            ),
        ));


            $var_106 = expCore::makeLocation(expModules::getModuleName($var_22->var_18->var_105),$var_22->var_18->var_21);
            $var_107 = $var_44->selectObject('container', "internal='" . serialize($var_106) . "'");
            if (empty($var_107)) {
                $var_107 = new class_5();
                $var_107->var_109 = 'showall';
            } else {
                $var_107->var_110 = unserialize($var_107->var_110);
            }
            if (empty($var_107->var_109)) {
                $var_107->var_109 = 'showall';
            }






























            $var_111 = $var_22->var_6;
            $var_112 = array();
            if (!empty($var_111)) {
                  
                foreach ($var_111 as $var_113 => $var_114) {
                    $var_111[$var_113] = gt($var_114);
                }
                $var_112 = expTemplate::get_action_views($var_22->var_1, $var_107->var_109, $var_111[$var_107->var_109]);
                if (count($var_112) < 1) $var_112[$var_107->var_109] = $var_111[$var_107->var_109] . ' - Default View';
            }

            assign_to_template(array(
                'container' => $var_107,
                'actions'   => $var_111,
                'mod_views' => $var_112,
            ));

        if (!empty($var_22->var_17['hcview'])) {
            
            assign_to_template(array(
                'hcview' => $var_22->var_17['hcview'],
            ));
        }

        $var_63 = new class_6();
        $var_115 = $var_63->find('all','module="file"');
        $var_116 = array();
        $var_116[] = 'Root Folder';
        foreach ($var_115 as $var_117) {
            $var_116[$var_117->var_53] = $var_117->var_61;
        }

        assign_to_template(array(

            'page'              => $var_40, 
            'views'             => $var_103,
            'title'             =>static::fn_3(),
            'current_section'   => expSession::get('last_section'),

            'viewpath'          => $var_22->var_13,
            'relative_viewpath' => $var_22->var_14,
            'folders'           => $var_116,
        ));

    }

    
    public function fn_35() {
        global $var_44;

        
        if (!empty($var_22->var_17['container_id'])) {
            $var_107 = $var_44->selectObject('container', "id=" . $var_22->var_17['container_id']);
            if (!empty($var_107)) {
                $var_107->var_61 = $var_22->var_17['moduletitle'];
                $var_107->var_109 = $var_22->var_17['actions'];
                $var_107->var_118 = $var_22->var_17['views'];
                $var_107->var_119 = $var_22->var_17['is_private'];
                $var_44->updateObject($var_107, 'container');
                expSession::clearAllUsersSessionCache('containermodule');
            }
            unset(
                $var_22->var_17['container_id'],
                $var_22->var_17['moduletitle'],
                $var_22->var_17['modcntrol'],
                $var_22->var_17['actions'],
                $var_22->var_17['views'],
                $var_22->var_17['actions'],
                $var_22->var_17['is_private']
            );
        }

        
        $var_17 = $var_22->var_17;
        if (!empty($var_22->var_17['enable_rss'])) {
            $var_17['title'] = $var_17['feed_title'];
            unset($var_17['feed_title']);
            $var_17['sef_url'] = $var_17['feed_sef_url'];
            unset($var_17['feed_sef_url']);
            $var_121 = new class_8($var_17);
            $var_121->fn_28($var_17);
            $var_22->var_17['feed_sef_url'] = $var_121->var_69;
        } else {
            $var_121 = new class_8($var_22->var_17);
            $var_17['enable_rss'] = false;
            if (empty($var_17['advertise']))
                $var_17['advertise'] = false;
            $var_17['title'] = $var_17['feed_title'];
            unset($var_17['feed_title']);
            $var_17['sef_url'] = $var_17['feed_sef_url'];
            unset($var_17['feed_sef_url']);
            if (!empty($var_121->var_53)) { 
                $var_121->fn_28($var_17);
                $var_22->var_17['feed_sef_url'] = $var_121->var_69;
            }
        }

        
        if (!empty($var_22->var_17['enable_ealerts'])) {
            $var_122 = new class_9($var_22->var_17);
            $var_122->fn_28($var_22->var_17);
        }

        
        unset(
            $var_22->var_17['module'],
            $var_22->var_17['controller'],
            $var_22->var_17['src'],
            $var_22->var_17['int'],
            $var_22->var_17['id'],
            $var_22->var_17['cid'],
            $var_22->var_17['action'],
            $var_22->var_17['PHPSESSID'],
            $var_22->var_17['__utma'],
            $var_22->var_17['__utmb'],
            $var_22->var_17['__utmc'],
            $var_22->var_17['__utmz'],
            $var_22->var_17['__utmt'],
            $var_22->var_17['__utmli'],
            $var_22->var_17['__cfduid']
        );

        
        $var_16 = new class_2($var_22->var_18);
        $var_16->fn_28(array('config' => $var_22->var_17));

        flash('message', gt('Configuration updated'));
        expHistory::back();
    }

    
    public function var_123($var_70 = 0) {
        $var_124 = new $var_22->var_4;
        $var_49 = $var_124->find('all', $var_22->fn_16(), isset($var_22->var_16['order']) ? $var_22->var_16['order'] : 'created_at DESC', $var_70);

        
        $var_125 = array();
        foreach ($var_49 as $var_113 => $var_52) {
            $var_126 = new class_10();
            $var_126->var_61 = expString::convertSmartQuotes($var_52->var_61);
            $var_126->var_127 = $var_126->var_128 = makeLink(array('controller' => $var_22->var_2, 'action' => 'show', 'title' => $var_52->var_69));
            $var_126->var_37 = expString::convertSmartQuotes($var_52->var_129);
            $var_126->var_38 = user::getUserById($var_52->var_130)->var_131 . ' ' . user::getUserById($var_52->var_130)->var_132;
            $var_126->var_133 = user::getEmailById($var_52->var_130);

            $var_126->var_134 = isset($var_52->var_135) ? $var_52->var_135 : $var_52->var_136;
            if (!empty($var_52->var_62[0]->var_61)) $var_126->var_137 = array($var_52->var_62[0]->var_61);
            $var_138 = expCommentController::countComments(array('content_id' => $var_52->var_53, 'content_type' => $var_22->var_4));
            if ($var_138) {
                $var_126->var_64 = makeLink(array('controller' => $var_22->var_2, 'action' => 'show', 'title' => $var_52->var_69)) . '

                $rss_item->commentsCount = $comment_count;
            }
            $rssitems[$key] = $rss_item;

            if ($limit && count($rssitems) >= $limit)
                break;
        }
        return $rssitems;
    }

    
    public function rss() {

        $id = isset($this->params['var_61']) ? $var_22->var_17['title'] : (isset($var_22->var_17['id']) ? $var_22->var_17['id'] : null);
        if (empty($var_53)) {
            $var_139 = !empty($var_22->var_17['module']) ? $var_22->var_17['module'] : $var_22->var_17['controller'];
            $var_53 = array('module' => $var_139, 'src' => $var_22->var_17['src']);
        }
        $var_140 = new class_8($var_53);
        if ($var_140->var_141 == true && !empty($var_140->var_53)) {
            $var_140->var_61 = empty($var_140->var_61) ? gt('RSS for') . ' ' . var_142 : $var_140->var_61;
            $var_140->var_143 = empty($var_140->var_143) ? gt('This is an RSS syndication from') . ' ' . var_144 : $var_140->var_143;



            if ($var_140->var_145 == 0) {
                $var_140->var_145 = 1440;
            }

            if (!empty($var_140->var_146)) {
                $var_147 = explode(";", $var_140->var_146);
                $var_148 = 0;
                $var_146 = array();
                foreach ($var_147 as $var_117) {
                    $var_149 = explode(":", $var_117);
                    $var_146[$var_148]->var_137 = $var_149[0];
                    if (isset($var_149[1])) {
                        $var_146[$var_148]->var_150 = $var_149[1];
                    }
                    $var_148++;
                }
            }

            
            ob_end_clean();

            header('Content-Type: ' . 'application/rss+xml');


            header('Content-Encoding:');
            
            if (var_151 == 'IE') {
                header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
                header('Pragma: public');
                header('Vary: User-Agent');
            } else {
                header('Pragma: no-cache');
            }

            if ($var_140->var_20) {
                $var_152 = "PODCAST";
            } else {
                $var_152 = "RSS2.0";
            }
            $var_153 = var_27 . 'tmp/rsscache/' . $var_140->var_69 . '.xml';

            $var_154 = new class_11();


            if (file_exists(var_155 . "rss/feed.xsl"))  
                $var_154->var_156 = var_157 . "rss/feed.xsl";
            $var_154->useCached($var_152, $var_153, $var_140->var_145);  

            $var_154->var_61 = $var_140->var_61;
            if (!empty($var_22->var_17['type']))
                $var_154->var_61 .= ' ' . ucfirst($var_22->var_17['type']);
            $var_154->var_37 = $var_140->var_143;
            $var_154->var_159 = new class_12();
            $var_154->var_159->var_160 = !empty($var_140->expFile['album'][0]) ? $var_140->expFile['album'][0]->var_160 : var_142 . 'themes/' . var_161 . '/images/logo.png';
            $var_154->var_159->var_61 = $var_140->var_61;
            $var_154->var_159->var_127 = var_142;
            
            
            $var_154->var_162 = $var_140->var_145;
            $var_154->var_127 = var_142;
            $var_154->var_163 = var_164;
            $var_154->var_165 = makeLink(array('module'=>$var_140->var_139, 'src'=>$var_140->var_21));
            if ($var_140->var_20) {
                $var_154->var_166 = new class_13();
                $var_154->var_166->var_38 = !empty($var_140->var_167) ? $var_140->var_167 : var_168;
                $var_154->var_166->var_159 = !empty($var_140->expFile['album'][0]) ? $var_140->expFile['album'][0]->var_160 :var_142 . 'themes/' . var_161 . '/images/logo.png';
                $var_154->var_166->var_169 = $var_140->var_143;
                if (!empty($var_146)) {
                    $var_154->var_166->var_137 = $var_146[0]->var_137;
                    $var_154->var_166->var_150 = $var_146[0]->var_150;
                }
                

                $var_154->var_166->var_170 = $var_140->var_143;
                
                $var_154->var_166->var_171 = var_172;
                $var_154->var_166->var_173 = var_168;
            }

            $var_174 = '';
            $var_140->var_17 = $var_22->var_17;
            foreach ($var_140->getFeedItems($var_140->var_176) as $var_52) {
                if ($var_52->var_134 > $var_174) {
                    $var_174 = $var_52->var_134;
                }
                $var_154->addItem($var_52);
            }
            if (!empty($var_140->var_176)) {
                $var_154->var_49 = array_slice($var_154->var_49, 0, $var_140->var_176);
            }
            $var_154->var_174 = $var_174;


              
        } else {
            flash('notice', gt("This RSS feed is not available."));
            expHistory::back();
        }

        
        exit();
    }

    
    public function fn_36() {
        if (!isset($var_22->var_16['allowdownloads']) || $var_22->var_16['allowdownloads'] == true) {
            
            expFile::download($var_22->var_17['id']);
            
        } else {
            flash('error', gt('Downloads have not been enabled for this file'));
            expHistory::back();
        }

    }

    
    public function fn_0() {
        
        $var_178 = array();
        foreach ($var_22->var_8 as $var_179 => $var_36) {
            if (!in_array($var_179, $var_22->var_9)) $var_178[$var_179] = $var_36;
        }
        $var_178 = array_merge($var_178, $var_22->var_10);
        return $var_178;
    }

    
    public static function fn_37($var_180, $var_181) {
        return false;
    }

    
    public function fn_38() {
        return isset($var_22->var_182) ? $var_22->var_182 : array($var_22->var_4);
    }

    
    public function fn_39() {
        return static::fn_3();
    }

    
    public function fn_40() {
        return $var_22->var_4;
    }

    
    public function fn_30() {

        global $var_44;

        $var_58 = 0;
        $var_77 = new $var_22->var_4(null, false, false);
        $var_74 = (!empty($var_22->var_17['id'])) ? 'id=' . $var_22->var_17['id'] : null;
        $var_99 = $var_44->selectArrays($var_77->var_30, $var_74);
        foreach ($var_99 as $var_186) {
            $var_187 = $var_186['id'];
            unset($var_186['id']);
           

            $var_78 = "original_id=" . $var_187 . " AND ref_module='" . $var_22->var_2 . "'";
            $var_188 = $var_44->selectObject('search', $var_78);
            if (!empty($var_188)) {
                $var_189 = new class_7($var_188->var_53, false, false);
                $var_189->fn_28($var_186);
            } else {
                $var_189 = new class_7($var_186, false, false);
            }

            
            $var_189->var_190 = $var_187;
            $var_189->var_191 = empty($var_186['created_at']) ? null : $var_186['created_at'];
            
            if (isset($var_186['location_data']))
                $var_18 = expUnserialize($var_186['location_data']);
            $var_21 = isset($var_18->var_21) ? $var_18->var_21 : null;
            if (!empty($var_186['sef_url'])) {
                $var_127 = str_replace(var_142, '', makeLink(array('controller' => $var_22->var_2, 'action' => 'show', 'title' => $var_186['sef_url'])));
            } else {
                $var_127 = str_replace(var_142, '', makeLink(array('controller' => $var_22->var_2, 'action' => 'show', 'id' => $var_187, 'src' => $var_21)));
            }

            $var_189->var_192 = $var_127;

            $var_189->var_193 = $var_22->var_2;
            $var_189->var_137 = $var_22->fn_39();
            $var_189->var_194 = $var_22->fn_40();
            $var_189->save();
            $var_58++;
        }

        return $var_58;
    }

    
    public static function fn_41($var_71) {
        return true;  
    }

    
    public function fn_42() {
        global $var_44;
        
        if ($var_22->fn_10()) {

            $var_74 = "ref_module='" . $var_22->var_2 . "' AND location_data='" . serialize($var_22->var_18) . "'";

            $var_44->fn_29('search', $var_74);
        }
    }

    
    public function fn_43($var_18) {
        $var_22->fn_44($var_18);
    }

    
    public function fn_44($var_18 = false) {
        $var_77 = new $var_22->var_4();
        $var_74 = 1;
        if ($var_18 || static::fn_6())
            $var_74 = "location_data='" . serialize($var_22->var_18) . "'";
        $var_49 = $var_77->find('all',$var_74);
        foreach ($var_49 as $var_52) {
            $var_52->fn_29();  
        }
        $var_196 = new class_2($var_22->var_18);
        $var_196->fn_29();
    }

    
    public function fn_45() {
        global $var_198;

        if (empty($var_198->var_17['action'])) return false;

        
        $var_109 = $var_198->var_17['action'];
        $var_197 = array('title' => '', 'keywords' => '', 'description' => '', 'canonical' => '', 'noindex' => false, 'nofollow' => false);
        $var_29 = $var_22->var_4;

        switch ($var_109) {
            case 'showall':
                $var_197['title'] = gt("Showing") . " " . static::fn_3() . ' - ' . var_199;
                $var_197['keywords'] = var_200;
                $var_197['description'] = var_201;
                break;
            case 'show':
            case 'showByTitle':
                
                if (isset($var_198->var_17['id']) || isset($var_198->var_17['title'])) {
                    $var_202 = isset($var_198->var_17['id']) ? $var_198->var_17['id'] : $var_198->var_17['title'];
                    $var_203 = new $var_29($var_202);
                    
                    if (!empty($var_203)) {
                        if (!empty($var_203->var_129)) {
                            $var_204 = str_replace('"',"'",expString::summarize($var_203->var_129,'html','para'));
                        } else {
                            $var_204 = var_201;
                        }
                        if (!empty($var_203->var_46)) {
                            $var_205 = '';
                            foreach ($var_203->var_46 as $var_45) {
                                if (!empty($var_205)) $var_205 .= ', ';
                                $var_205 .= $var_45->var_61;
                            }
                        } else {
                            $var_205 = var_200;
                        }
                        $var_197['title'] = empty($var_203->var_206) ? $var_203->var_61 : $var_203->var_206;
                        $var_197['keywords'] = empty($var_203->var_207) ? $var_205 : $var_203->var_207;
                        $var_197['description'] = empty($var_203->var_208) ? $var_204 : $var_203->var_208;

                        $var_197['canonical'] = empty($var_203->var_209) ? $var_198->plainPath() : $var_203->var_209;
                        $var_197['noindex'] = empty($var_203->var_211) ? false : $var_203->var_211;
                        $var_197['nofollow'] = empty($var_203->var_212) ? false : $var_203->var_212;
                        $var_197['rich'] = $var_22->fn_46($var_198->var_17, $var_203);
                        $var_197['fb'] = $var_22->fn_47($var_198->var_17, $var_203, $var_197['canonical']);
                        $var_197['tw'] = $var_22->fn_48($var_198->var_17, $var_203, $var_197['canonical']);
                    }
                    break;
                }
            default:
                
                $var_216 = $var_109 . "_meta";
                $var_105 = new $var_22->var_1;
                if (method_exists($var_105, $var_216)) {
                    $var_197 = $var_105->$var_216($var_198->var_17);
                } else {
                    $var_197['title'] = static::fn_3() . " - " . var_199;
                    $var_197['keywords'] = var_200;
                    $var_197['description'] = var_201;

                    $var_197['canonical'] = $var_198->plainPath();
                }
        }

        return $var_197;
    }

    
    public function fn_46($var_217, $var_203) {
        return null;
    }

    
    public function fn_47($var_217, $var_203, $var_209) {
        return array();
    }

    
    public function fn_48($var_217, $var_203, $var_209) {
        return array();
    }

    
    public function fn_49($var_217) {
        global $var_198;

        
        if (isset($var_217['tag'])) {
            $var_197 = array('title' => '', 'keywords' => '', 'description' => '', 'canonical' => '', 'noindex' => false, 'nofollow' => false);
            $var_45 = $var_217['tag'];
            
            $var_197['title'] = gt('Showing all') . ' ' . ucwords($var_22->var_4) . ' ' . gt('tagged as') . ' ' . $var_45;

            $var_197['keywords'] = $var_217['tag'];

            $var_197['description'] = var_201;


            $var_197['canonical'] = $var_198->plainPath();
            return $var_197;
        }
        return null;
    }

    
    public function fn_50($var_217) {
        global $var_198;

        
        if (isset($var_217['month'])) {
            $var_197 = array('title' => '', 'keywords' => '', 'description' => '', 'canonical' => '', 'noindex' => false, 'nofollow' => false);
            $var_218 = mktime(0, 0, 0, $var_217['month'], 1, $var_217['year']);
            $var_219 = strftime('%B, %Y', $var_218);
            
            $var_197['title'] = gt('Showing all') . ' ' . ucwords($var_22->var_4) . ' ' . gt('written in') . ' ' . $var_219;

            $var_197['keywords'] = var_200;

            $var_197['description'] = var_201;


            $var_197['canonical'] = $var_198->plainPath();
            return $var_197;
        }
        return null;
    }

    
    public function fn_51() {
        $var_29 = $var_22->var_4;
        $var_202 = isset($var_22->var_17['id']) ? $var_22->var_17['id'] : $var_22->var_17['title'];
        $var_203 = new $var_29($var_202);
        $var_203->var_220 = true;
        $var_203->save(false, true);  
        expHistory::back();
    }

    
    public function fn_16($var_221='') {
        global $var_222;

        $var_78 = '';

        if (empty($var_22->var_16['add_source']) && !static::fn_6()) {
            return $var_78;
        }

        if (!empty($var_22->var_16['aggregate'])) $var_78 .= '(';

        $var_78 .= "location_data ='" . serialize($var_22->var_18) . "'";

        if (!empty($var_22->var_16['aggregate'])) {
            foreach ($var_22->var_16['aggregate'] as $var_21) {
                $var_18 = expCore::makeLocation($var_22->var_2, $var_21);
                $var_78 .= " OR location_data ='" . serialize($var_18) . "'";
            }

            $var_78 .= ')';
        }
        $var_77 = $var_22->var_4;
        if (var_31 && $var_22->$var_77->var_34) {
            if ($var_222->var_53) {
                $var_78 .= ' AND (approved=1 OR poster=' . $var_222->var_53 . ' OR editor=' . $var_222->var_53 . ')';
            } else {
                $var_78 .= ' AND approved=1';
            }
        }

        return $var_78;
    }

}

?>